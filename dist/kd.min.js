!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.kd=t()}}(function(){var t;return function e(t,n,i){function o(r,a){var l,u,c;if(!n[r]){if(!t[r]){if(l="function"==typeof require&&require,!a&&l)return l(r,!0);if(s)return s(r,!0);throw u=new Error("Cannot find module '"+r+"'"),u.code="MODULE_NOT_FOUND",u}c=n[r]={exports:{}},t[r][0].call(c.exports,function(e){var n=t[r][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}var r,s="function"==typeof require&&require;for(r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),r=t("../inputs/inputview"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.mouseDown=function(){return this.focus()},e.prototype.setDomElement=function(){return this.domElement=n("<div class='kdautocompletewrapper clearfix'><input type='text' placeholder='"+this.getOptions().placeholder+"' class='kdinput text'/></div>")},e.prototype.setDomId=function(){return this.$input().attr("id",this.getDomId()),this.$input().attr("name",this.getName()),this.$input().data("data-id",this.getId())},e.prototype.setDefaultValue=function(t){return this.inputDefaultValue=t,this.setValue(t)},e.prototype.$input=function(){return this.$("input").eq(0)},e.prototype.getValue=function(){return this.$input().val()},e.prototype.setValue=function(t){return this.$input().val(t)},e.prototype.bindEvents=function(){return e.__super__.bindEvents.call(this,this.$input())},e.prototype.blur=function(){return this.unsetClass("focus"),!0},e.prototype.focus=function(){return this.setClass("focus"),e.__super__.focus.apply(this,arguments)},e.prototype.keyDown=function(){return i.getSingleton("windowController").setKeyView(this),!0},e.prototype.getLeftOffset=function(){return this.$input().prev().width()},e.prototype.setPlaceholder=function(t){return this.$input()[0].setAttribute("placeholder",t)},e.prototype.setFocus=function(){return e.__super__.setFocus.apply(this,arguments),this.$input().trigger("focus")},e.prototype.setBlur=function(){return e.__super__.setBlur.apply(this,arguments),this.$input().trigger("blur")},e}(r)},{"../../core/kd":99,"../inputs/inputview":44,jquery:111}],2:[function(t,e){var n,i,o,r,s,a,l,u,c,p,h,d,f,m,g,v,y,w=function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty,C=[].slice;n=t("jquery"),r=t("../../core/kd"),u=t("./autocompletelistitem"),p=t("./autocompletenothingfounditem"),h=t("./autocompleteditems"),d=t("../inputs/inputview"),v=t("../../core/view"),o=t("jspath"),i=t("inflector"),y=t("../../core/viewcontroller"),m=t("../list/listviewcontroller"),f=t("../inputs/labelview"),g=t("../notifications/notificationview"),s=t("./autocomplete"),c=t("./autocompletelist"),l=t("./autocompletefetchingitem"),e.exports=a=function(t){function e(t,i){var o,r;null==t&&(t={}),t=n.extend({view:o=t.view||new s({name:t.name,placeholder:t.placeholder||"",label:t.label||new f({title:t.name})}),itemClass:u,selectedItemClass:h,nothingFoundItemClass:p,fetchingItemClass:l,fetchInterval:null!=(r=t.fetchInterval)?r:300,listWrapperCssClass:"",minSuggestionLength:2,selectedItemsLimit:null,itemDataPath:"",separator:",",wrapper:"parent",submitValuesAsText:!1,defaultValue:[]},t),e.__super__.constructor.call(this,t,i),o.on("focus",this.bound("updateDropdownContents")),this.lastPrefix=null,this.selectedItemData=[],this.hiddenInputs={},this.selectedItemCounter=0,this.readyToShowDropDown=!0,this.createDropDown(),this.getAutoCompletedItemParent()}return w(e,t),e.prototype.reset=function(){var t,e,n,i,o;for(o=this.itemWrapper.getSubViews().slice(),i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(this.removeFromSubmitQueue(t));return i},e.prototype.loadView=function(t){return this.setDefaultValue(),t.on("keyup",this.bound("keyUpOnInputView")),t.on("keydown",function(t){return function(e){return t.keyDownOnInputView(e)}}(this))},e.prototype.setDefaultValue=function(t){var e,n,i,o,r,s,a;for(s=this.getOptions(),e=s.defaultValue,i=s.itemDataPath,t||(t=e),a=[],o=0,r=t.length;r>o;o++)n=t[o],a.push(this.addItemToSubmitQueue(this.getView(),n));return a},e.prototype.keyDownOnInputView=function(t){var e,n;switch(e=this.getView(),n=this.dropdown.getListView(),t.which){case 13:case 9:""!==e.getValue()&&t.shiftKey!==!0&&(this.submitAutoComplete(e.getValue()),this.readyToShowDropDown=!1);break;case 27:this.hideDropdown();break;case 38:if(this.active)return n.goUp(),r.utils.stopDOMEvent(t);break;case 40:if(this.active)return n.goDown(),r.utils.stopDOMEvent(t);break;default:this.readyToShowDropDown=!0}return!1},e.prototype.getPrefix=function(){var t,e,n;return n=this.getOptions().separator,t=this.getView().getValue().split(n),e=t[t.length-1]},e.prototype.createDropDown=function(t){var e,n,i;return null==t&&(t=[]),this.dropdownPrefix="",this.dropdownListView=e=new c({itemClass:this.getOptions().itemClass},{items:t}),e.on("ItemsDeselected",function(t){return function(){var e;return e=t.getView(),e.$input().trigger("focus")}}(this)),e.on("KDAutoCompleteSubmit",this.bound("submitAutoComplete")),i=r.getSingleton("windowController"),this.dropdown=new m({view:e}),n=this.dropdown.getView(),n.on("ReceivedClickElsewhere",function(t){return function(){return t.hideDropdown()}}(this)),n.setClass("kdautocomplete hidden "+this.getOptions().listWrapperCssClass),n.appendToDomBody()},e.prototype.hideDropdown=function(){var t;return t=this.dropdown.getView(),this.active=!1,t.hide()},e.prototype.showDropdown=function(){var t,e,n,i;if(this.readyToShowDropDown)return this.active=!0,i=r.getSingleton("windowController"),t=this.dropdown.getView(),t.unsetClass("hidden"),e=this.getView(),n=e.$().offset(),n.top+=e.getHeight(),t.$().css(n),t.show(),i.addLayer(t)},e.prototype.refreshDropDown=function(t){var e,n,i,r,s,a,l,u;return null==t&&(t=[]),a=this.dropdown.getListView(),this.dropdown.removeAllItems(),a.userInput=this.dropdownPrefix,i=RegExp("^"+this.dropdownPrefix.replace(/[^\s\w]/,"")+"$","i"),n=[],r=[],u=this.getOptions(),s=u.itemDataPath,e=u.allowNewSuggestions,l=u.minSuggestionLength,t.forEach(function(t){return function(e){var a;return t.isItemAlreadySelected(e)?void 0:(a=o.getAt(e,s),i.test(a)?n.push(e):r.push(e))}}(this)),this.dropdownPrefix.length>=l&&e&&!n.length&&this.dropdown.getListView().addItemView(this.getNoItemFoundView()),t=n.concat(r),this.dropdown.instantiateListItems(t),this.dropdown.getListView().goDown()},e.prototype.submitAutoComplete=function(){var t,e,n;return e=this.getView(),null===this.getOptions().selectedItemsLimit||this.getOptions().selectedItemsLimit>this.selectedItemCounter?(n=this.dropdown.getListView(),t=n.getActiveItem(),n.setActiveItem(null),t.item&&this.appendAutoCompletedItem(),this.addItemToSubmitQueue(t.item),this.emit("ItemListChanged",this.selectedItemCounter)):(e.setValue(""),r.getSingleton("windowController").setKeyView(null),new g({type:"mini",title:"You can add up to "+this.getOptions().selectedItemsLimit+" items!",duration:4e3})),this.hideDropdown()},e.prototype.getAutoCompletedItemParent=function(){var t;return t=this.getOptions().outputWrapper,this.itemWrapper=t instanceof v?t:this.getView(),this.itemWrapper},e.prototype.isItemAlreadySelected=function(t){var e,n,i,r,s,a,l,u,c,p,h;for(l=this.getOptions(),r=l.itemDataPath,n=l.customCompare,i=l.isCaseSensitive,h=o.getAt(t,r),u=this.getSelectedItemData(),s=0,a=u.length;a>s;s++)if(p=u[s],null!=n){if(e=n(t,p))return!0}else if(c=o.getAt(p,r),i||(h=h.toLowerCase(),c=c.toLowerCase()),h===c)return!0;return!1},e.prototype.addHiddenInputItem=function(t,e){return this.itemWrapper.addSubView(this.hiddenInputs[t]=new d({type:"hidden",name:t,defaultValue:e}))},e.prototype.removeHiddenInputItem=function(t){return delete this.hiddenInputs[t]},e.prototype.addSelectedItem=function(t,e){var n,i;return i=this.getOptions().selectedItemClass,this.itemWrapper.addSubView(n=new i({cssClass:"kdautocompletedlistitem",delegate:this,name:t},e)),n.setPartial("<span class='close-icon'></span>")},e.prototype.getSelectedItemData=function(){return this.selectedItemData},e.prototype.addSelectedItemData=function(t){return this.getSelectedItemData().push(t)},e.prototype.removeSelectedItemData=function(t){var e,n,i,o,r;for(r=this.getSelectedItemData(),e=n=0,i=r.length;i>n;e=++n)if(o=r[e],o===t)return void r.splice(e,1)},e.prototype.getCollectionPath=function(){var t,e,n,o,r,s;if(o=this.getOptions().name,!o)throw new Error("No name!");return s=o.split("."),r=2<=s.length?C.call(s,0,e=s.length-1):(e=0,[]),n=s[e++],t=i.pluralize(n),r.push(t),r.join(".")},e.prototype.addSuggestion=function(t){return this.emit("AutocompleteSuggestionWasAdded",t)},e.prototype.addItemToSubmitQueue=function(t,e){var n,i,r,s,a,l,u,c,p;return e||(e=null!=t?t.getData():void 0),e||(null!=t?t.getOptions().userInput:void 0)?(c=this.getOptions(),l=c.name,r=c.itemDataPath,i=c.form,p=c.submitValuesAsText,e?a=p?o.getAt(e,r):e:(a=t.getOptions().userInput,e=o(r,a)),this.isItemAlreadySelected(e)?!1:(u=this.getCollectionPath(),s=l+"-"+this.selectedItemCounter++,i?(n=i.getCustomData(u)||[],n.push(p?a:("function"==typeof a.getId?a.getId():void 0)?{constructorName:a.constructor.name,id:a.getId(),title:a.title}:{$suggest:a}),i.addCustomData(u,n),t.getOptions().userInput===!0&&this.selectedItemCounter++):this.addHiddenInputItem(u,a),this.addSelectedItemData(e),this.addSelectedItem(s,e),this.getView().setValue(this.dropdownPrefix=""))):void 0},e.prototype.removeFromSubmitQueue=function(t,e){var n,i,r,s,a;return a=this.getOptions(),r=a.itemDataPath,i=a.form,e||(e=t.getData()),s=this.getCollectionPath(),i?(n=o.getAt(i.getCustomData(),s),n=n.filter(function(t){var n;return n="function"==typeof e.getId?e.getId():void 0,null==n?t.$suggest!==e.title:t.id!==n}),o.setAt(i.getCustomData(),s,n)):this.removeHiddenInputItem(s),this.removeSelectedItemData(e),this.selectedItemCounter--,t.destroy(),this.emit("ItemListChanged",this.selectedItemCounter)},e.prototype.appendAutoCompletedItem=function(){return this.getView().setValue(""),this.getView().$input().trigger("focus")},e.prototype.updateDropdownContents=function(){var t,e,n;return e=this.getView(),n=e.getValue().trim(),""===n?this.hideDropdown():this.active&&n===this.dropdownPrefix?void 0:(this.dropdownPrefix=n,this.showFetching(),t=this.getOptions().fetchInterval,this.fetch(r.utils.debounce(t,function(t){return function(e){return e.length>0?(t.refreshDropDown(e),t.showDropdown()):(r.log("no data found"),t.showNoDataFound())}}(this))))},e.prototype.keyUpOnInputView=function(t){var e;if(9!==(e=t.keyCode)&&38!==e&&40!==e)return this.updateDropdownContents(),!1},e.prototype.fetch=function(t){var e,n,i,o,r;return o=this.getOptions(),n=o.fetchInputName,e=o.dataSource,r=this.getView().getValue(),i={},n?i[n]=r:i={inputValue:r},this.dropdownPrefix=r,e(i,t)},e.prototype.showFetching=function(){var t,e;return t=this.getOptions().fetchingItemClass,e=this.dropdown.getListView(),this.dropdown.removeAllItems(),e.addItemView(new t({},{})),this.showDropdown()},e.prototype.getNoItemFoundView=function(t){var e,n;return e=this.getOptions().nothingFoundItemClass,n=new e({delegate:this.dropdown.getListView(),userInput:t||this.getView().getValue()},{})},e.prototype.showNoDataFound=function(){var t;return t=this.getNoItemFoundView(),this.dropdown.removeAllItems(),this.dropdown.getListView().addItemView(t),this.showDropdown()},e.prototype.destroy=function(){return this.dropdown.getView().destroy(),e.__super__.destroy.apply(this,arguments)},e}(y)},{"../../core/kd":99,"../../core/view":105,"../../core/viewcontroller":106,"../inputs/inputview":44,"../inputs/labelview":45,"../list/listviewcontroller":54,"../notifications/notificationview":60,"./autocomplete":1,"./autocompleteditems":3,"./autocompletefetchingitem":4,"./autocompletelist":5,"./autocompletelistitem":6,"./autocompletenothingfounditem":7,inflector:116,jquery:111,jspath:117}],3:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("../../core/view"),e.exports=i=function(t){function e(t){null==t&&(t={}),t.cssClass=this.utils.curry("kdautocompletedlistitem",t.cssClass),e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.click=function(t){return n(t.target).is("span.close-icon")&&this.getDelegate().removeFromSubmitQueue(this),this.getDelegate().getView().$input().trigger("focus")},e.prototype.viewAppended=function(){return this.setPartial(this.partial())},e.prototype.partial=function(){return this.getDelegate().getOptions().itemClass.prototype.partial(this.getData())},e}(o)},{"../../core/view":105,jquery:111}],4:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("./autocompleteunselecteableitem"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kdautocompletelistitem fetching",t.cssClass),e.__super__.constructor.call(this,t,i)}return r(e,t),e.prototype.partial=function(){return"loading..."},e}(o)},{"../../core/kd":99,"./autocompleteunselecteableitem":8}],5:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../list/listview"),e.exports=n=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.setClass("kdautocompletelist")}return o(e,t),e.prototype.goDown=function(){var t,e,n;return t=this.getActiveItem(),null==t.index?null!=(n=this.items[0])?n.makeItemActive():void 0:(e=this.items[t.index+1],null!=e?e.makeItemActive():void 0)},e.prototype.goUp=function(){var t;return t=this.getActiveItem(),null!=t.index?null!=this.items[t.index-1]?this.items[t.index-1].makeItemActive():this.emit("ItemsDeselected"):this.items[0].makeItemActive()},e.prototype.getActiveItem=function(){var t,e,n,i,o,r;for(t={index:null,item:null},r=this.items,e=i=0,o=r.length;o>i;e=++i)if(n=r[e],n.active){t.item=n,t.index=e;break}return t},e.prototype.setActiveItem=function(t){var e,n,i,o,r;for(o=this.items,r=[],n=0,i=o.length;i>n;n++)e=o[n],r.push(e.active=e===t);return r},e}(i)},{"../list/listview":52}],6:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../list/listitemview"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kdautocompletelistitem",t.cssClass),t.bind="mouseenter mouseleave",e.__super__.constructor.call(this,t,i),this.active=!1}return r(e,t),e.prototype.viewAppended=function(){return this.updatePartial(this.partial(this.data))},e.prototype.mouseEnter=function(){return this.makeItemActive()},e.prototype.mouseLeave=function(){return this.makeItemInactive()},e.prototype.makeItemActive=function(){var t,e,n,i;for(i=this.getDelegate().items,t=0,n=i.length;n>t;t++)e=i[t],e.makeItemInactive();return this.active=!0,this.setClass("active")},e.prototype.makeItemInactive=function(){return this.active=!1,this.unsetClass("active")},e.prototype.click=function(t){var e;return e=this.getDelegate(),e.emit("KDAutoCompleteSubmit",this,this.data),n.utils.stopDOMEvent(t)},e.prototype.partial=function(){return"<div class='autocomplete-item clearfix'>Default item</div>"},e}(o)},{"../../core/kd":99,"../list/listitemview":51}],7:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("./autocompleteunselecteableitem"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),t.cssClass=this.utils.curry("kdautocompletelistitem no-result",t.cssClass),e.__super__.constructor.call(this,t,n)}return o(e,t),e.prototype.partial=function(){return"nothing here."},e}(i)},{"./autocompleteunselecteableitem":8}],8:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../list/listitemview"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.click=function(){return!1},e.prototype.keyUp=function(){return!1},e.prototype.keyDown=function(){return!1},e.prototype.makeItemActive=function(){},e.prototype.destroy=function(){return e.__super__.destroy.call(this,!1)},e}(i)},{"../list/listitemview":51}],9:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../list/listview"),r=t("./multiplelistitemview"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.setDomElement=function(){return this.domElement=n("<p class='search-tags clearfix'></p>")},e.prototype.addItems=function(t){var e,n,i,o,s;for(s=[],e=0,i=t.length;i>e;e++)n=t[e],o=new r({delegate:this},n),s.push(this.addItem(o));return s},e.prototype.removeListItem=function(t){return e.__super__.removeListItem.call(this,t),this.getDelegate().inputRemoveValue(t.getData())},e}(i)},{"../list/listview":52,"./multiplelistitemview":11,jquery:111}],10:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),i=t("../../core/kd"),s=t("./simpleautocomplete"),a=t("./multipleinputlistview"),o=t("../inputs/inputview"),e.exports=r=function(t){function e(t){this._values=[],t=n.extend({icon:"noicon",title:""},t),e.__super__.constructor.call(this,t)}return l(e,t),e.prototype.focus=function(){return i.getSingleton("windowController").setKeyView(this)},e.prototype.viewAppended=function(){return this.list=new a({delegate:this}),this.addSubView(this.list)},e.prototype.$input=function(){return this.$().find("input.main").eq(0)},e.prototype.getValues=function(){return this._values},e.prototype.addItemToSubmitQueue=function(){return e.__super__.addItemToSubmitQueue.apply(this,arguments),this.inputAddCurrentValue()},e.prototype.keyUp=function(t){return 13===t.keyCode&&this.inputAddCurrentValue(),e.__super__.keyUp.apply(this,arguments)},e.prototype.inputRemoveValue=function(t){var e;return e=this._values.indexOf(t),e>-1&&this._values.splice(e,1),this._inputChanged()},e.prototype.clear=function(){return this._values=[],this.removeAllItems(),this._inputChanged()},e.prototype.inputAddCurrentValue=function(){var t;return t=this.$input().val(),t=n.trim(t),c.call(this._values,t)>=0||""===t?void 0:(this._values.push(t),this.$input().val(""),this.list.addItems([t]),this._inputChanged())},e.prototype._inputChanged=function(){var t,e,n,i,r,s,a,l,u,c,p;for(this._hiddenInputs||(this._hiddenInputs=[]),u=this._hiddenInputs,t=0,s=u.length;s>t;t++)n=u[t],n.destroy();for(i=this.getOptions().name,c=this._values,e=r=0,a=c.length;a>r;e=++r)p=c[e],l=new o({type:"hidden",name:i+("["+e+"]"),defaultValue:p}),this._hiddenInputs.push(l),this.addSubView(l);return this.emit("MultipleInputChanged",{values:this.getValue()})},e.prototype.click=function(t){return n(t.target).hasClass("addNewItem")?this.inputAddCurrentValue():void 0},e.prototype.setDomId=function(){return this.$input().attr("id",this.getDomId()),this.$input().data("data-id",this.getId())},e.prototype.setDomElement=function(){return this.domElement=n("<div class='filter kdview'> <h2>"+this.getOptions().title+"</h2> <div class='clearfix'> <span class='"+this.getOptions().icon+"'></span> <input type='text' class='main'> <a href='#' class='addNewItem'>+</a> </div> </div>")},e}(s)},{"../../core/kd":99,"../inputs/inputview":44,"./multipleinputlistview":9,"./simpleautocomplete":14,jquery:111}],11:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),i=t("../list/listitemview"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.click=function(t){return n(t.target).hasClass("removeIcon")?this.getDelegate().removeListItem(this):void 0},e.prototype.setDomElement=function(){return this.domElement=n("<span />")},e.prototype.partial=function(){return this.getData()+" <cite class='removeIcon'>x</cite>"},e}(i)},{"../list/listitemview":51,jquery:111}],12:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),i=t("./multipleinputview"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.keyUp=function(t){return 13===t.keyCode?this.inputAddCurrentValue():void 0},e.prototype.setDomElement=function(t){var e;return e=this.getOptions().placeholder,this.domElement=n("<div class='"+t+"'><input type='text' class='main' placeholder='"+(e||"")+"' /></div>")},e.prototype.addItemToSubmitQueue=function(){return!1},e}(i)},{"./multipleinputview":10,jquery:111}],13:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("jquery"),i=t("../buttons/buttonview"),o=t("../../core/customhtmlview"),s=t("../../core/view"),r=t("./noautocompleteinputview"),e.exports=a=function(t){function e(t,i){var o;null==t&&(t={}),o={cssClass:"common-view input-with-extras"},t=n.extend(o,t),e.__super__.constructor.call(this,t,i)}return l(e,t),e.prototype.viewAppended=function(){var t,e,s,a,l,u;return u=this.options,s=u.icon,a=u.input,t=u.button,s&&(this.setClass("with-icon"),l={tagName:"span",cssClass:"icon "+s},this.addSubView(this.icon=new o(l))),a&&this.addSubView(this.input=new r(a)),t?(e={callback:function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.input.inputAddCurrentValue()}}(this)},t=n.extend(e,t),this.addSubView(this.button=new i(t))):void 0},e}(s)},{"../../core/customhtmlview":96,"../../core/view":105,"../buttons/buttonview":18,"./noautocompleteinputview":12,jquery:111}],14:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jspath"),i=t("./autocomplete"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.addItemToSubmitQueue=function(t){var e;return e=n.getAt(t.getData(),this.getOptions().itemDataPath),this.setValue(e)},e.prototype.keyUp=function(t){return 13!==t.keyCode?e.__super__.keyUp.apply(this,arguments):void 0},e.prototype.showNoDataFound=function(){return this.dropdown.removeAllItems(),this.hideDropdown()},e}(i)},{"./autocomplete":1,jspath:117}],15:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),a=t("../../core/view"),r=t("./buttonview"),s=t("../forms/formview"),e.exports=o=function(t){function e(t,n){var o,r,a,l,u,c;for(null==t&&(t={}),t.cssClass=i.utils.curry("formline button-field clearfix",t.cssClass),e.__super__.constructor.call(this,t,n),this.buttons={},a=t.buttons,c=s.sanitizeFormOptions(a),l=0,u=c.length;u>l;l++)r=c[l],o=this.createButton(r),this.addSubView(o),this.buttons[r.key]=o}return l(e,t),e.prototype._itemClass=r,e.prototype.createButton=function(t){var e,i;return t||(t={}),t.itemClass||(t.itemClass=this._itemClass),i=n.extend({},t),delete i.itemClass,e=new t.itemClass(i)},e}(a)},{"../../core/kd":99,"../../core/view":105,"../forms/formview":32,"./buttonview":18,jquery:111}],16:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./buttonview"),o=t("../../core/view"),e.exports=n=function(t){function e(t,n){var i;null==t&&(t={}),i=t.cssClass,i=i?" "+i:"",t.cssClass="kdbuttongroup"+i,t.buttons||(t.buttons={}),e.__super__.constructor.call(this,t,n),this.buttons={},this.createButtons(t.buttons)}return r(e,t),e.prototype.createButtons=function(t){var e,n,o,r;r=[];for(o in t)s.call(t,o)&&(n=t[o],e=n.buttonClass||i,n.title||(n.title=o),n.style||(n.style=""),this.addSubView(this.buttons[o]=new e(n)),r.push(this.buttons[o].on("click",function(t){return function(e){return t.buttonReceivedClick(t.buttons[o],e)}}(this))));return r},e.prototype.buttonReceivedClick=function(t){var e,n,i;n=this.buttons;for(i in n)s.call(n,i)&&(e=n[i],e.unsetClass("toggle"));return t.setClass("toggle")},e}(o)},{"../../core/view":105,"./buttonview":18}],17:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),r=t("../../core/kd"),o=t("../contextmenu/contextmenutreeview"),s=t("../contextmenu/contextmenu"),e.exports=i=function(t){function e(t,n){null==t&&(t={}),t.cssClass=this.utils.curry("kdbuttonmenu",t.cssClass),t.listViewClass||(t.listViewClass=o),e.__super__.constructor.call(this,t,n)}return a(e,t),e.prototype.viewAppended=function(){return e.__super__.viewAppended.apply(this,arguments),this.setPartial("<div class='chevron-ghost-wrapper'><span class='chevron-ghost'></span></div>"),this.positionContextMenu()},e.prototype.positionContextMenu=r.utils.debounce(10,function(){var t,e,i,o,r,s,a,l,u;return t=this.getDelegate(),r=n(window).height(),s=n(window).scrollTop(),e=t.getHeight(),i=t.getWidth(),u=t.getY()+e,a=this.getHeight(),l=this.getWidth(),o=u+a>r+s?(u=t.getY()-a,this.setClass("top-menu"),{top:"100%",height:e}):{top:-(e+1),height:e},this.$(".chevron-ghost-wrapper").css(o),this.$().css({top:u+s,left:t.getX()+i-l})}),e}(s)},{"../../core/kd":99,"../contextmenu/contextmenu":21,"../contextmenu/contextmenutreeview":23,jquery:111}],18:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),s=t("../../core/view"),r=t("../loader/loaderview"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),t.callback||(t.callback=i.noop),t.title||(t.title=""),t.type||(t.type="button"),t.cssClass||(t.cssClass=t.style||(t.style="clean-gray")),null==t.icon&&(t.icon=!1),null==t.iconOnly&&(t.iconOnly=!1),t.iconClass||(t.iconClass=""),null==t.disabled&&(t.disabled=!1),t.hint||(t.hint=null),null==t.loader&&(t.loader=!1),e.__super__.constructor.call(this,t,n),this.setClass(t.style),this.setCallback(t.callback),this.setTitle(t.title),t.iconClass&&this.setIconClass(t.iconClass),(t.icon||t.iconOnly)&&this.showIcon(),t.iconOnly&&this.setIconOnly(t.iconOnly),t.disabled&&this.disable(),t.focus&&this.once("viewAppended",this.bound("setFocus")),t.loader&&this.once("viewAppended",this.bound("setLoader"))}return a(e,t),e.prototype.setFocus=function(){return this.$().trigger("focus")},e.prototype.setDomElement=function(t){var e,o,r,s,a,l,u,c;if(l=this.getOptions(),s=l.lazyDomId,c=l.tagName,s)for(e=document.getElementById(s),u=("kdview "+t).split(" "),o=0,a=u.length;a>o;o++)r=u[o],r.length&&e.classList.add(r);return null==e&&(s&&i.warn("No lazy DOM Element found with given id "+s+"."),e="<button type='"+this.getOptions().type+"' class='kdbutton "+t+"' id='"+this.getId()+"'>\n  <span class='icon hidden'></span>\n  <span class='button-title'>Title</span>\n</button>"),this.domElement=n(e)},e.prototype.setTitle=function(t){return this.buttonTitle=t,this.$(".button-title").html(t)},e.prototype.getTitle=function(){return this.buttonTitle},e.prototype.setCallback=function(t){return this.buttonCallback=t},e.prototype.getCallback=function(){return this.buttonCallback},e.prototype.showIcon=function(){return this.setClass("with-icon"),this.$("span.icon").removeClass("hidden")},e.prototype.hideIcon=function(){return this.unsetClass("with-icon"),this.$("span.icon").addClass("hidden")},e.prototype.setIconClass=function(t){return this.$(".icon").attr("class","icon"),this.$(".icon").addClass(t)},e.prototype.setIconOnly=function(){var t;return this.unsetClass("with-icon"),this.$().addClass("icon-only"),t=this.$("span.icon"),this.$().html(t)},e.prototype.setLoader=function(){var t,e,n,i,o,s,a,l;return this.setClass("w-loader"),t=this.getOptions().loader,e=this.getHeight()/2,this.loader=new r({size:{width:null!=(n=t.diameter)?n:e},loaderOptions:{color:t.color||"#ffffff",shape:t.shape||"spiral",diameter:null!=(i=t.diameter)?i:e,density:null!=(o=t.density)?o:30,range:null!=(s=t.range)?s:.4,speed:null!=(a=t.speed)?a:1.5,FPS:null!=(l=t.FPS)?l:24}}),this.addSubView(this.loader,null,!0),this.loader.$().css({position:"absolute",left:t.left||"50%",top:t.top||"50%",marginTop:-(t.diameter/2),marginLeft:-(t.diameter/2)}),this.loader.hide(),t.show?this.showLoader():void 0},e.prototype.showLoader=function(){var t,e,n;return this.loader?(n=this.getOptions(),t=n.icon,e=n.iconOnly,this.setClass("loading"),this.loader.show(),t&&!e?this.hideIcon():void 0):i.warn("KDButtonView::showLoader is called where no loader is set")},e.prototype.hideLoader=function(){var t,e,n;return this.loader?(n=this.getOptions(),t=n.icon,e=n.iconOnly,this.unsetClass("loading"),this.loader.hide(),t&&!e?this.showIcon():void 0):i.warn("KDButtonView::hideLoader is called where no loader is set")},e.prototype.disable=function(){return this.$().attr("disabled",!0)},e.prototype.enable=function(){return this.$().attr("disabled",!1)},e.prototype.focus=function(){return this.$().trigger("focus")},e.prototype.blur=function(){return this.$().trigger("blur")},e.prototype.click=function(t){var e;return(null!=(e=this.loader)?e.active:void 0)?this.utils.stopDOMEvent():(this.loader&&!this.loader.active&&this.showLoader(),"button"===this.getOption("type")&&this.utils.stopDOMEvent(),this.getCallback().call(this,t),!1)},e.prototype.triggerClick=function(){return this.doOnSubmit()},e}(s)},{"../../core/kd":99,"../../core/view":105,"../loader/loaderview":55,jquery:111}],19:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("./buttonmenu"),o=t("./buttonview"),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.setDomElement=function(t){return null==t&&(t=""),this.domElement=n("<div class='kdbuttonwithmenu-wrapper "+t+"'>\n  <button class='kdbutton "+t+" with-icon with-menu' id='"+this.getId()+"'>\n    <span class='icon hidden'></span>\n  </button>\n  <span class='chevron-separator'></span>\n  <span class='chevron'></span>\n</div>"),this.$button=this.$("button").first(),this.domElement
},e.prototype.setIconOnly=function(){var t;return this.$().addClass("icon-only").removeClass("with-icon"),t=this.$("span.icon,span.chevron"),this.$().html(t)},e.prototype.click=function(t){return n(t.target).is(".chevron")?(this.contextMenu(t),!1):this.getCallback().call(this,t)},e.prototype.contextMenu=function(t){return this.createContextMenu(t),!1},e.prototype.createContextMenu=function(t){var e,n,o,r,s;return s=this.getOptions(),this.buttonMenu=new(s.buttonMenuClass||i)({cssClass:s.style,ghost:this.$(".chevron").clone(),event:t,delegate:this,treeItemClass:s.treeItemClass,itemChildClass:s.itemChildClass,itemChildOptions:s.itemChildOptions},function(){var t,i,l;if("function"==typeof s.menu)return s.menu();if(Array.isArray(s.menu)){for(e={},l=s.menu,t=0,i=l.length;i>t;t++){n=l[t];for(o in n)a.call(n,o)&&(r=n[o],null!=o&&null!=r&&(e[o]=r))}return e}return s.menu}()),this.buttonMenu.on("ContextMenuItemReceivedClick",function(t){return function(){return t.buttonMenu.destroy()}}(this))},e.prototype.setTitle=function(t){return this.$button.append(t)},e.prototype.setButtonStyle=function(t){var e,n,i,o;for(o=this.constructor.styles,e=0,n=o.length;n>e;e++)i=o[e],this.$().removeClass(i),this.$button.removeClass(i);return this.$button.addClass(t),this.$().addClass(t)},e.prototype.setIconOnly=function(){var t;return this.$button.addClass("icon-only").removeClass("with-icon"),t=this.$("span.icon"),this.$button.html(t)},e.prototype.disable=function(){return this.$button.attr("disabled",!0)},e.prototype.enable=function(){return this.$button.attr("disabled",!1)},e}(o)},{"./buttonmenu":17,"./buttonview":18,jquery:111}],20:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),o=t("./buttonview"),e.exports=r=function(t){function e(t,i){null==t&&(t={}),t=n.extend({dataPath:null,defaultState:null,states:[]},t),e.__super__.constructor.call(this,t,i),this.setState(t.defaultState)}return s(e,t),e.prototype.getStateIndex=function(t){var e,n,i,o,r;if(r=this.getOptions().states,!t)return 0;for(n=e=0,i=r.length;i>e;n=++e)if(o=r[n],t===o.title)return n},e.prototype.decorateState=function(){return this.setTitle(this.state.title),null!=this.state.iconClass&&this.setIconClass(this.state.iconClass),null!=this.state.cssClass||null!=this.lastUsedCssClass?(null!=this.lastUsedCssClass&&this.unsetClass(this.lastUsedCssClass),this.setClass(this.state.cssClass),this.lastUsedCssClass=this.state.cssClass):delete this.lastUsedCssClass},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){var e,n;return n=this.getOptions().states,this.stateIndex=e=this.getStateIndex(t),this.state=n[e],this.decorateState(t),this.setCallback(n[e].callback.bind(this,this.toggleState.bind(this)))},e.prototype.toggleState=function(t){var e,n;return n=this.getOptions().states,e=n[this.stateIndex+1]||n[0],t?"AccessDenied"!==t.name&&i.warn(t.message||"There was an error, couldn't switch to "+e.title+" state!"):this.setState(e.title),"function"==typeof this.hideLoader?this.hideLoader():void 0},e}(o)},{"../../core/kd":99,"./buttonview":18,jquery:111}],21:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=t("../../core/kd"),s=t("../../core/view"),r=t("../../core/customhtmlview"),n=t("./contextmenutreeviewcontroller"),e.exports=o=function(t){function e(t,o){var r,s,a,l;null==t&&(t={}),t.cssClass=this.utils.curry("kdcontextmenu",t.cssClass),t.menuMaxWidth||(t.menuMaxWidth="auto"),t.menuMinWidth||(t.menuMinWidth="auto"),t.menuWidth||(t.menuWidth=172),t.offset||(t.offset={}),(r=t.offset).left||(r.left=0),(s=t.offset).top||(s.top=0),null==t.arrow&&(t.arrow=!1),null==t.sticky&&(t.sticky=!1),e.__super__.constructor.call(this,t,o),this.topMargin=0,this.leftMargin=0,a=this.getOptions(),this.sticky=a.sticky,i.getSingleton("windowController").addLayer(this),this.on("ReceivedClickElsewhere",function(t){return function(){return t.sticky?void 0:t.destroy()}}(this)),o&&(this.treeController=new n({type:a.type,view:a.view,delegate:this,treeItemClass:a.treeItemClass,listViewClass:a.listViewClass,itemChildClass:a.itemChildClass,itemChildOptions:a.itemChildOptions,addListsCollapsed:a.addListsCollapsed,putDepthInfo:a.putDepthInfo,lazyLoad:null!=(l=a.lazyLoad)?l:!1},o),this.addSubView(this.treeController.getView()),this.treeController.getView().on("ReceivedClickElsewhere",function(t){return function(){return t.sticky?void 0:t.destroy()}}(this)),this.treeController.on("NodeExpanded",this.bound("positionSubMenu"))),t.arrow&&this.on("viewAppended",this.bound("addArrow")),this.appendToDomBody()}return a(e,t),e.prototype.changeStickyState=function(t){return this.sticky=t},e.prototype.childAppended=function(){return e.__super__.childAppended.apply(this,arguments),this.positionContextMenu(),this.getOption("deferPositioning")?i.utils.defer(function(t){return function(){return t.positionContextMenu()}}(this)):this.positionContextMenu()},e.prototype.addArrow=function(){var t,e,n;return t=this.getOptions().arrow,t.placement||(t.placement="top"),null==t.margin&&(t.margin=0),t.margin+="top"===(e=t.placement)||"bottom"===e?this.leftMargin:this.topMargin,this.arrow=new r({tagName:"span",cssClass:"arrow "+t.placement}),this.arrow.$().css(function(){switch(t.placement){case"top":return n={},t.margin>0?n.left=t.margin:n.right=-t.margin,n;case"bottom":return n={},t.margin>0?n.left=t.margin:n.right=-t.margin,n;case"right":return n={},t.margin>0?n.top=t.margin:n.bottom=-t.margin,n;case"left":return n={},t.margin>0?n.top=t.margin:n.bottom=-t.margin,n;default:return{}}}()),this.addSubView(this.arrow)},e.prototype.positionContextMenu=i.utils.debounce(10,function(){var t,e,n,o,r,s,a,l,u,c,p,h,d,f;return h=this.getOptions(),t=h.event||{},s=i.getSingleton("mainView"),r=s.getHeight(),a=s.getWidth(),p=h.menuWidth,l=h.menuHeight,u=h.menuMaxWidth,c=h.menuMinWidth,null==l&&(l=this.getHeight()),null==p&&(p=this.getWidth()),f=(h.y||t.pageY||0)+h.offset.top,o=(h.x||t.pageX||0)+h.offset.left,n=f,e=o,f+l>r&&(f=r-l+h.offset.top),o+p>a&&(o=a-p+h.offset.left),this.topMargin=n-f,this.leftMargin=e-o,d={width:p+"px",top:f,left:o},u&&(d.maxWidth=u+"px"),c&&(d.minWidth=c+"px"),this.getDomElement().css(d)}),e.prototype.positionSubMenu=function(t){var e,n,i,o,r,s;return s=t.getData(),e=s.children,r=s.id,e&&(n=this.treeController.listControllers[r].getView(),i=n.getY()+n.getHeight(),i>window.innerHeight&&n.$().css("bottom",0),o=n.getX()+n.getWidth(),o>window.innerWidth)?(n.$().css("left",-n.getWidth()),n.setClass("left-aligned")):void 0},e}(s)},{"../../core/customhtmlview":96,"../../core/kd":99,"../../core/view":105,"./contextmenutreeviewcontroller":24}],22:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("../../core/kd"),r=t("../../core/view"),i=t("../tree/treeitemview"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),null==n&&(n={}),t.type="contextitem",t.cssClass||(t.cssClass="default "+o.utils.slugify(n.title)),null==n.title&&(n.title=""),e.__super__.constructor.call(this,t,n),this.unsetClass("jtreeitem"),n&&(("divider"===n.type||"separator"===n.type)&&this.setClass("separator"),n.cssClass&&this.setClass(n.cssClass),"customView"===n.type&&this.addCustomView(n),n.disabled&&this.setClass("disabled"))}return s(e,t),e.prototype.viewAppended=function(){return this.customView?void 0:e.__super__.viewAppended.call(this)},e.prototype.mouseDown=function(){return!0},e.prototype.addCustomView=function(t){return this.setClass("custom-view"),this.unsetClass("default"),this.customView=t.view||new r,delete t.view,this.addSubView(this.customView)},e}(i)},{"../../core/kd":99,"../../core/view":105,"../tree/treeitemview":85}],23:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../tree/treeview"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),null==n&&(n={}),t.type||(t.type="contextmenu"),null==t.animated&&(t.animated=!1),t.cssClass||(t.cssClass="default"),e.__super__.constructor.call(this,t,n),this.unsetClass("jtreeview")}return o(e,t),e}(i)},{"../tree/treeview":86}],24:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;s=t("../../core/kd"),a=t("../../core/view"),r=t("../tree/treeviewcontroller"),n=t("./contextmenuitem"),i=t("./contextmenutreeview"),e.exports=o=function(t){function e(t,o){var r;null==t&&(t={}),r=t,r.view||(r.view=new a({cssClass:"context-list-wrapper"})),r.type||(r.type="contextmenu"),r.treeItemClass||(r.treeItemClass=n),r.listViewClass||(r.listViewClass=i),null==r.addListsCollapsed&&(r.addListsCollapsed=!0),null==r.putDepthInfo&&(r.putDepthInfo=!0),e.__super__.constructor.call(this,r,o),this.expandedNodes=[]}var o,r,c;return l(e,t),c=0,r=function(){return++c},o=e.convertToArray=function(t,e){var n,i,s,a,l,c,p;null==e&&(e=null),c=[];for(p in t)u.call(t,p)&&(l=t[p],s=null,0!==p.indexOf("customView")?l.children?(s=r(),l.title=p,l.id=s,l.parentId=e,c.push(l),n=o(l.children,s),c=c.concat(n),l.separator&&(i={type:"separator",parentId:e},c.push(i))):(l.title=p,l.parentId=e,c.push(l),l.separator&&(i={type:"separator",parentId:e},c.push(i))):(a={type:"customView",parentId:e,view:l},c.push(a)));return c},e.prototype.loadView=function(){return e.__super__.loadView.apply(this,arguments),this.getOptions().lazyLoad?void 0:this.selectFirstNode()},e.prototype.initTree=function(t){return t.length||this.setData(t=o(t)),e.__super__.initTree.call(this,t)},e.prototype.repairIds=function(t){return"divider"===t.type&&(t.type="separator"),e.__super__.repairIds.apply(this,arguments)},e.prototype.expand=function(t){return e.__super__.expand.apply(this,arguments),this.emit("NodeExpanded",t),t.expanded?this.expandedNodes.push(t):void 0},e.prototype.organizeSelectedNodes=function(t,n,i){var o,r;return null==i&&(i={}),r=n[0],this.expandedNodes.length&&(o=r.getData().depth,this.expandedNodes.forEach(function(t){return function(e){var n;return n=e.getData().depth,n>=o?t.collapse(e):void 0}}(this))),e.__super__.organizeSelectedNodes.apply(this,arguments)},e.prototype.dblClick=function(){},e.prototype.mouseEnter=function(t,e){var n;return this.mouseEnterTimeOut&&clearTimeout(this.mouseEnterTimeOut),n=t.getData(),"separator"!==n.type?(this.selectNode(t,e),this.mouseEnterTimeOut=setTimeout(function(e){return function(){return e.expand(t)}}(this),150)):void 0},e.prototype.click=function(t,e){var n,i;return i=t.getData(),"separator"===i.type||i.disabled?void 0:(this.toggle(t),n=this.getDelegate(),i.callback&&"function"==typeof i.callback&&i.callback.call(n,t,e),n.emit("ContextMenuItemReceivedClick",t,e),e.stopPropagation(),!1)},e.prototype.performDownKey=function(t,n){var i,o;return i=e.__super__.performDownKey.call(this,t,n),i&&(o=i.getData(),"separator"===o.type)?this.performDownKey(i,n):void 0},e.prototype.performUpKey=function(t,n){var i,o;return i=e.__super__.performUpKey.call(this,t,n),i&&(o=i.getData(),"separator"===o.type&&this.performUpKey(i,n)),i},e.prototype.performRightKey=function(t,n){return e.__super__.performRightKey.apply(this,arguments),this.performDownKey(t,n)},e.prototype.performLeftKey=function(t,n){var i;return i=e.__super__.performLeftKey.call(this,t,n),i&&this.collapse(i),i},e.prototype.performEscapeKey=function(){return s.getSingleton("windowController").revertKeyView(),this.getDelegate().destroy()},e.prototype.performEnterKey=function(t,e){var n;return s.getSingleton("windowController").revertKeyView(),n=this.getDelegate(),n.emit("ContextMenuItemReceivedClick",t),n.destroy(),e.stopPropagation(),e.preventDefault(),!1},e}(r)},{"../../core/kd":99,"../../core/view":105,"../tree/treeviewcontroller":87,"./contextmenuitem":22,"./contextmenutreeview":23}],25:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/customhtmlview"),e.exports=i=function(t){function e(t,n){null==t&&(t={}),null==n&&(n={}),t.tagName="ul",null==t.initialValue&&(t.initialValue=0),e.__super__.constructor.call(this,t,n),this.currentValue=t.initialValue,this.createDigit()}return r(e,t),e.prototype.createDigit=function(){return this.addSubView(this.digit=new o({tagName:"li",cssClass:"real",partial:'<span class="top">'+this.getOption("initialValue")+'</span>\n<span class="bottom">'+this.getOption("initialValue")+"</span>"})),this.addSubView(this.fakeDigit=new o({tagName:"li",cssClass:"fake",partial:'<span class="top">'+this.getOption("initialValue")+'</span>\n<span class="bottom">'+this.getOption("initialValue")+"</span>"})),this.setValue(this.getOption("initialValue"))},e.prototype.setValue=function(t){return t!==this.currentValue?(this.currentValue=t,this.digit.updatePartial('<span class="top">'+t+'</span>\n<span class="bottom">'+t+"</span>"),this.setClass("animate"),n.utils.wait(500,function(e){return function(){return e.fakeDigit.updatePartial('<span class="top">'+t+'</span>\n<span class="bottom">'+t+"</span>"),e.unsetClass("animate")}}(this))):void 0},e}(o)},{"../../core/customhtmlview":96,"../../core/kd":99}],26:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("../../core/kd"),r=t("../../core/view"),i=t("./counterdigitview"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),null==i&&(i={}),null==t.style&&(t.style="dark"),null==t.from&&(t.from=5e3),null==t.to&&(t.to=1e4),null==t.interval&&(t.interval=1e3),null==t.step&&(t.step=1),null==t.autoStart&&(t.autoStart=!0),t.direction=t.from<t.to?"up":"down",null==t.digits&&(t.digits="up"===t.direction?t.to.toString().length:t.from.toString().length),t.cssClass=n.utils.curry(t.style+" "+t.direction+" kd-counter",t.cssClass),e.__super__.constructor.call(this,t,i),this.digitsList=[],this.currentValue=t.from,this.createCounter(),t.autoStart&&this.start()}return s(e,t),e.prototype.createCounter=function(){var t,e,n,o,r,s,a;for(r=this.getOptions(),e=r.from,t=r.digits,a=[],n=o=0,s=t;s>=0?s>o:o>s;n=s>=0?++o:--o)a.push(this.digitsList.push(this.addSubView(new i({initialValue:e.toString()[n]}))));return a},e.prototype.setValue=function(t){var e,n,i,o;if(t!==this.currentValue){for(this.currentValue=t,t=t.toString(),o=[],e=n=0,i=t.length;i>=0?i>n:n>i;e=i>=0?++n:--n)o.push(this.digitsList[e].setValue(t[e]));return o}},e.prototype.start=function(){var t;return t=this.getOption("interval"),this.counterInterval=n.utils.repeat(t,function(t){return function(){var e;return e="up"===t.getOption("direction")?t.currentValue+t.getOption("step"):t.currentValue-t.getOption("step"),t.setValue(e),t.currentValue=e}}(this))},e}(r)},{"../../core/kd":99,"../../core/view":105,"./counterdigitview":25}],27:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("../../core/kd"),o=t("./diaobject"),r=t("../../core/view"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kddia-container",t.cssClass),t.draggable&&"object"!=typeof t.draggable&&(t.draggable={}),null==t.itemClass&&(t.itemClass=o),e.__super__.constructor.call(this,t,i),this.scale=1,this.dias={}}return s(e,t),e.prototype.mouseDown=function(){var t,n;return e.__super__.mouseDown.apply(this,arguments),this.emit("HighlightDia",function(){var e,i;e=this.dias,i=[];for(n in e)t=e[n],i.push(t);return i}.call(this))},e.prototype.addDia=function(t,e){return null==e&&(e={}),this.addSubView(t),t.on("DiaObjectClicked",function(e){return function(){return e.emit("HighlightDia",t)}}(this)),t.on("RemoveMyConnections",function(e){return function(){return delete e.dias[t.getId()]}}(this)),this.dias[t.getId()]=t,this.emit("NewDiaObjectAdded",this,t),null!=e.x&&t.setX(e.x),null!=e.y&&t.setY(e.y),t},e.prototype.addItem=function(t,e){var n;return null==e&&(e={}),n=this.getOption("itemClass"),this.addDia(new n(e,t))},e.prototype.removeAllItems=function(){var t,e,n,i;n=this.dias,i=[];for(t in n)e=n[t],i.push("function"==typeof e.destroy?e.destroy():void 0);return i},e.prototype.setScale=function(t){var e,n,i,o,r;if(null==t&&(t=1),t!==this.scale){for(r=["webkitTransform","MozTransform","transform"],e={},n=0,i=r.length;i>n;n++)o=r[n],e[o]="scale("+t+")";return this.setStyle(e),this.scale=t}},e}(r)},{"../../core/kd":99,"../../core/view":105,"./diaobject":29}],28:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,o){var r;null==t&&(t={}),t.type||(t.type="left"),r=t.type,a.call(i,r)<0&&(n.warn("Unknown joint type '"+t.type+"', falling back to 'left'"),t.type="left"),null==t["static"]&&(t["static"]=!1),null==t.size&&(t.size=10),t.cssClass=n.utils.curry("kddia-joint "+t.type,t.cssClass),e.__super__.constructor.call(this,t,o),this.connections={},this.type=this.getOption("type"),this.size=this.getOption("size")}var i;return r(e,t),i=["left","right","top","bottom"],e.prototype.viewAppended=function(){return e.__super__.viewAppended.apply(this,arguments),this.domElement.attr("dia-id",this.getDiaId())},e.prototype.getDiaId=function(){return"dia-"+this.parent.getId()+"-joint-"+this.type},e.prototype.getPos=function(){return this.parent.getJointPos(this)},e.prototype.click=function(t){return this.inDeleteMode()&&this.emit("DeleteRequested",this.parent,this.type),this.utils.stopDOMEvent(t)},e.prototype.mouseDown=function(t){return this.inDeleteMode()?void 0:(this.utils.stopDOMEvent(t),this.parent.emit("JointRequestsLine",this),!1)},e.prototype.inDeleteMode=function(){return this.hasClass("deleteMode")},e.prototype.showDeleteButton=function(){return this.isStatic()?void 0:this.setClass("deleteMode")},e.prototype.hideDeleteButton=function(){return this.unsetClass("deleteMode")},e.prototype.isStatic=function(){return this.getOption("static")},e}(o)},{"../../core/kd":99,"../../core/view":105}],29:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("../../core/kd"),i=t("./diajoint"),r=t("../../core/view"),e.exports=o=function(t){function e(t,o){var r,s,a;t.cssClass=n.utils.curry("kddia-object",t.cssClass),null==t.draggable&&("object"!=typeof t.draggable&&(t.draggable={}),(r=t.draggable).containment||(r.containment={}),(s=t.draggable.containment).view||(s.view="parent"),null==(a=t.draggable.containment).padding&&(a.padding={top:1,right:1,bottom:1,left:1})),t.bind=n.utils.curry("mouseleave",t.bind),null==t.joints&&(t.joints=["left","right"]),null==t.jointItemClass&&(t.jointItemClass=i),t.allowedConnections||(t.allowedConnections={}),t.staticJoints||(t.staticJoints=[]),e.__super__.constructor.call(this,t,o),this.joints={},this.allowedConnections=this.getOption("allowedConnections"),this.domElement.attr("dia-id","dia-"+this.getId()),this.wc=n.getSingleton("windowController"),this.on("KDObjectWillBeDestroyed",function(t){return function(){return t.emit("RemoveMyConnections")}}(this)),this.once("viewAppended",function(t){return function(){var e,n,i,o;for(o=t.getOption("joints"),e=0,i=o.length;i>e;e++)n=o[e],t.addJoint(n);return t.parent.on("UnhighlightDias",function(){var e,i,o;t.unsetClass("highlight"),i=t.joints,o=[];for(e in i)n=i[e],o.push(n.hideDeleteButton());return o})}}(this))}return s(e,t),e.prototype.mouseDown=function(t){return this.emit("DiaObjectClicked"),this._mouseDown=!0,this.wc.once("ReceivedMouseUpElsewhere",function(t){return function(){return t._mouseDown=!1}}(this)),this.getOption("draggable")?void 0:this.utils.stopDOMEvent(t)},e.prototype.mouseLeave=function(t){var e,n;if(this._mouseDown)return e=this.getBounds(),n=null,e.w=e.w*this.parent.scale,e.h=e.h*this.parent.scale,t.pageX>=e.x+e.w&&(n=this.joints.right),t.pageX<=e.x&&(n=this.joints.left),t.pageY>=e.y+e.h&&(n=this.joints.bottom),t.pageY<=e.y&&(n=this.joints.top),n?this.emit("JointRequestsLine",n):void 0},e.prototype.addJoint=function(t){var e,i,o,r,s;return null!=this.joints[t]&&(n.warn("KDDiaObject: Tried to add same joint! Destroying old one. "),"function"==typeof(e=this.joints[t]).destroy&&e.destroy()),r=this.getOptions(),o=r.jointItemClass,s=r.staticJoints,this.addSubView(i=new o({type:t,"static":l.call(s,t)>=0})),this.joints[t]=i},e.prototype.getJointPos=function(t){var e,n,i,o,r,s,a,l,u,c,p,h,d,f;return"string"==typeof t&&(t=this.joints[t]),t?(a=[this.parent.getElement(),this.getElement(),t.getElement()],s=a[0],h=a[1],i=a[2],l=[s.offsetLeft+h.offsetLeft,s.offsetTop+h.offsetTop],d=l[0],f=l[1],u=[i.offsetLeft,i.offsetTop],o=u[0],r=u[1],p="left"===(c=t.type)||"right"===c?[10,4]:[4,10],e=p[0],n=p[1],{x:d+o+e,y:f+r+n}):{x:0,y:0}},e.prototype.getDiaId=function(){return this.domElement.attr("dia-id")},e}(r)},{"../../core/kd":99,"../../core/view":105,"./diajoint":28}],30:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),i=t("../../core/kd"),s=t("../../core/view"),o=t("../../core/customhtmlview"),a=t("lodash.throttle"),e.exports=r=function(t){function e(t){null==t&&(t={}),t.cssClass=i.utils.curry("kddia-scene",t.cssClass),t.bind=i.utils.curry("mousemove",t.bind),t.lineCap||(t.lineCap="round"),null==t.lineWidth&&(t.lineWidth=2),t.lineColor||(t.lineColor="#ccc"),t.lineColorActive||(t.lineColorActive="orange"),null==t.lineDashes&&(t.lineDashes=[]),t.fakeLineColor||(t.fakeLineColor="green"),null==t.fakeLineDashes&&(t.fakeLineDashes=[]),null==t.curveDistance&&(t.curveDistance=50),e.__super__.constructor.apply(this,arguments),this.containers=[],this.connections=[],this.activeDias=[],this.activeJoints=[],this.fakeConnections=[]}return l(e,t),e.prototype.diaAdded=function(t,e){return e.on("JointRequestsLine",this.bound("handleLineRequest")),e.on("DragInAction",function(t){return function(){return t.highlightLines(e)}}(this)),e.on("RemoveMyConnections",function(t){return function(){return t.disconnectAllConnections(e)}}(this))},e.prototype.addContainer=function(t,e){var n,i,o,r,s;return null==e&&(e={}),this.addSubView(t),t.on("NewDiaObjectAdded",this.bound("diaAdded")),t.on("DragInAction",this.bound("updateScene")),t.on("UpdateScene",this.bound("updateScene")),t.on("HighlightDia",this.bound("highlightLines")),this.containers.push(t),n=null!=(i=t.getOption("draggable"))&&null!=(o=i.containment)?o.padding:void 0,n&&(e.x=Math.max(n,null!=(r=e.x)?r:0),e.y=Math.max(n,null!=(s=e.y)?s:0)),null!=e.x&&t.setX(e.x),null!=e.y&&t.setY(e.y),this.createCanvas()},e.prototype.drawFakeLine=function(t){var e,n,i,o,r;return null==t&&(t={}),o=t.sx,r=t.sy,e=t.ex,n=t.ey,this.cleanup(this.fakeCanvas),this.fakeContext.beginPath(),this.fakeContext.moveTo(o,r),this.fakeContext.lineTo(e,n),this.fakeContext.lineCap=this.getOption("lineCap"),this.fakeContext.lineWidth=this.getOption("lineWidth"),this.fakeContext.strokeStyle=this._trackJoint.parent.getOption("colorTag")||this.getOption("fakeLineColor"),i=this.getOption("fakeLineDashes"),i.length>0&&this.fakeContext.setLineDash(i),this.fakeContext.stroke()},e.prototype.click=function(t){return t.target===t.currentTarget?this.highlightLines():void 0},e.prototype.mouseMove=function(t){var e,n,i,o,r;if(this._trackJoint)return i=this._trackJoint.getPos(),o=i.x,r=i.y,e=o+(t.clientX-this._trackJoint.getX()),n=r+(t.clientY-this._trackJoint.getY()),this.drawFakeLine({sx:o,sy:r,ex:e,ey:n})},e.prototype.mouseUp=function(t){var e,i,o,r;if(this._trackJoint&&(r=n(t.target).closest(".kddia-object").attr("dia-id"),i=this._trackJoint.getDiaId(),delete this._trackJoint,this.cleanup(this.fakeCanvas),r))return e=this.getDia(i),o=this.getDia(r),o.joint||(o.joint=this.guessJoint(o,e)),o.joint?this.connect(e,o):void 0},e.prototype.guessJoint=function(t,e){return"right"===e.joint&&null!=t.dia.joints.left?"left":"left"===e.joint&&null!=t.dia.joints.right?"right":void 0},e.prototype.getDia=function(t){var e,n,i,o,r,s,a,l,u;if(a=t.match(/dia\-((.*)\-joint\-(.*)|(.*))/).filter(function(t){return!!t}),!a)return null;for(l=a.slice(-2),s=l[0],o=l[1],s===o&&(o=null),u=this.containers,i=0,r=u.length;r>i&&(e=u[i],!(n=e.dias[s]));i++);return{dia:n,joint:o,container:e}},e.prototype.highlightLines=function(t,e){var n,i,o,r,s,a,l,u,p,h,d,f,m,g,v;for(null==t&&(t=[]),null==e&&(e=!0),Array.isArray(t)||(t=[t]),this.activeDias=t,h=this.activeJoints,o=0,l=h.length;l>o;o++)r=h[o],r.off("DeleteRequested");for(d=this.containers,s=0,u=d.length;u>s;s++)i=d[s],i.emit("UnhighlightDias");if(this.activeJoints=[],e&&this.updateScene(),1===this.activeDias.length){for(t=t.first,f=this.connections,m=[],a=0,p=f.length;p>a;a++)n=f[a],g=n.source,v=n.target,m.push(g.dia===t||v.dia===t?[g,v].forEach(function(e){return function(n){return n.dia.setClass("highlight"),n.dia!==t&&(r=n.dia.joints[n.joint],c.call(e.activeJoints,r)<0)?(r.showDeleteButton(),r.on("DeleteRequested",e.bound("disconnect")),e.activeJoints.push(r)):void 0}}(this)):void 0);return m}},e.prototype.handleLineRequest=function(t){return this._trackJoint=t},e.prototype.findTargetConnection=function(t,e){var n,i,o,r,s,a;for(o=function(){return function(n){return t===n.dia&&e===n.joint}}(this),n=this.activeDias.first,a=this.connections,r=0,s=a.length;s>r;r++)if(i=a[r],(o(i.source)||o(i.target))&&(i.source.dia===n||i.target.dia===n))return i},e.prototype.disconnect=function(t,e){var n,i;if(1===this.activeDias.length)return i=this.findTargetConnection(t,e),this.connections=function(){var t,e,o,r;for(o=this.connections,r=[],t=0,e=o.length;e>t;t++)n=o[t],n!==i&&r.push(n);return r}.call(this),this.highlightLines(this.activeDias)},e.prototype.disconnectAllConnections=function(t){var e,n,i,o,r,s,a,l;for(o=[],r=this.connections,n=0,i=r.length;i>n;n++)e=r[n],a=e.source,l=e.target,(s=t.getDiaId())!==a.dia.getDiaId()&&s!==l.dia.getDiaId()&&o.push(e);return this.connections=o,this.highlightLines()},e.prototype.allowedToConnect=function(t,e){var n,i,o,r,s,a,l,u;if(!t||!e)return!1;if((null!=(r=t.dia)?r.id:void 0)===(null!=(s=e.dia)?s.id:void 0))return!1;for(i=o=0;1>=o;i=++o){if(null!=t.dia.allowedConnections&&Object.keys(t.dia.allowedConnections).length>0){if(n=t.dia.allowedConnections,u=n[e.dia.constructor.name],!u)return!1;if(a=t.joint,c.call(u,a)>=0)return!1}l=[e,t],t=l[0],e=l[1]}return!0},e.prototype.connect=function(t,e,n){return null==n&&(n=!0),this.allowedToConnect(t,e)?(this.emit("ConnectionCreated",t,e),this.connections.push({source:t,target:e}),this.highlightLines(e.dia,n)):void 0},e.prototype.resetScene=function(){return this.fakeConnections=[],this.updateScene()},e.prototype.updateScene=function(){var t,e,n,i,o,r,s,a;for(this.cleanup(this.realCanvas),r=this.connections,e=0,i=r.length;i>e;e++)t=r[e],this.drawConnectionLine(t);for(s=this.fakeConnections,a=[],n=0,o=s.length;o>n;n++)t=s[n],a.push(this.drawConnectionLine(t));return a},e.prototype.drawConnectionLine=function(t){var e,n,i,o,r,s,a,l,u,p,h,d,f,m,g,v,y,w,b,C,_;return g=t.source,b=t.target,s=t.options,g||b?(s||(s={}),e=this.getOption("lineColorActive"),r=this.getOption("lineDashes"),o=this.getOption("lineColor"),this.realContext.beginPath(),a=g.dia,n=c.call(this.activeDias,a)>=0?g:(l=b.dia,c.call(this.activeDias,l)>=0?b:void 0),n&&(o=s.lineColor||n.dia.getOption("colorTag")||e,r=s.lineDashes||n.dia.getOption("lineDashes")||r),m=g.dia.getJointPos(g.joint),w=b.dia.getJointPos(b.joint),this.realContext.strokeStyle=o,r.length>0&&this.realContext.setLineDash(r),this.realContext.moveTo(m.x,m.y),i=this.getOption("curveDistance"),u=[0,0,0,0],v=u[0],y=u[1],C=u[2],_=u[3],"top"===(p=g.joint)||"bottom"===p?y="top"===g.joint?-i:i:("left"===(h=g.joint)||"right"===h)&&(v="left"===g.joint?-i:i),"top"===(d=b.joint)||"bottom"===d?_="top"===b.joint?-i:i:("left"===(f=b.joint)||"right"===f)&&(C="left"===b.joint?-i:i),this.realContext.bezierCurveTo(m.x+v,m.y+y,w.x+C,w.y+_,w.x,w.y),this.realContext.lineWidth=this.getOption("lineWidth"),this.realContext.stroke()):void 0},e.prototype.addFakeConnection=function(t){return this.drawConnectionLine(t),this.fakeConnections.push(t)},e.prototype.createCanvas=function(){var t,e;return null!=(t=this.realCanvas)&&t.destroy(),null!=(e=this.fakeCanvas)&&e.destroy(),this.addSubView(this.realCanvas=new o({tagName:"canvas",attributes:this.getSceneSize()})),this.realContext=this.realCanvas.getElement().getContext("2d"),null==this.realContext.setLineDash&&(this.realContext.setLineDash=i.noop),this.addSubView(this.fakeCanvas=new o({tagName:"canvas",cssClass:"fakeCanvas",attributes:this.getSceneSize()})),this.fakeContext=this.fakeCanvas.getElement().getContext("2d")},e.prototype.setScale=function(t){var e,n,i,o;for(null==t&&(t=1),o=this.containers,n=0,i=o.length;i>n;n++)e=o[n],e.setScale(t);return this.updateScene()},e.prototype.cleanup=function(t){return t.setAttributes(this.getSceneSize())},e.prototype.parentDidResize=function(){return e.__super__.parentDidResize.apply(this,arguments),a(function(t){return function(){return t.updateScene()}}(this))()},e.prototype.getSceneSize=function(){return{width:this.getWidth(),height:this.getHeight()}},e.prototype.dumpScene=function(){return i.log(this.containers,this.connections)},e.prototype.reset=function(t){return null==t&&(t=!0),this.connections=[],this.fakeConnections=[],t?this.updateScene():void 0},e}(s)},{"../../core/customhtmlview":96,"../../core/kd":99,"../../core/view":105,jquery:111,"lodash.throttle":119}],31:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),s=t("../../core/view"),r=t("../overlay/overlayview"),i=t("../buttons/buttonview"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kddialogview",t.cssClass),null==t.offset&&(t.offset=!0),t.container||(t.container=null),t.buttons||(t.buttons={Cancel:{style:"clean-red",callback:this.bound("hide")}}),e.__super__.constructor.call(this,t,i),this.bindTransitionEnd(),this.setButtons()}return a(e,t),e.prototype.show=function(){return n.utils.defer(function(t){return function(){var e,n;return null!=(n=t.overlay)&&n.destroy(),e=t.getOptions().container,t.overlay=new r({click:t.bound("hide"),container:e}),t.setClass("in")}}(this))},e.prototype.hide=function(){return this.once("transitionend",function(t){return function(){return t.overlay.destroy(),t.destroy()}}(this)),this.unsetClass("in")},e.prototype.setButtons=function(){var t,e,n,i;n=this.getOptions().buttons,this.buttons={},this.buttonHolder=new s({cssClass:"kddialog-buttons clearfix"}),this.addSubView(this.buttonHolder),i=[];for(e in n)l.call(n,e)&&(t=n[e],i.push(this.createButton(e,t)));
return i},e.prototype.createButton=function(t,e){var n;return this.buttonHolder.addSubView(n=new i({title:t,loader:e.loader,style:e.style,callback:e.callback})),this.buttons[t]=n},e}(s)},{"../../core/kd":99,"../../core/view":105,"../buttons/buttonview":18,"../overlay/overlayview":61}],32:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].slice;n=t("jquery"),o=t("../../core/kd"),s=t("../inputs/inputview"),i=t("jspath"),a=t("../../core/view"),e.exports=r=function(t){function e(t,n){null==t&&(t={}),t.tagName="form",t.cssClass=o.utils.curry("kdformview",t.cssClass),t.callback||(t.callback=o.noop),t.customData||(t.customData={}),t.bind||(t.bind="submit"),e.__super__.constructor.call(this,t,n),this.unsetClass("kdview"),this.valid=null,this.setCallback(t.callback),this.customData={}}return l(e,t),e.findChildInputs=function(t){var n,i;return n=[],i=t.getSubViews(),i.length>0&&i.forEach(function(t){return t instanceof s&&n.push(t),n=n.concat(e.findChildInputs(t))}),n},e.sanitizeFormOptions=function(t){var e,n,i;i=[];for(e in t)n=t[e],null==n.title&&(n.title=e),n.key=e,i.push(n);return i},e.prototype.childAppended=function(t){return"function"==typeof t.associateForm&&t.associateForm(this),t instanceof s&&this.emit("inputWasAdded",t),e.__super__.childAppended.apply(this,arguments)},e.prototype.getCustomData=function(t){return t?i.getAt(this.customData,t):this.customData},e.prototype.addCustomData=function(t,e){var n,o;if("string"==typeof t)return i.setAt(this.customData,t,e);o=[];for(n in t)u.call(t,n)&&(e=t[n],o.push(i.setAt(this.customData,n,e)));return o},e.prototype.removeCustomData=function(t){var e,n,o,r;return"string"==typeof t&&(t=t.split(".")),r=2<=t.length?c.call(t,0,e=t.length-1):(e=0,[]),o=t[e++],n=!isNaN(+o),n?i.spliceAt(this.customData,r,o):i.deleteAt(this.customData,t)},e.prototype.serializeFormData=function(t){var e,n,i,o;for(null==t&&(t={}),o=this.getDomElement().serializeArray(),e=0,i=o.length;i>e;e++)n=o[e],t[n.name]=n.value;return t},e.prototype.getData=function(){var t;return t=n.extend({},this.getCustomData()),this.serializeFormData(t),t},e.prototype.getFormData=function(){var t,n;return n=e.findChildInputs(this),t=this.getCustomData()||{},n.forEach(function(e){return e.getName()?t[e.getName()]=e.getValue():void 0}),t},e.prototype.focusFirstElement=function(){return e.findChildInputs(this)[0].$().trigger("focus")},e.prototype.setCallback=function(t){return this.formCallback=t},e.prototype.getCallback=function(){return this.formCallback},e.prototype.reset=function(){return this.getElement().reset()},e.prototype.submit=function(t){var n,i,r,s,a,l;return o.utils.stopDOMEvent(t),n=this,r=e.findChildInputs(n),l=0,s=[],a=[],i=this.getCustomData()||{},this.once("FormValidationFinished",function(e){var o;return null==e&&(e=!0),n.valid=e,e?(null!=(o=n.getCallback())&&o.call(n,i,t),n.emit("FormValidationPassed")):n.emit("FormValidationFailed")}),r.forEach(function(t){var e,n,o;return e=t.getOptions(),e.validate||e.required?s.push(t):(n=t.getName(),o=t.getValue(),n?i[n]=o:void 0)}),s.forEach(function(e){return function(){return e.once("ValidationResult",function(t){var o,r,u,c;if(l++,t&&a.push(e),s.length===l){if(a.length===s.length)for(o=0,u=a.length;u>o;o++)r=a[o],i[r.getName()]=r.getValue();else c=!1;return n.emit("FormValidationFinished",c)}})}(),e.validate(null,t)}),0===s.length?n.emit("FormValidationFinished"):void 0},e}(a)},{"../../core/kd":99,"../../core/view":105,"../inputs/inputview":44,jquery:111,jspath:117}],33:[function(t,e){var n,i,o,r,s,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("../../core/kd"),a=t("../inputs/inputview"),u=t("../../core/view"),o=t("../../core/customhtmlview"),r=t("./formview"),i=t("../buttons/buttonbar"),l=t("../inputs/labelview"),e.exports=s=function(t){function e(){var t,n,i;e.__super__.constructor.apply(this,arguments),this.setClass("with-fields"),this.inputs={},this.fields={},i=this.getOptions(),n=i.fields,t=i.buttons,n&&this.createFields(r.sanitizeFormOptions(n)),t&&(this.createButtons(t),this.buttons=this.buttonField.buttons)}return c(e,t),e.prototype.createFields=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.addSubView(this.createField(e)));return o},e.prototype.createButtons=function(t){return this.addSubView(this.buttonField=new i({buttons:t}))},e.prototype.createField=function(t,e,i){var r,s,l,c,h,d,f,m,g,v;if(null==i&&(i=!1),c=t.itemClass,v=t.title,c||(c=a),t.cssClass||(t.cssClass=""),t.name||(t.name=v),e||(e=new u({cssClass:"formline "+n.utils.slugify(t.name)+" "+t.cssClass})),t.label&&e.addSubView(d=t.label=this.createLabel(t)),i?e.addSubView(s=this.createInput(c,t)):(e.addSubView(l=new o({cssClass:"input-wrapper"})),l.addSubView(s=this.createInput(c,t))),t.hint&&l.addSubView(r=new o({partial:t.hint,tagName:"cite",cssClass:"hint"})),this.fields[v]=e,t.nextElement){m=t.nextElement;for(h in m)f=m[h],f.title||(f.title=h),this.createField(f,l||e,!0)}if(t.nextElementFlat){g=t.nextElementFlat;for(h in g)p.call(g,h)&&(f=g[h],f.title||(f.title=h),this.createField(f,e))}return e},e.prototype.createLabel=function(t){return new l({title:t.label,cssClass:this.utils.slugify(t.label)})},e.prototype.createInput=function(t,e){var n,i;return n=e.data,n&&delete e.data,this.inputs[e.title]=i=new t(e,n),i},e}(r)},{"../../core/customhtmlview":96,"../../core/kd":99,"../../core/view":105,"../buttons/buttonbar":15,"../inputs/inputview":44,"../inputs/labelview":45,"./formview":32}],34:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../../core/view"),e.exports=n=function(t){function e(t,n){var i;t=null!=t?t:{},t.type=null!=(i=t.type)?i:"default",e.__super__.constructor.call(this,t,n),null!=t.title&&(this.lazy?this.updateTitle(t.title):this.setTitle(t.title))}return o(e,t),e.prototype.setTitle=function(t){return this.getDomElement().append("<span>"+t+"</span>")},e.prototype.updateTitle=function(t){return this.$().find("span").html(t)},e.prototype.setDomElement=function(t){var n;return null==t&&(t=""),n=this.getOptions().type,this.setOption("tagName",function(){switch(n){case"big":return"h1";case"medium":return"h2";case"small":return"h3";default:return"h4"}}()),e.__super__.setDomElement.call(this,this.utils.curry("kdheaderview",t))},e}(i)},{"../../core/view":105}],35:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),r=t("../../core/view"),o=t("../../core/customhtmlview"),i=t("../buttons/buttonview"),e.exports=s=function(t){function e(t,n){null==t&&(t={}),t.cssClass||(t.cssClass="kdwebcamview"),null==t.screenFlash&&(t.screenFlash=!0),null==t.hideControls&&(t.hideControls=!1),t.snapTitle||(t.snapTitle="Snap Photo"),t.resnapTitle||(t.resnapTitle="Resnap"),t.saveTitle||(t.saveTitle="Save"),null==t.countdown&&(t.countdown=3),e.__super__.constructor.call(this,t,n),this.attachEvents(),this.video=new o({tagName:"video",attributes:{autoplay:!0}}),this.picture=new o({tagName:"canvas"}),this.button=t.hideControls?new r({cssClass:"hidden"}):new i({title:t.snapTitle,cssClass:"snap-button hidden",callback:this.bound("countDown")}),this.retake=t.hideControls?new r({cssClass:"hidden"}):new i({title:t.resnapTitle,cssClass:"snap-button retake hidden",callback:function(t){return function(){return t.resetView()}}(this)}),this.save=t.hideControls?new r({cssClass:"hidden"}):new i({title:t.saveTitle,cssClass:"snap-button save hidden",callback:function(t){return function(){return t.resetView(),t.video.setClass("invisible"),t.button.hide(),t.emit("save")}}(this)})}return a(e,t),e.prototype.attachEvents=function(){var t;return t=this.getOptions().snapTitle,this.on("KDObjectWillBeDestroyed",function(t){return function(){return t.unsetVideoStream()}}(this)),this.on("viewAppended",function(t){return function(){return t.context=t.picture.getElement().getContext("2d"),t.getUserMedia()}}(this)),this.on("error",function(){return this.emit("forbidden")}),this.on("snap",function(t){return function(){return t.video.setClass("invisible")}}(this)),this.on("countDownEnd",function(e){return function(){return e.button.hide(),e.retake.show(),e.save.show(),e.takePicture(),e.button.setTitle(t)}}(this))},e.prototype.resetView=function(){return this.button.show(),this.retake.hide(),this.save.hide(),this.reset()},e.prototype.reset=function(){return this.video.unsetClass("invisible")},e.prototype.countDown=function(){var t,e,n,i;return e=this.getOptions().countdown,e>0?(n=function(t){return function(){return t.button.setTitle(e),e--}}(this),t=this.utils.repeat(1e3,n),n(),i=this.utils.wait(1e3*(e+1),function(e){return function(){return e.utils.killRepeat(t),e.utils.killWait(i),e.emit("countDownEnd")}}(this))):this.emit("countDownEnd")},e.prototype.autoResize=function(){var t,e;return e=this.video.getElement(),t={width:e.clientWidth,height:e.clientHeight},this.picture.setAttributes(t),this.setSize(t)},e.prototype.unsetVideoStream=function(){var t,n;return n=this.video.getElement(),n.pause(),e.setVideoStreamVendor(n,""),null!=(t=this.localMediaStream)?t.stop():void 0},e.prototype.setVideoStream=function(t){var n;return n=this.video.getElement(),e.setVideoStreamVendor(n,t),n.play(),n.addEventListener("playing",function(t){return function(){return t.show(),t.button.show(),t.autoResize(),t.emit("allowed")}}(this))},e.setVideoStreamVendor=function(t,e){return void 0!==t.mozSrcObject?t.mozSrcObject=e:t.src=e},e.getUserMediaVendor=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia},e.getURLVendor=function(){return window.URL||window.webkitURL||window.mozURL},e.prototype.getUserMedia=function(){var t;return t=function(t){return function(e){return t.emit("error",e)}}(this),navigator.getUserMedia=e.getUserMediaVendor(),window.URL=e.getURLVendor(),navigator.getUserMedia?navigator.getUserMedia({video:!0},function(t){return function(e){return t.localMediaStream=e,t.setVideoStream(window.URL&&window.URL.createObjectURL(e)||e)}}(this),t):t({notSupported:!0})},e.prototype.flash=function(){var t;return t=new r({cssClass:"kdwebcamview-flash"}),t.appendToDomBody(),n.utils.defer(function(){return t.setClass("flashed"),n.utils.wait(500,function(){return t.destroy()})})},e.prototype.takePicture=function(){var t,e,n;return n=this.video.getElement(),t=this.picture.getElement(),e=this.getOptions().screenFlash,e&&this.flash(),this.autoResize(),this.context.drawImage(n,0,0,n.clientWidth,n.clientHeight),this.emit("snap",t.toDataURL(),t)},e.prototype.viewAppended=function(){var t,n,i,o,r;for(e.__super__.viewAppended.call(this),i=[this.button,this.save,this.retake,this.video,this.picture],o=[],t=0,n=i.length;n>t;t++)r=i[t],o.push(this.addSubView(r));return o},e}(r)},{"../../core/customhtmlview":96,"../../core/kd":99,"../../core/view":105,"../buttons/buttonview":18}],36:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("./inputview"),e.exports=n=function(t){function e(t,n){var i;null==t&&(t={}),t.type||(t.type="checkbox"),null==t.attributes&&(t.attributes={}),null==(i=t.attributes).checked&&(i.checked=t.defaultValue||!1),e.__super__.constructor.call(this,t,n)}return o(e,t),e}(i)},{"./inputview":44}],37:[function(t,e){var n,i,o,r,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),o=t("../../core/kd"),s=t("./inputvalidator"),l=t("../../core/view"),a=t("../notifications/notificationview"),i=t("htmlencode"),e.exports=r=function(t){function e(t,n){var i;null==t&&(t={}),this.keyDown=u(this.keyDown,this),this.input=u(this.input,this),this.click=u(this.click,this),t.cssClass=o.utils.curry("kdcontenteditableview",t.cssClass),t.bind=o.utils.curry("click input paste drop focus blur",t.bind),t.type||(t.type="text"),null==t.multiline&&(t.multiline=!1),t.placeholder||(t.placeholder=""),null==t.tabNavigation&&(t.tabNavigation=!1),e.__super__.constructor.call(this,t,n),null!=(i=this.getDelegate())&&i.on("EditingModeToggled",function(t){return function(e){return t.setEditingMode(e)}}(this)),document.addEventListener("focus",function(t){return function(e){return e.target===t.editableElement?t.focus():void 0}}(this),!0),document.addEventListener("blur",function(t){return function(e){return e.target===t.editableElement?t.blur():void 0}}(this),!0),this.validationNotifications={}}return c(e,t),e.prototype.viewAppended=function(){return this.setEditingMode(!1),e.__super__.viewAppended.apply(this,arguments)},e.prototype.getEditableElement=function(){return this.editableElement||(this.getData()?this.editableElement=this.getElement().children[0]:(this.editableElement=document.createElement("div"),this.getDomElement().append(this.editableElement))),this.editableElement},e.prototype.getEditableDomElement=function(){return this.editableDomElement||(this.editableDomElement=n(this.getEditableElement())),this.editableDomElement},e.prototype.setEditingMode=function(t){return this.editingMode=t,this.getEditableElement().setAttribute("contenteditable",t),""===this.getValue()?this.editingMode&&this.getOptions().placeholder?this.setPlaceholder():this.unsetPlaceholder():void 0},e.prototype.getValue=function(t){var e,n,o,r,s;switch(o=this.getOptions(),r=o.type,n=o.placeholder,e=this.getEditableElement(),t&&(r=t),r){case"text":s=e.textContent;break;case"html":s=e.innerHTML}return s===i.htmlDecode(n)?"":s.trim()},e.prototype.setContent=function(t){var e,n;if(n=this.getOptions().type,e=this.getEditableElement(),t)switch(n){case"text":return e.textContent=t;case"html":return e.innerHTML=t}else if(this.editingMode&&""===t)return this.setPlaceholder()},e.prototype.focus=function(){var t,e;return 0===this.getValue().length&&this.unsetPlaceholder(),this.getEditableDomElement().trigger("focus"),e=o.getSingleton("windowController"),e.addLayer(this),this.setKeyView(),this.focused||this.once("ReceivedClickElsewhere",this.bound("blur")),this.focused=!0,"function"==typeof(t=this.getOptions()).focus?t.focus():void 0},e.prototype.blur=function(){var t;return this.focused=!1,t=o.getSingleton("windowController"),t.removeLayer(this),this.unsetKeyView(),0===this.getValue("text").length?this.setPlaceholder():"html"!==this.getOptions().type&&this.setContent(this.getValue()),this.emit("BlurHappened")},e.prototype.click=function(){return this.editingMode&&!this.focused?this.focus():void 0},e.prototype.input=function(t){return this.emit("ValueChanged",t)},e.prototype.keyDown=function(t){var e,n,i,r,s,a,l,u;switch(i=this.getOptions(),a=i.tabNavigation,n=i.multiline,l=i.validate,t.which){case 9:a&&o.utils.stopDOMEvent(t);break;case 13:o.utils.stopDOMEvent(t)}switch(t.which){case 9:if(!a)break;this.blur(),this.emit(t.shiftKey?"PreviousTabStop":"NextTabStop");break;case 13:this.getOptions().multiline?this.appendNewline():this.emit("EnterPressed")}return u=this.getValue(),e=(null!=(r=this.getOptions().validate)&&null!=(s=r.rules)?s.maxLength:void 0)||0,13===t.which||e>0&&u.length===e?t.preventDefault():0===u.length&&(this.unsetPlaceholder(),t.target!==this.getEditableElement())?this.focus():void 0},e.prototype.paste=function(t){var e;return t.preventDefault(),e=t.originalEvent.clipboardData.getData("text/plain"),document.execCommand("insertText",!1,e)},e.prototype.drop=function(t){var e,n,i,o,r,s,a,l;return t.preventDefault(),l=t.originalEvent.dataTransfer.getData("text/plain"),r=t.originalEvent,e=r.clientX,n=r.clientY,""===this.getValue()&&(a=0,this.unsetPlaceholder()),s=document.caretRangeFromPoint(e,n),i=s.commonAncestorContainer,a=s.startOffset,o=s.endOffset,this.utils.replaceRange(i,l,a)},e.prototype.setPlaceholder=function(){var t;return this.setClass("placeholder"),t=this.getOptions().placeholder,t?this.setContent(t):void 0},e.prototype.unsetPlaceholder=function(){var t,e,n,i;return this.unsetClass("placeholder"),t="",e=this.getOptions().defaultValue,i=this.getValue(),t=this.editingMode?i||"":i||e||"",n=this.getEditableDomElement(),n.text(""),n.append(document.createTextNode(t))},e.prototype.validate=function(t){var e,n,i,o,r,a,l;a=!0,o=(null!=(i=this.getOptions().validate)?i.rules:void 0)||{};for(n in o)if(p.call(o,n)&&(r=o[n],l=s["rule"+n.capitalize()],l&&(e=l(this,t)))){a=!1,this.notify(e,{title:e,type:"mini",cssClass:"error",duration:2500});break}return a},e.prototype.notify=function(t,e){var n;return this.validationNotifications[t]=n=new a(e),n.on("KDObjectWillBeDestroyed",function(e){return function(){return t=n.getOptions().title,delete e.validationNotifications[t]}}(this))},e.prototype.appendNewline=function(){var t,e,n,i,o,r,s;for(s=window.getSelection(),t=s.baseNode.length===s.focusOffset?1:0,o=s.getRangeAt(0),e=n=0,r=t;r>=0?r>=n:n>=r;e=r>=0?++n:--n)o.insertNode(i=document.createElement("br"));return this.utils.selectEnd(i)},e.prototype.viewAppended=function(){return e.__super__.viewAppended.apply(this,arguments),this.editingMode||0!==this.getValue().length?void 0:this.unsetPlaceholder()},e}(l)},{"../../core/kd":99,"../../core/view":105,"../notifications/notificationview":60,"./inputvalidator":43,htmlencode:115,jquery:111}],38:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("./inputview"),e.exports=n=function(t){function e(t,n){var i;null==t&&(t={}),null==t.delimiter&&(t.delimiter=","),null==t.usePadding&&(t.usePadding=!0),i=t.defaultValue,null!=(null!=i?i.join:void 0)&&(t.defaultValue=this.join(i,t)),e.__super__.constructor.call(this,t,n)}return o(e,t),e.prototype.change=function(){return this.setValue(this.getValue())},e.prototype.getPadding=function(t){return null==t&&(t=this.getOptions()),t.usePadding?" ":""},e.prototype.split=function(t,e){return null==e&&(e=this.getOptions()),this.utils.splitTrim(t,e.delimiter)},e.prototype.join=function(t,e){return null==e&&(e=this.getOptions()),t.join(""+e.delimiter+this.getPadding(e))},e.prototype.getValue=function(){return this.split(e.__super__.getValue.apply(this,arguments))},e.prototype.setValue=function(t){return e.__super__.setValue.call(this,null!=t.join?this.join(t):t)},e}(i)},{"./inputview":44}],39:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("../../core/kd"),i=t("../../core/customhtmlview"),r=t("./inputview"),e.exports=o=function(t){function e(t,i){var o;null==t&&(t={}),t.type||(t.type="textarea"),t.cssClass=n.utils.curry("hitenterview",t.cssClass),t.button||(t.button=null),null==t.showButton&&(t.showButton=!1),t.label||(t.label=null),t.placeholder||(t.placeholder=""),t.callback||(t.callback=null),t.togglerPartials||(t.togglerPartials=["quick update disabled","quick update enabled"]),e.__super__.constructor.call(this,t,i),this.button=null!=(o=this.getOptions().button)?o:null,this.enableEnterKey(),null!=t.label&&this.setToggler(),this.getOptions().showButton&&this.disableEnterKey(),this.on("ValidationPassed",function(t){return function(){var e;return e=t.getOptions().callback,null!=e?e.call(t,t.getValue()):void 0}}(this))}return s(e,t),e.prototype.enableEnterKey=function(){return this.setClass("active"),this.button&&this.hideButton(),null!=this.inputEnterToggler&&this.inputEnterToggler.$().html(this.getOptions().togglerPartials[1]),this.enterKeyEnabled=!0},e.prototype.disableEnterKey=function(){return this.unsetClass("active"),this.button&&this.showButton(),null!=this.inputEnterToggler&&this.inputEnterToggler.$().html(this.getOptions().togglerPartials[0]),this.enterKeyEnabled=!1},e.prototype.setToggler=function(){var t;return t=this.getOptions(),this.inputEnterToggler=new i({tagName:"a",cssClass:"hitenterview-toggle",partial:t.showButton?t.togglerPartials[0]:t.togglerPartials[1],click:this.bound("toggleEnterKey")}),this.inputLabel.addSubView(this.inputEnterToggler)},e.prototype.hideButton=function(){return this.button.hide()},e.prototype.showButton=function(){return this.button.show()},e.prototype.toggleEnterKey=function(){return this.enterKeyEnabled?this.disableEnterKey():this.enableEnterKey()},e.prototype.keyDown=function(t){return 13===t.which&&(t.altKey||t.shiftKey)!==!0&&this.enterKeyEnabled?(t.preventDefault(),this.emit("EnterPerformed"),this.validate(),!1):27===t.which?this.emit("EscapePerformed"):void 0},e}(r)},{"../../core/customhtmlview":96,"../../core/kd":99,"./inputview":44}],40:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("./inputradiogroup"),e.exports=i=function(t){function e(t,n){null==t&&(t={}),t.checkboxes||(t.checkboxes=[]),t.radios||(t.radios=t.checkboxes),t.type||(t.type="checkbox"),e.__super__.constructor.call(this,t,n)}return r(e,t),e.prototype.click=function(t){return"LABEL"!==t.target.tagName?this.setValue(this.getValue()):void 0},e.prototype.getValue=function(){var t,e,i,o,r;for(r=[],o=this.getDomElement().find("input:checked"),e=0,i=o.length;i>e;e++)t=o[e],r.push(n(t).val());return r},e.prototype.setValue=function(t){var e,n,i,o;if(this.$("input").prop("checked",!1),this.$(".kd-radio-holder").removeClass("active"),t instanceof Array){for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(this._setValue(o));return i}return this._setValue(t)},e.prototype._setValue=function(t){return this.$("input[value='"+t+"']").prop("checked",!0),t?this.$(".kd-radio-holder.role-"+t).addClass("active"):void 0},e}(o)},{"./inputradiogroup":41,jquery:111}],41:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("./inputview"),e.exports=i=function(t){function e(t){t.type||(t.type="radio"),null==t.hideRadios&&(t.hideRadios=!1),null==t.showIcons&&(t.showIcons=!1),t.cssClassPrefix||(t.cssClassPrefix=""),e.__super__.constructor.call(this,t),this._currentValue=this.getOption("defaultValue")}return r(e,t),e.prototype.setDomElement=function(){var t,e,i,o,r,s,a,l,u,c;for(a=this.getOptions(),this.domElement=n("<fieldset class='"+this.utils.curry("radiogroup kdinput",a.cssClass)+"'></fieldset>"),c=a.radios,i=o=0,s=c.length;s>o;i=++o)u=c[i],null==u.visible&&(u.visible=!0),u.callback||(u.callback=function(){}),t=u.disabled?"disabled ":"",e=n("<div/>",{"class":"kd-"+this.getType()+"-holder "+t+a.cssClassPrefix+this.utils.slugify(u.value)}),l=n("<input/>",{type:this.getType(),name:a.name,value:u.value,"class":"no-kdinput"+(a.hideRadios?" hidden":""),id:this.getId()+"_"+this.getType()+"_"+i,change:u.callback}),u.disabled&&l[0].setAttribute("disabled","disabled"),r=n("<label/>",{"for":this.getId()+"_"+this.getType()+"_"+i,html:u.title,"class":a.cssClassPrefix+this.utils.slugify(u.value)}),e.append(l),a.showIcons&&e.append(n("<span/>",{"class":"icon"})),e.append(r),this.domElement.append(e),u.visible||e.hide();return this.domElement},e.prototype.click=function(t){var e;return e=n(t.target).closest(".kd-"+this.getType()+"-holder").find("input"),e.length<1?void 0:"disabled"===e[0].getAttribute("disabled")?!1:this.setValue(e[0].getAttribute("value"))},e.prototype.setDefaultValue=function(t){return this.inputDefaultValue=t,this.setValue(t,!0)},e.prototype.getValue=function(){return this.$("input[checked=checked]").val()},e.prototype.setValue=function(t,e){var n;return null==e&&(e=!1),this.$("input").attr("checked",!1),n=this.$("input[value='"+t+"']"),n.attr("checked","checked"),n.prop("checked",!0),null==t||t===this._currentValue||e||this.emit("change",t),this._currentValue=t,this.$(".kd-radio-holder").removeClass("active"),null!=t&&""!==t?this.$(".kd-radio-holder."+t).addClass("active"):void 0},e.prototype.getInputElements=function(){return this.getDomElement().find("input")},e}(o)},{"./inputview":44,jquery:111}],42:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("./inputview"),e.exports=i=function(t){function e(t){null==t&&(t={}),t.type="switch",e.__super__.constructor.call(this,t),this.setPartial("<input class='checkbox hidden no-kdinput' type='checkbox' name='"+this.getName()+"'/>")}return r(e,t),e.prototype.setDomElement=function(){return this.domElement=n("<span class='kdinput kdinputswitch off'></span>")},e.prototype.setDefaultValue=function(t){switch(t){case!0:case"on":case"true":case"yes":case 1:return this._setDefaultValue(!0);default:return this._setDefaultValue(!1)}},e.prototype.getDefaultValue=function(){return this.inputDefaultValue},e.prototype.getValue=function(){return this.getDomElement().find("input").eq(0).is(":checked")},e.prototype.setValue=function(t){switch(t){case!0:return this.switchAnimateOn();case!1:return this.switchAnimateOff()}},e.prototype._setDefaultValue=function(t){return setTimeout(function(e){return function(){return t=!!t,t?(e.inputDefaultValue=!0,e.getDomElement().find("input").eq(0).attr("checked",!0),e.getDomElement().removeClass("off").addClass("on")):(e.inputDefaultValue=!1,e.getDomElement().find("input").eq(0).attr("checked",!1),e.getDomElement().removeClass("on").addClass("off"))}}(this),0)},e.prototype.switchAnimateOff=function(){var t,e;if(this.getValue())return t=0,e=setInterval(function(n){return function(){return n.getDomElement().css("background-position","left -"+20*t+"px"),6===t&&(clearInterval(e),n.getDomElement().find("input").eq(0).attr("checked",!1),n.getDomElement().removeClass("on").addClass("off"),n.switchStateChanged()),t++}}(this),20)},e.prototype.switchAnimateOn=function(){var t,e;if(!this.getValue())return t=6,e=setInterval(function(n){return function(){return n.getDomElement().css("background-position","left -"+20*t+"px"),0===t&&(clearInterval(e),n.getDomElement().find("input").eq(0).attr("checked",!0),n.getDomElement().removeClass("off").addClass("on"),n.switchStateChanged()),t--}}(this),20)},e.prototype.switchStateChanged=function(){return null!=this.getCallback()?this.getCallback().call(this,this.getValue()):void 0},e.prototype.mouseDown=function(){switch(this.getValue()){case!0:this.setValue(!1);break;case!1:this.setValue(!0)}return!1},e}(o)},{"./inputview":44,jquery:111}],43:[function(t,e){var n,i,o;n=t("jquery"),i=t("../../core/kd"),e.exports=o=function(){function t(){}return t.ruleRequired=function(t,e){var i,o,r,s;if(9!==(null!=e?e.which:void 0))return s=n.trim(t.getValue()),r=t.getOptions().validate,i=s.length>0,i?null:(null!=(o=r.messages)?o.required:void 0)||"Field is required"},t.ruleEmail=function(t,e){var i,o,r,s;if(9!==(null!=e?e.which:void 0))return s=n.trim(t.getValue()),r=t.getOptions().validate,i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(s),i?null:(null!=(o=r.messages)?o.email:void 0)||"Please enter a valid email address"},t.ruleMinLength=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return a=n.trim(t.getValue()),s=t.getOptions().validate,o=s.rules.minLength,i=a.length>=o,i?null:(null!=(r=s.messages)?r.minLength:void 0)||"Please enter a value that has "+o+" characters or more"},t.ruleMaxLength=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return a=n.trim(t.getValue()),s=t.getOptions().validate,o=s.rules.maxLength,i=a.length<=o,i?null:(null!=(r=s.messages)?r.maxLength:void 0)||"Please enter a value that has "+o+" characters or less"},t.ruleRangeLength=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return a=n.trim(t.getValue()),s=t.getOptions().validate,o=s.rules.rangeLength,i=a.length<=o[1]&&a.length>=o[0],i?null:(null!=(r=s.messages)?r.rangeLength:void 0)||"Please enter a value that has more than "+o[0]+" and less than "+o[1]+" characters"},t.ruleMatch=function(t,e){var i,o,r,s,a,l,u;if(9!==(null!=e?e.which:void 0))return u=n.trim(t.getValue()),l=t.getOptions().validate,o=l.rules.match,r="function"==typeof o?o():o,s=n.trim(r.getValue()),i=u===s,i?null:(null!=(a=l.messages)?a.match:void 0)||"Values do not match"},t.ruleCreditCard=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return a=n.trim(t.getValue().replace(/-|\s/g,"")),r=t.getOptions().validate,i=/(^4[0-9]{12}(?:[0-9]{3})?$)|(^5[1-5][0-9]{14}$)|(^3[47][0-9]{13}$)|(^3(?:0[0-5]|[68][0-9])[0-9]{11}$)|(^6(?:011|5[0-9]{2})[0-9]{12}$)|(^(?:2131|1800|35\d{3})\d{11}$)/.test(a),i?(s=/^4[0-9]{12}(?:[0-9]{3})?$/.test(a)?"Visa":/^5[1-5][0-9]{14}$/.test(a)?"MasterCard":/^3[47][0-9]{13}$/.test(a)?"Amex":/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(a)?"Diners":/^6(?:011|5[0-9]{2})[0-9]{12}$/.test(a)?"Discover":/^(?:2131|1800|35\d{3})\d{11}$/.test(a)?"JCB":!1,t.emit("CreditCardTypeIdentified",s),null):(null!=(o=r.messages)?o.creditCard:void 0)||"Please enter a valid credit card number"},t.ruleJSON=function(t,e){var o,r,s,a,l;if(9!==(null!=e?e.which:void 0)){l=n.trim(t.getValue()),a=t.getOptions().validate,o=!0;try{l&&JSON.parse(l)}catch(u){r=u,i.error(r,o),o=!1}return o?null:(null!=(s=a.messages)?s.JSON:void 0)||"a valid JSON is required"}},t.ruleRegExp=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return a=n.trim(t.getValue()),s=t.getOptions().validate,r=s.rules.regExp,i=r.test(a),i?null:(null!=(o=s.messages)?o.regExp:void 0)||"Validation failed"},t.ruleUri=function(t,e){var i,o,r,s,a;if(9!==(null!=e?e.which:void 0))return r=/^([a-z0-9+.-]+):(?:\/\/(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)(?::(\d*))?(\/(?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*)?|(\/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*)?)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:)?$/i,a=n.trim(t.getValue()),s=t.getOptions().validate,i=r.test(a),i?null:(null!=(o=s.messages)?o.uri:void 0)||"Not a valid URI"},t}()},{"../../core/kd":99,jquery:111}],44:[function(t,e){var n,i,o,r,s,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t("../../core/kd"),a=t("../notifications/notificationview"),l=t("../../core/view"),r=t("./inputvalidator"),i=t("htmlencode"),e.exports=s=function(t){function e(t,n){var i;
null==t&&(t={}),t.type||(t.type="text"),t.name||(t.name=""),t.label||(t.label=null),t.cssClass||(t.cssClass=""),t.callback||(t.callback=null),null==t.defaultValue&&(t.defaultValue=""),t.placeholder||(t.placeholder=""),null==t.disabled&&(t.disabled=!1),t.selectOptions||(t.selectOptions=null),t.validate||(t.validate=null),null==t.decorateValidation&&(t.decorateValidation=!0),t.hint||(t.hint=null),null==t.autogrow&&(t.autogrow=!1),null==t.enableTabKey&&(t.enableTabKey=!1),t.forceCase||(t.forceCase=null),t.bind=o.utils.curry("blur change focus paste cut input copy",t.bind),this.setType(t.type),e.__super__.constructor.call(this,t,n),i=this.getOptions(),this.validationNotifications={},this.valid=!0,this.inputCallback=null,this.previousHeight=null,this.setName(i.name),this.setLabel(),this.setCallback(),this.setDefaultValue(i.defaultValue),this.setPlaceholder(i.placeholder),i.disabled&&this.makeDisabled(),null!=i.selectOptions&&"function"!=typeof i.selectOptions&&this.setSelectOptions(i.selectOptions),i.autogrow&&this.setAutoGrow(),i.enableTabKey&&this.enableTabKey(),i.forceCase&&this.setCase(i.forceCase),i.required&&!function(t){return null==t.rules&&(t.rules={}),null==t.messages&&(t.messages={}),t.rules.required=!0,t.messages.required=i.required}(null!=i.validate?i.validate:i.validate={}),i.validate&&this.setValidation(i.validate),this.bindValidationEvents(),"select"===i.type&&i.selectOptions&&this.on("viewAppended",function(e){return function(){var n;if(t=e.getOptions(),"function"==typeof t.selectOptions)return n=e.bound("setSelectOptions"),t.selectOptions.call(e,n);if(t.selectOptions.length){if(!t.defaultValue)return e.setValue(t.selectOptions[0].value)}else if(!t.defaultValue)return e.setValue(t.selectOptions[Object.keys(t.selectOptions)[0]][0].value)}}(this)),t.autogrow&&this.once("focus",function(t){return function(){return t.initialHeight?void 0:t.initialHeight=t.$().height()}}(this))}return u(e,t),e.prototype.setDomElement=function(t){var e;return null==t&&(t=""),e="name='"+this.options.name+"'",this.domElement=function(){switch(this.getType()){case"text":return n("<input "+e+" type='text' class='kdinput text "+t+"'/>");case"password":return n("<input "+e+" type='password' class='kdinput text "+t+"'/>");case"hidden":return n("<input "+e+" type='hidden' class='kdinput hidden "+t+"'/>");case"checkbox":return n("<input "+e+" type='checkbox' class='kdinput checkbox "+t+"'/>");case"textarea":return n("<textarea "+e+" class='kdinput text "+t+"'></textarea>");case"select":return n("<select "+e+" class='kdinput select "+t+"'/>");case"range":return n("<input "+e+" type='range' class='kdinput range "+t+"'/>");default:return n("<input "+e+" type='"+this.getType()+"' class='kdinput "+this.getType()+" "+t+"'/>")}}.call(this)},e.prototype.bindValidationEvents=function(){return this.on("ValidationError",this.bound("giveValidationFeedback")),this.on("ValidationPassed",this.bound("giveValidationFeedback")),this.on("focus",this.bound("clearValidationFeedback"))},e.prototype.setLabel=function(t){return null==t&&(t=this.getOptions().label),t?(this.inputLabel=t,this.inputLabel.$()[0].setAttribute("for",this.getName()),this.inputLabel.$().bind("click",function(t){return function(){return t.$().trigger("focus"),t.$().trigger("click")}}(this))):void 0},e.prototype.getLabel=function(){return this.inputLabel},e.prototype.setCallback=function(){return this.inputCallback=this.getOptions().callback},e.prototype.getCallback=function(){return this.inputCallback},e.prototype.setType=function(t){this.inputType=null!=t?t:"text"},e.prototype.getType=function(){return this.inputType},e.prototype.setName=function(t){this.inputName=t},e.prototype.getName=function(){return this.inputName},e.prototype.setFocus=function(){return o.getSingleton("windowController").setKeyView(this),this.$().trigger("focus")},e.prototype.setBlur=function(){return o.getSingleton("windowController").setKeyView(null),this.$().trigger("blur")},e.prototype.setSelectOptions=function(t){var e,i,r,s,a,l,u,p;if(t.length)if(t.length)for(r=0,a=t.length;a>r;r++)u=t[r],this.$().append("<option value='"+u.value+"'>"+u.title+"</option>");else o.warn("no valid options specified for the input:",this);else for(l in t)if(c.call(t,l))for(p=t[l],e=n("<optgroup label='"+l+"'/>"),this.$().append(e),i=0,s=p.length;s>i;i++)u=p[i],e.append("<option value='"+u.value+"'>"+u.title+"</option>");return this.$().val(this.getDefaultValue())},e.prototype.setDefaultValue=function(t){return null!=t||""===t?(e.prototype.setValue.call(this,t),this.inputDefaultValue=t):void 0},e.prototype.getDefaultValue=function(){return this.inputDefaultValue},e.prototype.setPlaceholder=function(t){return this.$().is("input")||this.$().is("textarea")?(this.$().attr("placeholder",t),this.options.placeholder=t):void 0},e.prototype.makeDisabled=function(){return this.getDomElement().attr("disabled","disabled")},e.prototype.makeEnabled=function(){return this.getDomElement().removeAttr("disabled")},e.prototype.getValue=function(){var t,e;return"checkbox"===this.getOption("type")?e=this.$().is(":checked"):(e=this.getDomElement().val(),t=this.getOptions().forceCase,t&&(e="uppercase"===t.toLowerCase()?e.toUpperCase():e.toLowerCase())),e},e.prototype.setValue=function(t){var e,n,i;return e=this.$(),n=e[0],"checkbox"===(i=this.getOption("type"))||"radio"===i?t?n.setAttribute("checked","checked"):n.removeAttribute("checked"):e.val(t)},e.prototype.setCase=function(){var t;return t=function(t){return function(){var e,n,i,o,r;return e=t.getDomElement(),n=e[0],r=t.getValue(),r!==e.val()?(o=n.selectionStart,i=n.selectionEnd,t.setValue(r),n.setSelectionRange?n.setSelectionRange(o,i):void 0):void 0}}(this),this.on("keyup",t),this.on("blur",t)},e.prototype.unsetValidation=function(){return this.setValidation({})},e.prototype.setValidation=function(t){var e,n,i,o,r,s;this.valid=!1,this.currentRuleset=t,this.validationCallbacks||(this.validationCallbacks={}),this.createRuleChain(t),s=this.validationCallbacks;for(r in s)if(c.call(s,r))for(o=s[r],e=0,n=o.length;n>e;e++)i=o[e],this.off(r,i);return this.ruleChain.forEach(function(e){return function(n){var i,o,r;return r=t.events&&t.events[n]?t.events[n]:t.event?t.event:void 0,r?((i=e.validationCallbacks)[r]||(i[r]=[]),e.validationCallbacks[r].push(o=function(t){return p.call(e.ruleChain,n)>=0?e.validate(n,t):void 0}),e.on(r,o)):void 0}}(this))},e.prototype.validate=function(t,e){var n,i,o,s,a,l;null==e&&(e={}),this.ruleChain||(this.ruleChain=[]),this.validationResults||(this.validationResults={}),l=t?[t]:this.ruleChain,a=this.currentRuleset||this.getOptions().validate,this.ruleChain.length>0?l.forEach(function(t){return function(n){var i;return null!=r["rule"+n.capitalize()]?(i=r["rule"+n.capitalize()](t,e),t.setValidationResult(n,i)):"function"==typeof a.rules[n]?a.rules[n](t,e):void 0}}(this)):this.valid=!0,n=!0,o=this.validationResults;for(s in o)c.call(o,s)&&(i=o[s],i&&(n=!1));return this.valid=n?!0:!1,this.valid&&this.emit("ValidationPassed"),this.emit("ValidationResult",this.valid),this.valid},e.prototype.createRuleChain=function(t){var e,n,i,o,r,s,a;for(s=t.rules,this.validationResults||(this.validationResults={}),this.ruleChain="object"==typeof s?function(){var t;t=[];for(r in s)c.call(s,r)&&(a=s[r],t.push(r));return t}():[s],i=this.ruleChain,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(this.validationResults[r]=null);return o},e.prototype.setValidationResult=function(t,e,n){var i,o;return null==n&&(n=!0),e?(this.validationResults[t]=e,this.getOptions().validate.notifications&&n&&this.showValidationError(e),this.emit("ValidationError",e),this.valid=!1):(this.validationResults[t]=null,this.valid=!(function(){var t,e;t=this.validationResults,e=[];for(i in t)c.call(t,i)&&(o=t[i],e.push(o));return e}.call(this).map(function(t){return Boolean(t)}).indexOf(!0)>-1))},e.prototype.showValidationError=function(t){var e,n,i,o,r,s;return null!=(o=this.validationNotifications[t])&&o.destroy(),r=this.getOption("validate"),e=r.container,i=r.notifications,"tooltip"===(null!=i?i.type:void 0)?(this.tooltip&&(s="- "+t+"<br>"+this.tooltip.getOption("title")),this.unsetTooltip(),i={cssClass:i.cssClass||"input-validation",delegate:i.delegate||this,title:i.title||s||t,placement:i.placement||"right",direction:i.direction||"left",forcePosition:!0},this.validationNotifications[t]=n=this.setTooltip(i),n.show()):i&&(this.validationNotifications[t]=n=new a({container:e,title:t,type:"growl",cssClass:"mini",duration:2500})),n.on("KDObjectWillBeDestroyed",function(e){return function(){return t=n.getOptions().title,delete e.validationNotifications[t]}}(this))},e.prototype.clearValidationFeedback=function(){return this.unsetClass("validation-error validation-passed"),this.emit("ValidationFeedbackCleared")},e.prototype.giveValidationFeedback=function(t){return this.getOption("decorateValidation")?t?this.setClass("validation-error"):(this.setClass("validation-passed"),this.unsetClass("validation-error")):void 0},e.prototype.setCaretPosition=function(t){return this.selectRange(t,t)},e.prototype.getCaretPosition=function(){var t,e,n,i;return t=this.$()[0],t.selectionStart?t.selectionStart:document.selection?(t.focus(),(e=document.selection.createRange())?(i=t.createTextRange(),n=i.duplicate(),i.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length):0):0},e.prototype.selectAll=function(){return this.getDomElement().select()},e.prototype.selectRange=function(t,e){var n,i;return n=this.$()[0],n.setSelectionRange?(n.focus(),n.setSelectionRange(t,e)):n.createTextRange?(i=n.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()):void 0},e.prototype.setAutoGrow=function(){var t;return t=this.$(),t.css("overflow","hidden"),this.setClass("autogrow"),this._clone=n("<div/>",{"class":"invisible"}),this.on("focus",function(e){return function(){return e._clone.appendTo("body"),e._clone.css({height:"auto",zIndex:1e5,width:t.css("width"),boxSizing:t.css("box-sizing"),borderTop:t.css("border-top"),borderRight:t.css("border-right"),borderBottom:t.css("border-bottom"),borderLeft:t.css("border-left"),minHeight:t.css("minHeight"),maxHeight:t.css("maxHeight"),paddingTop:t.css("padding-top"),paddingRight:t.css("padding-right"),paddingBottom:t.css("padding-bottom"),paddingLeft:t.css("padding-left"),wordBreak:t.css("wordBreak"),fontSize:t.css("fontSize"),fontWeight:t.css("fontWeight"),lineHeight:t.css("lineHeight"),whiteSpace:"pre-line"})}}(this)),this.on("blur",function(t){return function(){return t._clone.detach()}}(this)),this.on("input",function(t){return function(e){return o.utils.defer(function(){return t.resize(e)})}}(this))},e.prototype.resize=function(){var t,e,n,o,r,s,a;if(this._clone)return document.body.contains(this._clone[0])||this._clone.appendTo("body"),a=this.getElement().value.replace(/\n/g,"\n&nbsp;"),s=i.XSSEncode(a),this._clone.html(s),n=this._clone.height(),e=function(t){return function(e){return parseInt(t._clone.css(e),10)}}(this),"border-box"===this.$().css("boxSizing")&&(r=e("paddingTop")+e("paddingBottom"),t=e("borderTopWidth")+e("borderBottomWidth"),n=n+t+r),o=this.initialHeight?Math.max(this.initialHeight,n):n,this.previousHeight!==o&&(this.setHeight(o),this.emit("InputHeightChanged")),this.previousHeight=o},e.prototype.enableTabKey=function(){return this.inputTabKeyEnabled=!0},e.prototype.disableTabKey=function(){return this.inputTabKeyEnabled=!1},e.prototype.change=function(){},e.prototype.keyUp=function(){return!0},e.prototype.keyDown=function(t){return this.inputTabKeyEnabled&&this.checkTabKey(t),!0},e.prototype.focus=function(){return this.setKeyView(),!0},e.prototype.blur=function(){return o.getSingleton("windowController").revertKeyView(this),!0},e.prototype.mouseDown=function(){return this.setFocus(),!1},e.prototype.checkTabKey=function(t){var e,n,i,o,r,s,a,l;return a="  ",l=a.length,s=t.target,r=s.selectionStart,i=s.selectionEnd,9===t.which?(t.preventDefault(),r!==i&&-1!==s.value.slice(r,i).indexOf("n")?(n=s.value.slice(0,r),o=s.value.slice(r,i).replace(/n/g,"n"+a),e=s.value.slice(i,s.value.length),s.value=n.concat(a).concat(o).concat(e),s.selectionStart=r+a.length,s.selectionEnd=i+a.length):(s.value=s.value.slice(0,r).concat(a).concat(s.value.slice(r,s.value.length)),r===i?s.selectionStart=s.selectionEnd=r+a.length:(s.selectionStart=r+a.length,s.selectionEnd=i+a.length))):8===t.which&&s.value.slice(r-l,r)===a?(t.preventDefault(),s.value=s.value.slice(0,r-l).concat(s.value.slice(r,s.value.length)),s.selectionStart=s.selectionEnd=r-a.length):46===t.which&&s.value.slice(i,i+l)===a?(t.preventDefault(),s.value=s.value.slice(0,r).concat(s.value.slice(r+l,s.value.length)),s.selectionStart=s.selectionEnd=r):37===t.which&&s.value.slice(r-l,r)===a?(t.preventDefault(),s.selectionStart=s.selectionEnd=r-l):39===t.which&&s.value.slice(r,r+l)===a?(t.preventDefault(),s.selectionStart=s.selectionEnd=r+l):void 0},e}(l)},{"../../core/kd":99,"../../core/view":105,"../notifications/notificationview":60,"./inputvalidator":43,htmlencode:115,jquery:111}],45:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("../../core/view"),e.exports=i=function(t){function e(t){null!=(null!=t?t.title:void 0)&&this.setTitle(t.title),e.__super__.constructor.call(this,t)}return r(e,t),e.prototype.setDomElement=function(t){return this.domElement=n("<label class='kdlabel "+t+"'>"+this.getTitle()+"</label>")},e.prototype.setTitle=function(t){return this.labelTitle=t||""},e.prototype.updateTitle=function(t){return this.setTitle(t),this.$().html(t)},e.prototype.getTitle=function(){return this.labelTitle},e}(o)},{"../../core/view":105,jquery:111}],46:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),i=t("./inputview"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),null==t.disabled&&(t.disabled=!1),t.size||(t.size="small"),t.labels||(t.labels=["ON","OFF"]),t.titles||(t.titles=t.labels),null==t.multiple&&(t.multiple=!1),t.defaultValue||(t.defaultValue=t.multiple?t.labels[0]:void 0),!t.multiple&&Array.isArray(t.defaultValue)&&(t.defaultValue=t.defaultValue[0]),e.__super__.constructor.call(this,t,n),this.setClass(t.size),this.setPartial("<input class='hidden no-kdinput' name='"+this.getName()+"'/>"),this.oldValue=null,t.multiple&&(this.currentValue=[]),this.setDisabled(t.disabled)}var i;return r(e,t),e.prototype.setDomElement=function(t){var e,i,o,r,s,a,l,u,c,p,h,d;for(h=this.getOptions(),d=h.titles,u=h.labels,p=h.name,o=h.defaultValue,this.inputName=p,l="",r=s=0,c=u.length;c>s;r=++s)a=u[r],e=a===o?" active":"",i="multiple-choice-"+a+e,l+="<a href='#' name='"+a+"' class='"+i+"' title='"+(d[r]||"Select "+a)+"'>"+a+"</a>";return this.domElement=n("<div class='kdinput on-off multiple-choice "+t+"'>\n  "+l+"\n</div> ")},e.prototype.getDefaultValue=function(){return this.getOptions().defaultValue},e.prototype.getValue=function(){return this.currentValue},i=function(t,e){return a.call(t.currentValue,e)>=0?(t.$("a[name$='"+e+"']").removeClass("active"),t.currentValue.splice(t.currentValue.indexOf(e),1)):(t.$("a[name$='"+e+"']").addClass("active"),t.currentValue.push(e))},e.prototype.setDisabled=function(t){return null==t&&(t=!0),this._disabled=t},e.prototype.setValue=function(t,e){var n,o,r,s;if(null==e&&(e=!0),n=this.getOptions().multiple){if(this.oldValue=null!=(r=[function(){var t,e,n,i;for(n=this.currentValue,i=[],t=0,e=n.length;e>t;t++)o=n[t],i.push(o);return i}.call(this)])?r.first:void 0,Array.isArray(t)?[function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)s=t[e],o.push(i(this,s));return o}.call(this)]:i(this,t),e)return this.switchStateChanged()}else if(this.$("a").removeClass("active"),this.$("a[name='"+t+"']").addClass("active"),this.oldValue=this.currentValue,this.currentValue=t,this.currentValue!==this.oldValue&&e)return this.switchStateChanged()},e.prototype.switchStateChanged=function(){return this._disabled?void 0:null!=this.getCallback()?this.getCallback().call(this,this.getValue()):void 0},e.prototype.fallBackToOldState=function(){var t;return t=this.getOptions().multiple,t&&(this.currentValue=[],this.$("a").removeClass("active")),this.setValue(this.oldValue,!1)},e.prototype.mouseDown=function(t){return this._disabled?void 0:n(t.target).is("a")?this.setValue(t.target.name):void 0},e}(i)},{"./inputview":44,jquery:111}],47:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),o=t("./inputview"),e.exports=r=function(t){function e(t,n){null==t&&(t={}),t.type="switch",t.title||(t.title=""),t.size||(t.size="small"),t.labels||(t.labels=["ON","OFF"]),null==t.defaultValue&&(t.defaultValue=!1),e.__super__.constructor.call(this,t,n),this.setClass(t.size),this.setPartial("<input class='checkbox hidden no-kdinput' type='checkbox' name='"+this.getName()+"'/>"),this.setDefaultValue(t.defaultValue)}return s(e,t),e.prototype.setDomElement=function(t){var e,i,o,r;return o=this.getOptions(),r=o.title,e=o.labels,i=o.name,""!==r&&(r="<span>"+r+"</span>"),this.inputName=i,this.domElement=n("<div class='kdinput on-off off "+t+"'>\n  "+r+"\n  <a href='#' class='on' title='turn on'>"+e[0]+"</a><a href='#' class='off' title='turn off'>"+e[1]+"</a>\n</div> ")},e.prototype.getValue=function(){return"checked"===this.$("input").attr("checked")},e.prototype.setValue=function(t,e){switch(null==e&&(e=!0),t){case!0:return this.setOn(e);case!1:return this.setOff(e)}},e.prototype.setDefaultValue=function(t){switch(t){case!0:case"on":case"true":case"yes":case 1:return this.setValue(!0,!1);default:return this.setValue(!1,!1)}},e.prototype.setOff=function(t){return null==t&&(t=!0),this.getValue()||!t?(this.$("input").attr("checked",!1),this.$("a.on").removeClass("active"),this.$("a.off").addClass("active"),t?this.switchStateChanged():void 0):void 0},e.prototype.setOn=function(t){return null==t&&(t=!0),this.getValue()&&t?void 0:(this.$("input").attr("checked",!0),this.$("a.off").removeClass("active"),this.$("a.on").addClass("active"),t?this.switchStateChanged():void 0)},e.prototype.switchStateChanged=function(){return this.emit("SwitchStateChanged",this.getValue()),null!=this.getCallback()?this.getCallback().call(this,this.getValue()):void 0},e.prototype.click=i.utils.stopDOMEvent,e.prototype.mouseDown=function(t){return n(t.target).is("a.on")?this.setValue(!0):n(t.target).is("a.off")?this.setValue(!1):void 0},e}(o)},{"../../core/kd":99,"./inputview":44,jquery:111}],48:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),o=t("./inputview"),e.exports=r=function(t){function e(t){null==t&&(t={}),t.type="select",e.__super__.constructor.call(this,t)}return s(e,t),e.prototype.setDomElement=function(t){var e;return this.inputName=this.getOption("name"),e="name='"+this.options.name+"'",this.domElement=n("<div class='kdselectbox "+t+"'>\n  <select "+e+"></select>\n  <span class='title'></span>\n  <span class='arrows'></span>\n</div>\""),this._$select=this.$("select").eq(0),this._$title=this.$("span.title").eq(0),this.domElement},e.prototype.bindEvents=function(){return this._$select.bind("blur change focus",function(t){return function(e){var n;return"change"===e.type&&"function"==typeof(n=t.getCallback())&&n(t.getValue()),t.emit(e.type,e,t.getValue()),t.handleEvent(e)}}(this)),e.__super__.bindEvents.apply(this,arguments)},e.prototype.setDefaultValue=function(t){return""!==t&&this.getDomElement().val(t),this._$select.val(t),this._$title.text(this._$select.find('option[value="'+t+'"]').text()),this.inputDefaultValue=t},e.prototype.getDefaultValue=function(){return this.inputDefaultValue},e.prototype.getValue=function(){return this._$select.val()},e.prototype.setValue=function(t){return this._$select.val(t),this.change()},e.prototype.makeDisabled=function(){return this.setClass("disabled"),this._$select.attr("disabled","disabled")},e.prototype.makeEnabled=function(){return this.unsetClass("disabled"),this._$select.removeAttr("disabled")},e.prototype.setSelectOptions=function(t){var e,o,r,s,l,u,c,p,h,d;if(o=null,t.length)if(t.length)for(s=0,u=t.length;u>s;s++)p=t[s],this._$select.append("<option value='"+p.value+"'>"+p.title+"</option>"),o||(o=p);else i.warn("no valid options specified for the input:",this);else for(c in t)if(a.call(t,c))for(h=t[c],e=n("<optgroup label='"+c+"'/>"),this._$select.append(e),r=0,l=h.length;l>r;r++)p=h[r],o||(o=p),e.append("<option value='"+p.value+"'>"+p.title+"</option>");return d=this.getDefaultValue()||(null!=o?o.value:void 0)||"",this._$select.val(d+""),this._$title.text(this._$select.find('option[value="'+d+'"]').text())},e.prototype.removeSelectOptions=function(){return this._$select.find("optgroup").remove(),this._$select.find("option").remove()},e.prototype.change=function(){return this._$title.text(this._$select.find('option[value="'+this.getValue()+'"]').text())},e.prototype.focus=function(){return this.setClass("focus")},e.prototype.blur=function(){return this.unsetClass("focus")},e}(o)},{"../../core/kd":99,"./inputview":44,jquery:111}],49:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=t("../../core/kd"),o=t("./contenteditableview"),r=t("../contextmenu/contextmenu"),n=t("htmlencode"),e.exports=s=function(t){function e(t,n){null==t&&(t={}),t.cssClass=i.utils.curry("kdtokenizedinputview",t.cssClass),t.bind=i.utils.curry("keyup",t.bind),t.rules||(t.rules={}),t.layer||(t.layer={}),e.__super__.constructor.call(this,t,n),this.tokenViews={}}return a(e,t),e.prototype.getValue=function(t){var e,i,o,r,s,a,l;for(null==t&&(t={}),l="",s=this.getEditableElement().childNodes,e=0,i=s.length;i>e;e++)o=s[e],"div"===(null!=(a=o.tagName)?a.toLowerCase():void 0)&&(l+="\n"),r=this.getValueOfNode(o),"\n"!==r&&(l+=r);return l===n.htmlDecode(this.getOptions().placeholder)?"":l},e.prototype.getValueOfNode=function(t){var e;switch(e="",t.nodeType){case Node.TEXT_NODE:""!==t.textContent&&(e+=t.textContent);break;case Node.ELEMENT_NODE:e+=this.getValueOfElement(t)}return e},e.prototype.getValueOfElement=function(t){var e,n,i,o,r,s,a,l;if(i=null!=(r=t.dataset)?r.key:void 0,i&&(l=this.getValueOfTokenElement(i)),l)return l;switch(a=t.tagName.toLowerCase()){case"br":return"\n";default:for(l="",s=t.childNodes,n=0,o=s.length;o>n;n++)e=s[n],l+=this.getValueOfNode(e);return l||""}},e.prototype.getValueOfTokenElement=function(t){var e;return e=this.getTokenView(t),t&&e?e.encodeValue():void 0},e.prototype.getTokens=function(){return this.findTokensInElement(this.getEditableElement())},e.prototype.findTokensInElement=function(t){var e,n,i,o,r,s,a,l,u,c;for(l=[],s=t.childNodes,i=0,r=s.length;r>i;i++)switch(e=s[i],e.nodeType){case Node.ELEMENT_NODE:(o=null!=(a=e.dataset)?a.key:void 0)?(c=this.getTokenView(o),u=c.getOptions().type,n=c.getData(),l.push({type:u,data:n})):l=l.concat(this.findTokensInElement(e))}return l},e.prototype.getTokenView=function(t){return this.tokenViews[t]},e.prototype.matchPrefix=function(){var t,e,n,i,o,r,s,a,l;if(!this.tokenInput&&(i=this.utils.getSelectionRange())){if(n=i.commonAncestorContainer,1===(null!=(o=n.children)?o.length:void 0))return n.textContent===n.children[0].textContent;l=i.startOffset-1,t=n.textContent[l],r=this.getOptions().rules,s=[];for(e in r)a=r[e],t===a.prefix?(this.activeRule=a,this.tokenInput=document.createElement("span"),this.tokenInput.textContent=a.prefix,this.utils.replaceRange(n,this.tokenInput,l,l+a.prefix.length),s.push(this.utils.selectText(this.tokenInput,a.prefix.length))):s.push(void 0);return s}},e.prototype.matchToken=function(){var t,e;return this.tokenInput.parentNode?(this.sanitizeInput(),e=this.tokenInput.textContent.substring(this.activeRule.prefix.length),/\s/.test(e)?this.cancel():e!==this.lastToken?(this.lastToken=e,e.trim()?(t=this.activeRule.dataSource)(e,this.bound("showMenu")):0!==e.length?this.cancel():void 0):void 0):this.cancel()},e.prototype.sanitizeInput=function(){},e.prototype.showMenu=function(t,e){var n,i;return null==t&&(t={}),null!=(i=this.menu)&&i.destroy(),this.menu=null,this.tokenInput&&e.length?(n=this.tokenInput.getBoundingClientRect(),null==t.x&&(t.x=n.left),null==t.y&&(t.y=n.top+parseInt(window.getComputedStyle(this.tokenInput).lineHeight,10)),this.menu=new r(t,e),this.menu.on("ContextMenuItemReceivedClick",this.bound("menuItemClicked"))):void 0},e.prototype.hideMenu=function(){var t;return null!=(t=this.menu)&&t.destroy(),this.menu=null,this.activeRule=null,this.tokenInput=null},e.prototype.menuItemClicked=function(t,e){return this.addToken(t.data,e),this.hideMenu()},e.prototype.addToken=function(t,e){var n,i,o,r,s,a,l;return null==e&&(e=this.getOptions().tokenViewClass),o=this.activeRule,l=o.type,i=o.prefix,n=o.pistachio,a=new e({type:l,prefix:i,pistachio:n},t),r=a.getElement(),s=a.getId()+"-"+a.getKey(),this.tokenViews[s]=a,a.setAttributes({"data-key":s}),this.tokenInput.parentElement.insertBefore(r,this.tokenInput),a.emit("viewAppended"),this.tokenInput.nextSibling.textContent="",this.utils.selectText(this.tokenInput.nextSibling,1),this.tokenInput.remove(),this.emit("TokenAdded",l,t)},e.prototype.keyDown=function(t){switch(t.which){case 9:case 13:case 27:case 38:case 40:this.menu&&(this.menu.treeController.keyEventHappened(t),i.utils.stopDOMEvent(t));break;default:e.__super__.keyDown.call(this,t)}switch(t.which){case 27:if(this.tokenInput)return this.cancel()}},e.prototype.keyUp=function(t){switch(e.__super__.keyUp.apply(this,arguments),t.which){case 9:case 13:case 27:case 38:case 40:break;default:if(t.altKey||t.ctrlKey||t.metaKey)return;return this.activeRule?this.matchToken():this.matchPrefix()}},e.prototype.cancel=function(){var t;return this.tokenInput.parentNode&&(t=document.createTextNode(this.tokenInput.textContent),this.tokenInput.parentElement.insertBefore(t,this.tokenInput),this.tokenInput.nextSibling.remove(),this.tokenInput.remove(),this.utils.selectEnd(t)),this.hideMenu()},e.prototype.reset=function(){var t,e,n,i;this.setPlaceholder(),this.blur(),e=this.tokenViews,n=[];for(t in e)l.call(e,t)&&(i=e[t],i.destroy(),n.push(delete this.tokenViews[t]));return n},e.prototype.viewAppended=function(){return e.__super__.viewAppended.apply(this,arguments),this.setEditingMode(!0)},e}(o)},{"../../core/kd":99,"../contextmenu/contextmenu":21,"./contenteditableview":37,htmlencode:115}],50:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=t("./inputview"),e.exports=i=function(t){function e(t,n){var i;t=null!=t?t:{},t.type="textarea",t.preview=null!=(i=t.preview)?i:!1,e.__super__.constructor.call(this,t,n),this.setClass("monospace")}return o(e,t),e.prototype.setWMD=function(){var t;return t=this.getOptions().preview,this.getDomElement().wmd({preview:t}),t?this.getDomElement().after("<h3 class='wmd-preview-title'>Preview:</h3>"):void 0},e}(n)},{"./inputview":44}],51:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../../core/view"),e.exports=n=function(t){function e(t,n){var i,o;null==t&&(t={}),t.type=null!=(i=t.type)?i:"default",t.cssClass="kdlistitemview kdlistitemview-"+t.type+" "+(null!=(o=t.cssClass)?o:""),t.bind||(t.bind="mouseenter mouseleave"),t.childClass||(t.childClass=null),t.childOptions||(t.childOptions={}),null==t.selectable&&(t.selectable=!0),e.__super__.constructor.call(this,t,n),this.content={}}return o(e,t),e.prototype.viewAppended=function(){var t,e,n;return n=this.getOptions(),t=n.childClass,e=n.childOptions,t?this.addSubView(this.child=new t(e,this.getData())):this.setPartial(this.partial(this.data))},e.prototype.partial=function(){return"<div class='kdlistitemview-default-content'> <p>This is a default partial of <b>KDListItemView</b>, you need to override this partial to have your custom content here.</p> </div>"},e.prototype.dim=function(){return this.setClass("dimmed")},e.prototype.undim=function(){return this.unsetClass("dimmed")},e.prototype.highlight=function(){return this.undim(),this.setClass("selected")},e.prototype.removeHighlight=function(){return this.undim(),this.unsetClass("selected")},e.prototype.getItemDataId=function(){var t,e;return t=this.getData(),e=("function"==typeof t.getId?t.getId():void 0)?t.getId():null!=t.id?t.id:null!=t._id?t._id:void 0},e}(i)},{"../../core/view":105}],52:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),i=t("./listitemview"),s=t("../../core/view"),r=t("./listviewbox"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),t.type||(t.type="default"),null==t.lastToFirst&&(t.lastToFirst=!1),null==t.boxed&&(t.boxed=!1),null==t.itemsPerBox&&(t.itemsPerBox=10),t.cssClass=null!=t.cssClass?"kdlistview kdlistview-"+t.type+" "+t.cssClass:"kdlistview kdlistview-"+t.type,e.__super__.constructor.call(this,t,n),this.items=[],this.boxes=[]}return a(e,t),e.prototype.empty=function(){var t,e,n,i,o;for(o=this.items,t=n=0,i=o.length;i>n;t=++n)e=o[t],e&&e.destroy();return this.items=[]},e.prototype.keyDown=function(t){return n.utils.stopDOMEvent(t),this.emit("KeyDownOnList",t)},e.prototype.sanitizeIndex=function(t){var e,n,i;return e=this.getOptions().lastToFirst,n=this.items.length,e?(null==t&&(t=0),i=Math.max(0,n-t-1)):(null==t&&(t=n),i=Math.min(n,t)),i},e.prototype.addItemView=function(t,e){return e=this.sanitizeIndex(e),this.insertItemAtIndex(t,e),t},e.prototype.addItem=function(t,e){var n,o,r,s,a,l;return e=this.sanitizeIndex(e),l=this.getOptions(),a=l.itemOptions,r=l.itemClass,n=l.itemChildClass,o=l.itemChildOptions,null==r&&(r=i),null==a&&(a={}),a=("function"==typeof this.customizeItemOptions?this.customizeItemOptions(a,t):void 0)||a,a.delegate||(a.delegate=this),a.childClass||(a.childClass=n),a.childOptions||(a.childOptions=o),s=new r(a,t),this.insertItemAtIndex(s,e),s},e.prototype.removeItem=function(t){var e;return e=this.items.indexOf(t),0>e?!1:(this.emit("ItemWasRemoved",t,e),t.destroy(),this.items.splice(e,1),!0)},e.prototype.destroy=function(){var t,n,i,o;for(o=this.items,n=0,i=o.length;i>n;n++)t=o[n],t.destroy();return e.__super__.destroy.apply(this,arguments)},e.prototype.insertItemAtIndex=function(t,e){var n,i,o,r,s,a,l,u,c,p;return c=this.getOptions(),o=c.boxed,u=c.lastToFirst,a=e>=this.items.length-1,r=0===e,s=e>0&&e<this.items.length-1,r?this.items.unshift(t):a?this.items.push(t):this.items.splice(e,0,t),this.emit("ItemWasAdded",t,e),n=function(t){return function(e,n){var i,o;return i=e.getElement(),o=t.items[n+1].getElement(),o.parentNode.insertBefore(i,o),t.parentIsInDom?e.emit("viewAppended"):void 0}}(this),o?(l=this.getOptions().itemsPerBox,0===this.boxes.length?(i=this.createBox(),i.addSubView(t)):r||a?(i=null,p=r?"first":"last",i=this.boxes[p].getItems().length>=l?this.createBox(r):this.boxes[p],i.addSubView(t,null,r)):s&&n(t,e)):r?this.addSubView(t,null,!0):a?this.addSubView(t):n(t,e),this.doIHaveToScroll()?this.scrollDown():void 0},e.prototype.packageItem=function(t,e){var n,i,o,r,s,a;
return a=this.getOptions(),i=a.itemsPerBox,o=a.lastToFirst,r=function(n){return function(){var i;return i=n.createBox(e),i.addSubView(t)}}(this),(s=e?this.boxes.first:this.boxes.last)?(n=s.getItems(),n.length<i?s.addSubView(t,null,o):r()):r()},e.prototype.createBox=function(t){var e;return e=new r,t?this.boxes.unshift(e):this.boxes.push(e),this.addSubView(e,null,t),e.on("BoxIsEmptied",function(t){return function(e){var n,i,o,r,s,a;for(o=null,a=t.boxes,i=r=0,s=a.length;s>r;i=++r)if(n=a[i],n.getId()===e){o=i;break}return null!=o?t.boxes.splice(o,1)[0].destroy():void 0}}(this)),e},e.prototype.handleScroll=function(){},e.prototype.getItemIndex=function(t){return this.items.indexOf(t)},e.prototype.moveItemToIndex=function(t,e){var i,o,r;return i=this.getItemIndex(t),0>i?(n.warn("Item doesn't exists",t),this.items):(e=Math.max(0,Math.min(this.items.length-1,e)),e>=this.items.length-1?(r=this.items.last,r.$().after(t.$())):(o=e>i?1:0,r=this.items[e+o],r.$().before(t.$())),this.items.splice(i,1),this.items.splice(e,0,t),this.items)},e.prototype.scrollDown=function(){return clearTimeout(this._scrollDownTimeout),this._scrollDownTimeout=n.utils.wait(50,function(t){return function(){var e,n,i;return e=t.$().closest(".kdscrollview"),i=e.find("> .kdview"),n=i.height(),e.animate({scrollTop:n},{duration:200,queue:!1})}}(this))},e.prototype.doIHaveToScroll=function(){var t;return this.getOptions().autoScroll?(t=this.$().closest(".kdscrollview")[0],t.length&&t.scrollHeight>t.outerHeight()?!0:this.isScrollAtBottom(t)):!1},e.prototype.isScrollAtBottom=function(t){var e,n,i,o;return o=t.find("> .kdview")[0],e=t.scrollTop,i=o.clientHeight,n=t.clientHeight,i-n===e},e}(s)},{"../../core/kd":99,"../../core/view":105,"./listitemview":51,"./listviewbox":53}],53:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./listitemview"),n=t("../../core/customhtmlview"),e.exports=o=function(t){function e(t){null==t&&(t={}),t.tagName="section",e.__super__.constructor.call(this,t),this.observeMutations(),this.on("MutationHappened",this.bound("updateProps"))}return r(e,t),e.prototype.getItems=function(){return this.subViews.filter(function(t){return t instanceof i})},e.prototype.updateProps=function(){return 0===this.getItems().length?this.emit("BoxIsEmptied",this.getId()):void 0},e}(n)},{"../../core/customhtmlview":96,"./listitemview":51}],54:[function(t,e){var n,i,o,r,s,a,l,u,c,p=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("../../core/kd"),u=t("../../core/view"),c=t("../../core/viewcontroller"),i=t("../../core/customhtmlview"),l=t("../scrollview/scrollview"),o=t("../scrollview/customscrollview"),r=t("../list/listview"),a=t("../loader/loaderview"),e.exports=s=function(t){function e(t,i){var s,a,c;null==t&&(t={}),null==t.wrapper&&(t.wrapper=!0),null==t.scrollView&&(t.scrollView=!0),null==t.keyNav&&(t.keyNav=!1),null==t.multipleSelection&&(t.multipleSelection=!1),null==t.selection&&(t.selection=!1),null==t.startWithLazyLoader&&(t.startWithLazyLoader=!1),t.itemChildClass||(t.itemChildClass=null),t.itemChildOptions||(t.itemChildOptions={}),null==t.useCustomScrollView&&(t.useCustomScrollView=!1),t.noItemFoundWidget||(t.noItemFoundWidget=null),t.noMoreItemFoundWidget||(t.noMoreItemFoundWidget=null),null==t.lastToFirst&&(t.lastToFirst=!1),Object.defineProperty(this,"itemsOrdered",{get:function(t){return function(){return n.warn("KDListViewController::itemsOrdered is deprecated."),t.getListItems()}}(this)}),this.itemsIndexed={},this.selectedItems=[],this.lazyLoader=null,t.view?this.setListView(s=t.view):(c=t.viewOptions||{},c.lastToFirst||(c.lastToFirst=t.lastToFirst),c.itemClass||(c.itemClass=t.itemClass),c.itemOptions||(c.itemOptions=t.itemOptions),c.itemChildClass||(c.itemChildClass=t.itemChildClass),c.itemChildOptions||(c.itemChildOptions=t.itemChildOptions),null==c.boxed&&(c.boxed=t.boxed),null==c.itemsPerBox&&(c.itemsPerBox=t.itemsPerBox),this.setListView(s=new r(c))),t.scrollView&&(t.useCustomScrollView?(this.customScrollView=new o({lazyLoadThreshold:t.lazyLoadThreshold}),this.scrollView=this.customScrollView.wrapper):this.scrollView=new l({lazyLoadThreshold:t.lazyLoadThreshold})),t.view=t.wrapper?new u({cssClass:"listview-wrapper"}):s,e.__super__.constructor.call(this,t,i),a=this.getOptions().noItemFoundWidget,s.on("ItemWasAdded",function(t){return function(e,n){return t.registerItem(e,n),a?t.hideNoItemWidget():void 0}}(this)),s.on("ItemWasRemoved",function(t){return function(e,n){return t.unregisterItem(e,n),a?t.showNoItemWidget():void 0}}(this)),t.keyNav&&s.on("KeyDownOnList",function(t){return function(e){return t.keyDownPerformed(s,e)}}(this))}return p(e,t),e.prototype.loadView=function(t){var e,i,o,r,s,a;return i=this.getOptions(),r=i.scrollView,s=i.startWithLazyLoader,e=i.noItemFoundWidget,a=n.getSingleton("windowController"),r&&(t.addSubView(this.customScrollView||this.scrollView),this.scrollView.addSubView(this.getListView()),this.scrollView.on("LazyLoadThresholdReached",this.bound("showLazyLoader"))),s&&this.showLazyLoader(!1),e&&this.putNoItemView(),this.instantiateListItems((null!=(o=this.getData())?o.items:void 0)||[]),a.on("ReceivedMouseUpElsewhere",this.bound("mouseUpHappened"))},e.prototype.instantiateListItems=function(t){var e,n;return n=function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.addItem(e));return o}.call(this),this.emit("AllItemsAddedToList"),n},e.prototype.getIndex=function(t){return this.getOptions().lastToFirst?this.getItemCount()-t-1:t},e.prototype.itemForId=function(t){return this.itemsIndexed[t]},e.prototype.getItemsOrdered=function(){return this.itemsOrdered},e.prototype.getListItems=function(){return this.getListView().items},e.prototype.getItemCount=function(){return this.getListItems().length},e.prototype.setListView=function(t){return this.listView=t},e.prototype.getListView=function(){return this.listView},e.prototype.forEachItemByIndex=function(t,e){var n;return e||(n=[t,e],e=n[0],t=n[1]),Array.isArray(t)||(t=[t]),t.forEach(function(t){return function(n){var i;return i=t.itemsIndexed[n],null!=i?e(i):void 0}}(this))},e.prototype.putNoItemView=function(){var t;return t=this.getOptions().noItemFoundWidget,this.getListView().addSubView(this.noItemView=t)},e.prototype.showNoItemWidget=function(){var t;return 0===this.getListItems().length?(this.emit("ListIsEmptied"),null!=(t=this.noItemView)?t.show():void 0):void 0},e.prototype.hideNoItemWidget=function(){var t;return null!=(t=this.noItemView)&&t.hide(),this.emit("ListIsNoMoreEmpty")},e.prototype.showNoMoreItemWidget=function(){var t;return t=this.getOptions().noMoreItemFoundWidget,t?this.scrollView.addSubView(t):void 0},e.prototype.addItem=function(t,e){return t||null!=e?this.getListView().addItem(t,e):void 0},e.prototype.removeItem=function(t,e,n){return t||e||null!=n?this.getListView().removeItem(t,e,n):void 0},e.prototype.registerItem=function(t){var e,n,i,o,r;return null!=t.getItemDataId()&&(e=t.getItemDataId(),this.itemsIndexed[e]=t),o=this.getOptions(),r=o.selection,n=o.keyNav,i=o.multipleSelection,r&&t.on("click",function(e){return function(n){return e.selectItem(t,n)}}(this)),n||i?(t.on("mousedown",function(e){return function(n){return e.mouseDownHappenedOnItem(t,n)}}(this)),t.on("mouseenter",function(e){return function(n){return e.mouseEnterHappenedOnItem(t,n)}}(this))):void 0},e.prototype.unregisterItem=function(t,e){return this.emit("UnregisteringItem",t,e),null!=t.getData()?delete this.itemsIndexed[t.getItemDataId()]:void 0},e.prototype.replaceAllItems=function(t){return this.removeAllItems(),this.instantiateListItems(t)},e.prototype.removeAllItems=function(){var t;return this.itemsIndexed={},t=this.getListView(),t.items.length&&t.empty(),this.getListItems()},e.prototype.moveItemToIndex=function(t,e){return e=Math.max(0,Math.min(this.getListItems().length-1,e)),this.getListView().moveItemToIndex(t,e).slice()},e.prototype.mouseDownHappenedOnItem=function(t,e){return this.getOptions().keyNav&&n.getSingleton("windowController").setKeyView(this.getListView()),this.lastEvent=e,d.call(this.selectedItems,t)<0?(this.mouseDown=!0,this.mouseDownTempItem=t,this.mouseDownTimer=setTimeout(function(n){return function(){return n.mouseDown=!1,n.mouseDownTempItem=null,n.selectItem(t,e)}}(this),300)):(this.mouseDown=!1,this.mouseDownTempItem=null)},e.prototype.mouseUpHappened=function(){return clearTimeout(this.mouseDownTimer),this.mouseDown=!1,this.mouseDownTempItem=null},e.prototype.mouseEnterHappenedOnItem=function(t,e){return clearTimeout(this.mouseDownTimer),this.mouseDown?(e.metaKey||e.ctrlKey||e.shiftKey||this.deselectAllItems(),this.selectItemsByRange(this.mouseDownTempItem,t)):this.emit("MouseEnterHappenedOnItem",t)},e.prototype.keyDownPerformed=function(t,e){switch(e.which){case 40:case 38:return this.selectItemBelowOrAbove(e),this.emit("KeyDownOnListHandled",this.selectedItems)}},e.prototype.selectItem=function(t,e){var n,i,o,r,s;return null==e&&(e={}),null!=t?(this.lastEvent=e,r=t.getOptions().selectable,o=this.getOptions().multipleSelection,i=e.metaKey,n=e.ctrlKey,s=e.shiftKey,o||this.deselectAllItems(),r&&!(i||n||s)&&this.deselectAllItems(),e.shiftKey&&this.selectedItems.length>0?this.selectItemsByRange(this.selectedItems[0],t):d.call(this.selectedItems,t)<0?this.selectSingleItem(t):this.deselectSingleItem(t),this.selectedItems):void 0},e.prototype.selectItemBelowOrAbove=function(t){var e,n,i,o,r;if(n=40===t.which?"down":"up",e=40===t.which?1:-1,i=this.getListItems(),r=i.indexOf(this.selectedItems[0]),o=i.indexOf(this.selectedItems[this.selectedItems.length-1]),i[r+e]){if(!(t.metaKey||t.ctrlKey||t.shiftKey))return this.selectItem(i[r+e]);if(-1!==this.selectedItems.indexOf(i[o+e])){if(i[o])return this.deselectSingleItem(i[o])}else if(i[o+e])return this.selectSingleItem(i[o+e])}},e.prototype.selectNextItem=function(t){var e,n;return e=this.getListItems(),t||(t=this.selectedItems[0]),n=e.indexOf(t),this.selectItem(e[n+1])},e.prototype.selectPrevItem=function(t){var e,n;return e=this.getListItems(),t||(t=this.selectedItems[0]),n=e.indexOf(t),this.selectItem(e[n+-1])},e.prototype.deselectAllItems=function(){var t,e,n,i,o,r;for(i=this.selectedItems,o=[],e=0,n=i.length;n>e;e++)r=i[e],r.removeHighlight(),t=this.selectedItems.concat([]),this.selectedItems=[],this.getListView().unsetClass("last-item-selected"),o.push(this.itemDeselectionPerformed(t));return o},e.prototype.deselectSingleItem=function(t){var e;return t.removeHighlight(),e=this.getListItems(),this.selectedItems.splice(this.selectedItems.indexOf(t),1),t===e[e.length-1]&&this.getListView().unsetClass("last-item-selected"),this.itemDeselectionPerformed([t])},e.prototype.selectSingleItem=function(t){var e;return e=this.getListItems(),!t.getOption("selectable")||d.call(this.selectedItems,t)>=0?void 0:(t.highlight(),this.selectedItems.push(t),t===e[e.length-1]&&this.getListView().setClass("last-item-selected"),this.itemSelectionPerformed())},e.prototype.selectAllItems=function(){var t,e,n,i,o;for(i=this.getListItems(),o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.selectSingleItem(e));return o},e.prototype.selectItemsByRange=function(t,e){var n,i,o,r,s,a;for(r=this.getListItems(),i=[r.indexOf(t),r.indexOf(e)],i.sort(function(t,e){return t-e}),s=r.slice(i[0],i[1]+1),n=0,a=s.length;a>n;n++)o=s[n],this.selectSingleItem(o);return this.itemSelectionPerformed()},e.prototype.itemSelectionPerformed=function(){return this.emit("ItemSelectionPerformed",this,{event:this.lastEvent,items:this.selectedItems})},e.prototype.itemDeselectionPerformed=function(t){return this.emit("ItemDeselectionPerformed",this,{event:this.lastEvent,items:t})},e.prototype.createLazyLoader=function(){var t,e,o,r;return e=this.getOptions().lazyLoaderOptions,e||(e={}),e.itemClass||(e.itemClass=i),null==e.partial&&(e.partial=""),e.cssClass=n.utils.curry("lazy-loader",e.cssClass),e.spinnerOptions||(e.spinnerOptions={size:{width:32}}),t=e.itemClass,o=e.spinnerOptions,delete e.itemClass,r=this.scrollView||this.getView(),r.addSubView(this.lazyLoader=new t(e)),this.lazyLoader.addSubView(this.lazyLoader.spinner=new a(o))},e.prototype.showLazyLoader=function(t){return null==t&&(t=!0),this.noItemView&&this.getOptions().noItemFoundWidget&&this.hideNoItemWidget(),this.lazyLoader||this.createLazyLoader(),this.lazyLoader.show(),this.lazyLoader.spinner.show(),t?this.emit("LazyLoadThresholdReached"):void 0},e.prototype.hideLazyLoader=function(){return this.lazyLoader?(this.noItemView&&this.getOptions().noItemFoundWidget&&this.showNoItemWidget(),this.lazyLoader.spinner.hide(),this.lazyLoader.hide()):void 0},e}(c)},{"../../core/customhtmlview":96,"../../core/kd":99,"../../core/view":105,"../../core/viewcontroller":106,"../list/listview":52,"../loader/loaderview":55,"../scrollview/customscrollview":64,"../scrollview/scrollview":68}],55:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t("canvas-loader"),i=t("../../core/view"),e.exports=n=function(t){function e(t,n){var i;i=t||{},i.loaderOptions||(i.loaderOptions={}),i.size||(i.size={}),t={tagName:i.tagName||"span",bind:i.bind||"mouseenter mouseleave",showLoader:i.showLoader||!1,size:{width:i.size.width||24,height:i.size.height||24},loaderOptions:{color:i.loaderOptions.color||"#000000",shape:i.loaderOptions.shape||"rect",diameter:i.loaderOptions.diameter||20,density:i.loaderOptions.density||12,range:i.loaderOptions.range||1,speed:i.loaderOptions.speed||1,FPS:i.loaderOptions.FPS||24}},t.loaderOptions.diameter=t.size.height=t.size.width,t.cssClass=i.cssClass?i.cssClass+" kdloader":"kdloader",e.__super__.constructor.call(this,t,n)}return o(e,t),e.prototype.viewAppended=function(){var t,e,n,i,o,s;this.canvas=new CanvasLoader(this.getElement(),{id:"cl_"+this.id}),i=this.getOptions(),e=i.loaderOptions,o=i.showLoader;for(n in e)r.call(e,n)&&(s=e[n],this.canvas["set"+n.capitalize()](s));return t=this.getOption("size").height,this.setCss("line-height",t?t+"px":"initial"),o?this.show():void 0},e.prototype.show=function(){return e.__super__.show.apply(this,arguments),this.active=!0,this.canvas?this.canvas.show():void 0},e.prototype.hide=function(){return e.__super__.hide.apply(this,arguments),this.active=!1,this.canvas?this.canvas.hide():void 0},e}(i)},{"../../core/view":105,"canvas-loader":114}],56:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),r=t("./modalview"),s=t("../overlay/overlayview"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),e.__super__.constructor.call(this,t,i),n(window).off("keydown.modal")}return a(e,t),e.prototype.putOverlay=function(){return this.overlay=new s({isRemovable:!1}),this.overlay.on("click",function(t){return function(){return t.doBlockingAnimation()}}(this))},e.prototype.doBlockingAnimation=function(){return this.setClass("blocking-animation"),i.utils.wait(200,function(t){return function(){return t.unsetClass("blocking-animation")}}(this))},e.prototype.setDomElement=function(t){return this.domElement=n("<div class='kdmodal "+t+"'>\n  <div class='kdmodal-shadow'>\n    <div class='kdmodal-inner'>\n      <div class='kdmodal-title'></div>\n      <div class='kdmodal-content'></div>\n    </div>\n  </div>\n</div>")},e.prototype.click=function(){},e}(r)},{"../../core/kd":99,"../overlay/overlayview":61,"./modalview":57,jquery:111}],57:[function(t,e){var n,i,o,r,s,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),l=t("../../core/view"),a=t("../overlay/overlayview"),o=t("../buttons/buttonview"),s=t("./modalviewstack"),e.exports=r=function(t){function e(t,i){var o;null==t&&(t={}),null==t.overlay&&(t.overlay=!1),null==t.overlayClick&&(t.overlayClick=!0),t.height||(t.height="auto"),null==t.width&&(t.width=600),t.position||(t.position={}),t.title||(t.title=null),t.subtitle||(t.subtitle=null),t.content||(t.content=null),t.buttons||(t.buttons=null),null==t.fx&&(t.fx=!1),t.view||(t.view=null),null==t.draggable&&(t.draggable={handle:".kdmodal-title"}),null==t.resizable&&(t.resizable=!1),null==t.appendToDomBody&&(t.appendToDomBody=!0),t.helpContent||(t.helpContent=null),t.helpTitle||(t.helpTitle="Need help?"),null==t.cancelable&&(t.cancelable=!0),e.__super__.constructor.call(this,t,i),this.setClass("initial"),t.overlay&&this.putOverlay(t.overlay),t.fx&&this.setClass("fx"),t.title&&this.setTitle(t.title),t.subtitle&&this.setSubtitle(t.subtitle),t.content&&this.setContent(t.content),t.view&&this.addSubView(t.view),t.cancel&&this.on("ModalCancelled",t.cancel),this.on("viewAppended",function(t){return function(){return t.utils.wait(500,function(){return t.unsetClass("initial")})}}(this)),this.getOptions().appendToDomBody&&this.appendToDomBody(),this.setModalWidth(t.width),t.height&&this.setModalHeight(t.height),t.buttons&&(this.buttonHolder=new l({cssClass:"kdmodal-buttons clearfix"}),this.addSubView(this.buttonHolder,".kdmodal-inner"),this.setButtons(t.buttons),o=this.$(".kdmodal-inner").width(),this.buttonHolder.setWidth(o)),this.display(),this._windowDidResize(),n(window).one("keydown.modal",function(t){return function(e){return 27===e.which?t.cancel():void 0}}(this)),this.on("childAppended",this.setPositions.bind(this)),this.listenWindowResize()}return u(e,t),e.prototype.setDomElement=function(t){var e,i,o,r;return r=this.getOptions(),i=r.helpContent,o=r.helpTitle,e=i?"<span class='showHelp'>"+o+"</span>":"",this.domElement=n("<div class='kdmodal "+t+"'>\n  <div class='kdmodal-inner'>\n    "+e+"\n    <span class='close-icon closeModal' title='Close [ESC]'></span>\n    <div class='kdmodal-title hidden'></div>\n    <div class='kdmodal-content'></div>\n  </div>\n</div>")},e.prototype.addSubView=function(t,n,i){return null==n&&(n=".kdmodal-content"),null==i&&(i=!1),0===this.$(n).length&&(n=null),e.__super__.addSubView.call(this,t,n,i)},e.prototype.setButtons=function(t,e){var n,i,o,r,s,a;null==e&&(e=!1),this.buttons||(this.buttons={}),this.setClass("with-buttons"),r=null,e&&this.destroyButtons();for(o in t)c.call(t,o)&&(i=t[o],null==r&&(r=o),n=this.createButton(i.title||o,i),this.buttons[o]=n,i.focus&&(s=!0));return!s&&r&&null!=(a=this.buttons[r])?a.setFocus():void 0},e.prototype.destroyButtons=function(){var t,e,n,i;n=this.buttons,i=[];for(t in n)c.call(n,t)&&(e=n[t],i.push(e.destroy()));return i},e.prototype.click=function(t){var o;return n(t.target).is(".closeModal")&&this.cancel(),n(t.target).is(".showHelp")&&(o=this.getOptions().helpContent)?(o=i.utils.applyMarkdown(o),new e({cssClass:"help-dialog",overlay:!0,content:"<div class='modalformline'><p>"+o+"</p></div>"})):void 0},e.prototype.setTitle=function(t){return this.$().find(".kdmodal-title").removeClass("hidden").html("<span class='title'>"+t+"</span>"),this.modalTitle=t},e.prototype.setSubtitle=function(t){return this.$().find(".kdmodal-title").append("<span class='subtitle'>"+t+"</span>"),this.modalSubtitle=t},e.prototype.setModalHeight=function(t){return"auto"===t?(this.$().css("height","auto"),this.modalHeight=this.getHeight()):(this.$().height(t),this.modalHeight=t)},e.prototype.setModalWidth=function(t){return this.modalWidth=t,this.$().width(t)},e.prototype.setPositions=function(){return this.utils.defer(function(t){return function(){var e,i,o,r,s,a,l,u;return s=t.getOptions().position,l=s.top,a=s.right,e=s.bottom,o=s.left,r={},i=n(window).height(),u=n(window).width(),r.top=Math.round(null!=l?l:i/2-t.getHeight()/2),r.left=Math.round(null!=o?o:u/2-t.modalWidth/2),a&&(r.left=Math.round(u-t.modalWidth-a-20)),r.opacity=1,t.$().css(r)}}(this))},e.prototype._windowDidResize=function(){var t;return this.setPositions(),t=window.innerHeight,this.$(".kdmodal-content").css({maxHeight:t-120}),this.getOptions().position.top?void 0:this.setY(Math.round((t-this.getHeight())/2))},e.prototype.putOverlay=function(){var t,e,n;return n=this.getOptions(),e=n.overlayOptions,t=n.overlayClick,null==e&&(e={}),null==e.isRemovable&&(e.isRemovable=t),this.overlay=new a(e),t?this.overlay.once("click",this.bound("destroy")):void 0},e.prototype.createButton=function(t,e){var n,i;return e.title=t,e.delegate=this,i=e.itemClass,delete e.itemClass,this.buttonHolder.addSubView(n=new(i||o)(e)),n.on("KDModalShouldClose",function(t){return function(){return t.emit("KDModalShouldClose")}}(this)),n},e.prototype.setContent=function(t){return this.modalContent=t,this.getDomElement().find(".kdmodal-content").html(t)},e.prototype.display=function(){return this.getOptions().fx?this.utils.defer(function(t){return function(){return t.setClass("active")}}(this)):void 0},e.prototype.cancel=function(){return this.getOptions().cancelable?(this.emit("ModalCancelled"),this.destroy()):void 0},e.prototype.destroy=function(){var t,e;return n(window).off("keydown.modal"),e=l.prototype.destroy.bind(this),this.options.fx?(this.unsetClass("active"),setTimeout(e,300)):(this.getDomElement().hide(),e()),null!=(t=this.overlay)&&t.destroy(),this.emit("KDModalViewDestroyed",this)},e.prototype.hide=function(){var t;return null!=(t=this.overlay)&&t.hide(),e.__super__.hide.apply(this,arguments)},e.prototype.show=function(){var t;return null!=(t=this.overlay)&&t.show(),e.__super__.show.apply(this,arguments)},e.createStack=function(t){return this.stack||(this.stack=new s(t))},e.addToStack=function(t){return this.stack.addModal(t)},e.destroyStack=function(){return this.stack.destroy(),delete this.stack},e.confirm=function(t){var e,n,i,o,r,s,a;return r=function(){return o.destroy()},s=t.ok,e=t.cancel,a=t.title,n=t.content,i=t.description,s&&"function"!=typeof s||(s={callback:s}),e&&"function"!=typeof e||(e={callback:e}),o=new this({title:a||"You must confirm this action",content:n||(i?"<div class='modalformline'>\n  <p>"+i+"</p>\n</div>":void 0),overlay:!0,buttons:{OK:{title:s.title,style:s.style||"modal-clean-red",callback:s.callback||r},cancel:{title:e.title,style:e.style||"modal-cancel",callback:e.callback||r}}}),t.subView&&o.addSubView(t.subView),o},e}(l)},{"../../core/kd":99,"../../core/view":105,"../buttons/buttonview":18,"../overlay/overlayview":61,"./modalviewstack":58,jquery:111}],58:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("../../core/kd"),i=t("./modalview"),r=t("../../core/object"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),null==t.lastToFirst&&(t.lastToFirst=!1),e.__super__.constructor.call(this,t,n),this.modals=[]}return s(e,t),e.prototype.addModal=function(t){var e;return t instanceof i?(t.on("KDObjectWillBeDestroyed",function(t){return function(){return t.next()}}(this)),e=this.getOptions().lastToFirst,this.modals.push(t),n.utils.defer(function(n){return function(){return t.hide(),e?(n.modals.forEach(function(t){return t.hide()}),n.modals.last.show()):n.modals.first.show()}}(this)),t):n.warn("You can only add KDModalView instances to the modal stack.")},e.prototype.next=function(){var t,e,n;return t=this.getOptions().lastToFirst,t?(this.modals.pop(),null!=(e=this.modals.last)?e.show():void 0):(this.modals.shift(),null!=(n=this.modals.first)?n.show():void 0)},e.prototype.destroy=function(){return this.modals.forEach(function(t){return n.utils.defer(function(){return t.destroy()})}),this.modals=[],e.__super__.destroy.apply(this,arguments)},e}(r)},{"../../core/kd":99,"../../core/object":102,"./modalview":57}],59:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("./modalview"),o=t("../tabs/tabviewwithforms"),e.exports=i=function(t){function e(t,n){this.modalButtons=[],e.__super__.constructor.call(this,t,n),this.addSubView(this.modalTabs=new o(t.tabs))}return r(e,t),e.prototype.aggregateFormData=function(){var t,e,n;return t=function(){var t,i;t=this.modalTabs.forms,i=[];for(n in t)s.call(t,n)&&(e=t[n],i.push({name:n,data:e.getData()}));return i}.call(this),t.reduce(function(t,e){var n,i,o;i=e.data;for(n in i)s.call(i,n)&&(o=i[n],n in t&&console.warn("Property "+n+" will be overwitten!"),t[n]=o);return t},{})},e}(n)},{"../tabs/tabviewwithforms":82,"./modalview":57}],60:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),r=t("../../core/view"),i=t("../loader/loaderview"),e.exports=o=function(t){function e(t){e.__super__.constructor.call(this,t),t=this.notificationSetDefaults(t),this.notificationSetType(t.type),null!=t.title&&this.notificationSetTitle(t.title),null!=t.content&&this.notificationSetContent(t.content),null!=t.duration&&this.notificationSetTimer(t.duration),null!=t.overlay&&this.notificationSetOverlay(t.overlay),null!=t.followUps&&this.notificationSetFollowUps(t.followUps),null!=t.showTimer&&this.notificationShowTimer(),this.notificationSetCloseHandle(t.closeManually),t.loader&&this.once("viewAppended",this.bound("setLoader")),this.notificationDisplay()}return s(e,t),e.prototype.setDomElement=function(t){return null==t&&(t=""),this.domElement=n("<div class='kdnotification "+t+"'> <a class='kdnotification-close hidden'></a> <div class='kdnotification-timer hidden'></div> <div class='kdnotification-title'></div> <div class='kdnotification-content hidden'></div> </div>")},e.prototype.destroy=function(){return this.notificationCloseHandle.unbind(".notification"),null!=this.notificationOverlay&&this.notificationOverlay.remove(),e.__super__.destroy.call(this),this.notificationStopTimer(),this.notificationRepositionOtherNotifications()},e.prototype.viewAppended=function(){return this.notificationSetPositions()},e.prototype.notificationSetDefaults=function(t){return null==t.duration&&(t.duration=1500),(t.duration>2999||0===t.duration)&&null==t.closeManually&&(t.closeManually=!0),t},e.prototype.notificationSetTitle=function(t){return t instanceof r?(this.notificationTitle&&this.notificationTitle instanceof r&&this.notificationTitle.destroy(),this.addSubView(t,".kdnotification-title")):this.$().find(".kdnotification-title").html(t),this.notificationTitle=t},e.prototype.notificationSetType=function(t){return null==t&&(t="main"),this.notificationType=t},e.prototype.notificationSetPositions=function(){var t,e,i,o,r,s,a,l,u,c,p,h;switch(this.setClass(this.notificationType),l=n("body").find(".kdnotification."+this.notificationType),this.getOptions().container?(p=this.getOptions().container.getHeight(),h=this.getOptions().container.getWidth()):(h=window.innerWidth,p=window.innerHeight),this.notificationType){case"tray":for(t=8,e=i=0,r=l.length;r>i;e=++i)a=l[e],0!==e&&(t+=n(a).outerHeight(!1)+8);u={bottom:t,right:8,paddingRight:this.options.content&&this.options.title?10:25};break;case"growl":for(c=63,e=o=0,s=l.length;s>o;e=++o)a=l[e],0!==e&&(c+=n(a).outerHeight(!1)+8);u={top:c,right:8};break;case"mini":u={top:0,left:h/2-this.getDomElement().width()/2};break;case"sticky":u={top:0,left:h/2-this.getDomElement().width()/2};break;default:u={top:p/2-this.getDomElement().height()/2,left:h/2-this.getDomElement().width()/2}}return this.getDomElement().css(u)},e.prototype.notificationRepositionOtherNotifications=function(){var t,e,i,o,r,s,a,l,u,c,p,h,d,f,m;for(m=n("body").find(".kdnotification."+this.notificationType),i=function(){var e,i,r;for(r=[],o=e=0,i=m.length;i>e;o=++e)t=m[o],r.push(n(t).outerHeight(!1));return r}(),f=[],o=s=0,l=m.length;l>s;o=++s)switch(t=m[o],this.notificationType){case"tray":case"growl":for(c=0,h="tray"===this.notificationType?"bottom":"top",d=i.slice(0,+o+1||9e9),r=a=0,u=d.length;u>a;r=++a)e=d[r],0!==r?c+=e:c=8;p={},p[h]=c+8*o,f.push(n(t).css(p));break;default:f.push(void 0)}return f},e.prototype.notificationSetCloseHandle=function(t){return null==t&&(t=!1),this.notificationCloseHandle=this.getDomElement().find(".kdnotification-close"),t&&this.notificationCloseHandle.removeClass("hidden"),this.notificationCloseHandle.bind("click.notification",function(t){return function(){return t.destroy()}}(this)),n(window).bind("keydown.notification",function(t){return function(e){return 27===e.which?t.destroy():void 0}}(this))},e.prototype.notificationSetTimer=function(t){return 0!==t?(this.notificationTimerDiv=this.getDomElement().find(".kdnotification-timer"),this.notificationTimerDiv.text(Math.floor(t/1e3)),this.notificationTimeout=setTimeout(function(t){return function(){return t.getDomElement().fadeOut(200,function(){return t.destroy()})}}(this),t),this.notificationInterval=setInterval(function(t){return function(){var e;return e=parseInt(t.notificationTimerDiv.text(),10)-1,t.notificationTimerDiv.text(e)}}(this),1e3)):void 0},e.prototype.notificationSetFollowUps=function(t){var e;return Array.isArray(t)||(t=[t]),e=0,t.forEach(function(t){return function(n){var i;return e+=null!=(i=n.duration)?i:1e4,t.utils.wait(e,function(){return n.title&&t.notificationSetTitle(n.title),n.content&&t.notificationSetContent(n.content),t.notificationSetPositions()})}}(this))},e.prototype.notificationShowTimer=function(){return this.notificationTimerDiv.removeClass("hidden"),this.getDomElement().bind("mouseenter",function(t){return function(){return t.notificationStopTimer()}}(this)),this.getDomElement().bind("mouseleave",function(t){return function(){var e;return e=1e3*parseInt(t.notificationTimerDiv.text(),10),t.notificationSetTimer(e)}}(this))},e.prototype.notificationStopTimer=function(){return clearTimeout(this.notificationTimeout),clearInterval(this.notificationInterval)},e.prototype.notificationSetOverlay=function(t){return null==t.transparent&&(t.transparent=!0),null==t.destroyOnClick&&(t.destroyOnClick=!0),this.notificationOverlay=n("<div/>",{"class":"kdoverlay transparent"}),this.notificationOverlay.hide(),t.transparent||this.notificationOverlay.removeClass("transparent"),this.notificationOverlay.appendTo("body"),this.notificationOverlay.fadeIn(200),this.notificationOverlay.bind("click",function(e){return function(){return t.destroyOnClick?e.destroy():void 0}}(this))},e.prototype.notificationGetOverlay=function(){return this.notificationOverlay},e.prototype.setLoader=function(){var t,e,n,o,r,s;return this.setClass("w-loader"),e=this.getOptions().loader,t={tray:25,growl:30,mini:18,sticky:25},e.diameter=t[this.notificationType]||30,this.loader=new i({size:{width:e.diameter},loaderOptions:{color:e.color||"#ffffff",shape:e.shape||"spiral",diameter:e.diameter,density:null!=(n=e.density)?n:30,range:null!=(o=e.range)?o:.4,speed:null!=(r=e.speed)?r:1.5,FPS:null!=(s=e.FPS)?s:24}}),this.addSubView(this.loader,null,!0),this.setCss("paddingLeft",2*e.diameter),this.loader.setStyle({position:"absolute",left:e.left||Math.floor(e.diameter/2),top:e.top||"50%",marginTop:-(e.diameter/2)}),this.loader.show()},e.prototype.showLoader=function(){return this.setClass("loading"),this.loader.show()},e.prototype.hideLoader=function(){return this.unsetClass("loading"),this.loader.hide()},e.prototype.notificationSetContent=function(t){return this.notificationContent=t,this.getDomElement().find(".kdnotification-content").removeClass("hidden").html(t)},e.prototype.notificationDisplay=function(){return this.getOptions().container?this.getOptions().container.addSubView(this):this.appendToDomBody()
},e}(r)},{"../../core/view":105,"../loader/loaderview":55,jquery:111}],61:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),null==t.isRemovable&&(t.isRemovable=!0),null==t.animated&&(t.animated=!1),null==t.color&&(t.color=!1),null==t.transparent&&(t.transparent=!1),null==t.opacity&&(t.opacity=.5),null==t.appendToDomBody&&(t.appendToDomBody=!0),t.cssClass=n.utils.curry("kdoverlay",t.cssClass),e.__super__.constructor.call(this,t,i),t.animated&&this.setClass("animated"),t.transparent&&this.setClass("transparent"),t.color&&this.setStyle({backgroundColor:t.color,opacity:t.opacity}),t.container instanceof o?(t.container.addSubView(this),this.setCss("position","absolute")):t.appendToDomBody&&this.appendToDomBody(),t.animated?(this.utils.defer(function(t){return function(){return t.setClass("in")}}(this)),this.utils.wait(300,function(t){return function(){return t.emit("OverlayAdded",t)}}(this))):this.emit("OverlayAdded",this),t.isRemovable&&(t.animated?this.once("click",function(t){return function(){return t.unsetClass("in"),t.utils.wait(300,function(){return t.remove()})}}(this)):this.once("click",function(t){return function(){return t.remove()}}(this)))}return r(e,t),e.prototype.remove=function(){return this.emit("OverlayWillBeRemoved"),this.destroy(),this.emit("OverlayRemoved",this)},e}(o)},{"../../core/kd":99,"../../core/view":105}],62:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kdspotlightview",t.cssClass),null==t.margin&&(t.margin=50),null==t.radial&&(t.radial=!0),null==t.isRemovable&&(t.isRemovable=!0),e.__super__.constructor.call(this,t,i),t.radial||this.setClass("shadow"),this.createElements(),this.appendToDomBody()}return r(e,t),e.prototype.createElements=function(){var t,e,i,r,s,a,l,u,c,p;i=this.getOptions().isRemovable,a=this.getBoundaries(),l=[];for(s in a)t=a[s],p=t.width,e=t.height,u=t.top,r=t.left,p>0&&e>0?(c=new o({cssClass:n.utils.curry("kdoverlay",s),size:{width:p,height:e},position:{top:u,left:r}}),i&&c.on("click",function(t){return function(){return t.destroy(),t.emit("OverlayDestroyed")}}(this)),l.push(this.addSubView(c))):l.push(void 0);return l},e.prototype.getBoundaries=function(){var t,e,n,i,o,r,s,a,l,u,c,p,h;return a=this.getOptions().radial,n=this.getDelegate(),l=n.getY(),o=n.getX(),c=n.getWidth(),i=n.getHeight(),s=this.getOption("margin"),h=window.innerWidth,p=window.innerHeight,a&&(c=i=Math.min(c,i)),u=l-s,r=o-s,t=p-(l+i+s),e={top:{top:0,left:0,width:h,height:u},left:{top:u,left:0,width:r,height:p-l+s},bottom:{top:l+i+s,left:r,width:h-o+s,height:t},right:{top:u,left:o+c+s,width:h-(o+c+s),height:p-(t+u)},main:{top:u,left:r,width:c+s+s,height:i+s+s}}},e}(o)},{"../../core/kd":99,"../../core/view":105}],63:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),i=t("../../core/customhtmlview"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("progressbar-container",t.cssClass),null==t.determinate&&(t.determinate=!0),null==t.initial&&(t.initial=!1),null==t.title&&(t.title=""),e.__super__.constructor.call(this,t,i)}return r(e,t),e.prototype.viewAppended=function(){var t,e,n;return e=this.getOptions(),t=e.initial,n=e.title,this.createBar(),this.updateBar(t||1,"%",n)},e.prototype.createBar=function(t,e){return null==e&&(e=this.getOptions().title),this.addSubView(this.bar=new i({cssClass:"bar"})),this.addSubView(this.spinner=new i({cssClass:"bar spinner hidden"})),this.addSubView(this.darkLabel=new i({tagName:"span",cssClass:"dark-label"})),this.bar.addSubView(this.lightLabel=new i({tagName:"span",cssClass:"light-label"})),this.lightLabel.setWidth(this.getWidth())},e.prototype.updateBar=function(t,e,n){var i;return null==e&&(e="%"),null==n&&(n=this.getOptions().title),i=this.getOptions().determinate,i?(this.bar.show(),this.spinner.hide(),this.bar.setWidth(t,e),this.darkLabel.updatePartial(n+"&nbsp;"),this.lightLabel.updatePartial(n+"&nbsp;")):(this.bar.hide(),this.spinner.show())},e}(i)},{"../../core/customhtmlview":96,"../../core/kd":99}],64:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),i=t("../../core/customhtmlview"),s=t("./scrolltrack"),r=t("./customscrollviewinner"),e.exports=o=function(t){function e(t,i){var o,a,l,u,c;null==t&&(t={}),t.bind=n.utils.curry("mouseenter mouseleave",t.bind),t.cssClass=n.utils.curry("kdcustomscrollview",t.cssClass),null==t.mouseWheelSpeed&&(t.mouseWheelSpeed=3),e.__super__.constructor.call(this,t,i),u=this.getOptions(),l=u.mouseWheelSpeed,a=u.lazyLoadThreshold,c=u.wrapperClass,null!=t.offscreenIndicatorClassName&&this.listenWindowResize(),o=c||r,this.wrapper=new o({tagName:"main",lazyLoadThreshold:a,mouseWheelSpeed:l,scroll:null!=t.offscreenIndicatorClassName?this.bound("updateOffscreenIndicators"):void 0}),this.verticalTrack=new s({delegate:this.wrapper}),this.horizontalTrack=new s({delegate:this.wrapper,type:"horizontal"}),this.wrapper.verticalThumb=this.verticalTrack.thumb,this.wrapper.horizontalThumb=this.horizontalTrack.thumb,this.wrapper.on("ScrollTrackShown",function(t){return function(e){return t.setClass("has-"+e)}}(this)),this.wrapper.on("ScrollTrackHidden",function(t){return function(e){return t.unsetClass("has-"+e)}}(this)),this.wrapper.on("MutationHappened",function(t){return function(){return t.verticalTrack.thumb.reset(),t.horizontalTrack.thumb.reset()}}(this)),this.on("mouseenter",this.bound("showTracks")),this.on("mouseleave",this.bound("hideTracks"))}var i;return a(e,t),e.prototype._windowDidResize=function(){return this.updateOffscreenIndicators()},e.prototype.updateOffscreenIndicators=function(){var t,e,i,o,r;return r=this.wrapper.getElement(),i=this.getOptions().offscreenIndicatorClassName,o=[].slice.call(r.getElementsByClassName(i)).reduce(function(t,e){var i,o,s;return o=n.utils.relativeOffset(e,r),i=o[0],s=o[1],s<r.scrollTop?t.above.push(e):s>r.scrollTop+r.offsetHeight&&t.below.push(e),t},{above:[],below:[]}),t=o.above,e=o.below,t.length>0?this.emit("OffscreenItemsAbove",t):this.emit("NoOffscreenItemsAbove"),e.length>0?this.emit("OffscreenItemsBelow",e):this.emit("NoOffscreenItemsBelow")},e.prototype.viewAppended=function(){return this.addSubView(this.wrapper),this.addSubView(this.verticalTrack),this.addSubView(this.horizontalTrack),this.wrapper.observeMutations()},i=null,e.prototype.hideTracks=function(){return i=n.utils.wait(1e3,function(t){return function(){return t.verticalTrack.setClass("out"),t.horizontalTrack.setClass("out")}}(this))},e.prototype.showTracks=function(){return i&&n.utils.killWait(i),this.verticalTrack.unsetClass("out"),this.horizontalTrack.unsetClass("out")},e}(i)},{"../../core/customhtmlview":96,"../../core/kd":99,"./customscrollviewinner":65,"./scrolltrack":67}],65:[function(t,e){var n,i,o,r,s,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=t("../../core/kd"),o=t("../../core/customhtmlview"),l=t("./scrollview"),s=t("./scrollthumb"),a=t("./scrolltrack"),n=t("hammerjs"),e.exports=r=function(t){function e(t,o){var r,s,a,l;null==t&&(t={}),e.__super__.constructor.call(this,t,o),i.utils.isTouchDevice()&&(s=new n(this.getElement()),s.get("pan").set({direction:n.DIRECTION_ALL}),a=l=0,r=function(t){var e,n,i,o,r,s,u,c,p;return t.stopPropagation=function(){},t.preventDefault=function(){},c=t.velocityX,p=t.velocityY,r=t.deltaX,s=t.deltaY,u=t.direction,e=r,n=s,i=Math.min(.5,c*(16===u?-1:1)),o=Math.min(.5,p*(16===u?-1:1)),t.deltaX=(e-a)*i,t.deltaY=(n-l)*o,a=e,l=n,t},s.on("panend pancancel",function(){return a=l=0}),s.on("panup pandown",function(t){return function(e){return t.mouseWheel(r(e))}}(this)))}return u(e,t),e.prototype.scroll=function(t){return this.verticalThumb.beingDragged||this.horizontalThumb.beingDragged?i.utils.stopDOMEvent(t):void 0},e.prototype.mouseWheel=function(t){var n,o,r,s,a,l,u,c,p;return e.__super__.mouseWheel.apply(this,arguments),o=t.deltaX,r=t.deltaY,n=t.deltaFactor,l=n||this.getOptions().mouseWheelSpeed||1,c=-o,p=-r,s=0!==c&&this.getScrollWidth()>this.horizontalThumb.getTrackSize()?this._scrollHorizontally({speed:l,velocity:c}):!1,a=0!==p&&this.getScrollHeight()>this.verticalThumb.getTrackSize()?this._scrollVertically({speed:l,velocity:p}):!1,u=Math.abs(c)>Math.abs(p)?s:a,u||i.utils.stopDOMEvent(t),!u},e.prototype._scrollVertically=function(){var t;return t=0,function(e){var n,i,o,r,s,a;return r=e.speed,a=e.velocity,s=a*r,n=this.getScrollTop(),i=n+s,o=a>0?t>i:i>t,this.setScrollTop(t=i),o}}(),e.prototype._scrollHorizontally=function(){var t;return t=0,function(e){var n,i,o,r,s,a;return r=e.speed,a=e.velocity,s=a*r,n=this.getScrollLeft(),i=n-s,o=a>0?i>t:t>i,this.setScrollLeft(t=i),o}}(),e}(l)},{"../../core/customhtmlview":96,"../../core/kd":99,"./scrollthumb":66,"./scrolltrack":67,"./scrollview":68,hammerjs:109}],66:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){var o;null==t&&(t={}),t.type||(t.type="vertical"),t.cssClass=n.utils.curry("kdscrollthumb",t.cssClass),null==t.draggable&&(t.draggable={axis:"vertical"===t.type?"y":"x",containment:this}),e.__super__.constructor.call(this,t,i),o=this.getOptions(),this.type=o.type,this.track=o.track,this.view=this.track.getDelegate(),this.on("viewAppended",this.bound("calculateSize")),this.on("DragInAction",this.bound("handleDrag")),this.view.on("scroll",this.bound("calculatePosition")),this.listenWindowResize()}return r(e,t),e.prototype.resetSizes=function(){return this.size=null,this.trackSize=null,this.scrollSize=null},e.prototype.reset=function(){return this.resetSizes(),this.calculateSize(),this.calculatePosition()},e.prototype.handleDrag=function(){var t,e,n,i,o,r;return i=this.getSize(),e=this.getOffset(),o=this.getSize(!0)-this.size,r=this.getTrackSize()-o,t=r-i,n=Math.min(Math.max(0,e/t),1),this.isVertical()?this.view.setScrollTop((this.view.getScrollHeight()-r)*n):this.view.setScrollLeft((this.view.getScrollWidth()-r)*n)},e.prototype.isVertical=function(){return"vertical"===this.type},e.prototype.getTrackSize=function(){return this.trackSize?this.trackSize:this.isVertical()?this.track.getHeight():this.track.getWidth()},e.prototype.setSize=function(t){return this.isVertical()?this.setHeight(t):this.setWidth(t),this.size=t},e.prototype.getSize=function(t){return this.size&&!t?this.size:this.isVertical()?this.getHeight():this.getWidth()},e.prototype.setOffset=function(t){return this.setStyle(this.isVertical()?{top:t}:{left:t})},e.prototype.getOffset=function(){return this.isVertical()?this.getY()-this.track.getY():this.getX()-this.track.getX()},e.prototype.getScrollOffset=function(){return this.isVertical()?this.view.getScrollTop():this.view.getScrollLeft()},e.prototype.getScrollSize=function(){return this.scrollSize?this.scrollSize:this.isVertical()?this.view.getScrollHeight():this.view.getScrollWidth()},e.prototype.calculateSize=function(){return this.trackSize=this.getTrackSize(),this.scrollSize=this.getScrollSize(),this.setTrackVisibility(),this.setSize(this.trackSize*this.trackSize/this.scrollSize)},e.prototype.calculatePosition=function(){var t,e,n;return t=this.getScrollOffset()/this.getScrollSize(),e=this.getSize(!0)-this.size,n=this.getTrackSize(),this.setTrackVisibility(),this.setOffset((n-e)*t)},e.prototype.setTrackVisibility=function(){return this.getTrackSize()>=this.getScrollSize()?this.track.hide():this.track.show()},e.prototype._windowDidResize=function(){return this.reset()},e}(o)},{"../../core/kd":99,"../../core/view":105}],67:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("../../core/kd"),r=t("../../core/view"),i=t("./scrollthumb"),e.exports=o=function(t){function e(t,o){null==t&&(t={}),t.type||(t.type="vertical"),t.cssClass=n.utils.curry("kdscrolltrack "+t.type+" out",t.cssClass),e.__super__.constructor.call(this,t,o),this.type=this.getOptions().type,this.scrollView=this.getDelegate(),this.addSubView(this.thumb=new i({cssClass:"kdscrollthumb",type:this.type,track:this}))}return s(e,t),e.prototype.click=function(t){var e,n,i,o;if(!(l.call(t.target.classList,"kdscrolltrack")<0))return o=this.thumb.getSize(!0),"vertical"===this.type?(n=this.scrollView.getScrollHeight(),e=t.originalEvent.layerY||t.offsetY,this.scrollView.scrollTo({top:(e-o/2)/this.getHeight()*n})):(i=this.scrollView.getScrollWidth(),e=t.originalEvent.layerX||t.offsetX,this.scrollView.scrollTo({left:(e-o/2)/this.getWidth()*i}))},e.prototype.show=function(){return this.getDelegate().emit("ScrollTrackShown",this.type),this.unsetClass("invisible")},e.prototype.hide=function(){return this.getDelegate().emit("ScrollTrackHidden",this.type),this.setClass("invisible")},e}(r)},{"../../core/kd":99,"../../core/view":105,"./scrollthumb":66}],68:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),t("jquery-mousewheel")(n),r=t("../../core/view"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),t.bind=i.utils.curry("mousewheel scroll",t.bind),t.cssClass=i.utils.curry("kdscrollview",t.cssClass),e.__super__.constructor.call(this,t,n),this.stopScrolling=!1}return s(e,t),e.prototype.hasScrollBars=function(){return this.hasVerticalScrollBars()||this.hasHorizontalScrollBars()},e.prototype.hasVerticalScrollBars=function(){return this.getScrollHeight()>this.getHeight()},e.prototype.hasHorizontalScrollBars=function(){return this.getScrollWidth()>this.getWidth()},e.prototype.getScrollHeight=function(){return this.getElement().scrollHeight},e.prototype.getScrollWidth=function(){return this.getElement().scrollWidth},e.prototype.getScrollTop=function(){return this.getElement().scrollTop},e.prototype.getScrollLeft=function(){return this.getElement().scrollLeft},e.prototype.setScrollHeight=function(t){return this.getElement().scrollHeight=t},e.prototype.setScrollWidth=function(t){return this.getElement().scrollWidth=t},e.prototype.setScrollTop=function(t){return this.getElement().scrollTop=t},e.prototype.setScrollLeft=function(t){return this.getElement().scrollLeft=t},e.prototype.scrollTo=function(t,e){var n,i,o;return o=t.top,i=t.left,n=t.duration,o||(o=0),i||(i=0),null!=n?this.$().animate({scrollTop:o,scrollLeft:i},n,e):(this.setScrollTop(o),this.setScrollLeft(i),"function"==typeof e?e():void 0)},e.prototype.scrollToBottom=function(){return this.scrollTo({top:this.getScrollHeight()-this.getHeight()})},e.prototype.scrollToSubView=function(t){var e,n,i,o,r,s;if(s=this.getY(),o=this.getHeight(),r=this.getScrollTop(),i=t.getY(),e=t.getHeight(),n=i-s+r,o>i-s+e&&i-s>=0);else{if(0>i-s)return this.scrollTo({top:n});if(i-s+e>o)return this.scrollTo({top:n-o+e})}},e.prototype.isAtBottom=function(){return this.getScrollTop()+this.getHeight()>=this.getScrollHeight()},e.prototype.mouseWheel=function(){return this.stopScrolling?!1:!0},e}(r)},{"../../core/kd":99,"../../core/view":105,jquery:111,"jquery-mousewheel":110}],69:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=t("../../core/customhtmlview"),e.exports=i=function(t){function e(t){null==t&&(t={}),t.tagName="a",t.cssClass="handle",null==t.value&&(t.value=0),t.draggable={axis:"x"},e.__super__.constructor.call(this,t),this.value=this.getOption("value")}return o(e,t),e.prototype.attachEvents=function(){var t,e,n,i,o;return i=this.parent.getOptions(),e=i.maxValue,n=i.minValue,o=i.width,t=this.value,this.on("DragStarted",function(){return t=this.value}),this.on("DragInAction",function(){var i,r;return i=this.dragState.position.relative.x,r=(e-n)*i/o,this.setValue(t+r),this.parent.getOption("snapOnDrag")?this.snap():void 0}),this.on("DragFinished",function(){return this.parent.getOption("snap")?this.snap():void 0})},e.prototype.getPosition=function(){var t,e,n,i,o,r;return o=this.parent.getOptions(),t=o.maxValue,e=o.minValue,r=this.parent.getWidth(),n=100*(this.value-e)/(t-e),i=r/100*n,i+"px"},e.prototype.setValue=function(t){var e,n,i;return n=this.getOptions(),e=n.leftLimit,i=n.rightLimit,"number"==typeof i&&(t=Math.min(t,i)),"number"==typeof e&&(t=Math.max(t,e)),this.value=t,this.setX(this.getPosition()),this.parent.setValue(t,this,!1)},e.prototype.getSnappedValue=function(t){var e,n,i;return e=this.parent.getOptions().interval,t||(t=this.value),e?(i=t%e,n=e/2,t=function(){switch(!1){case!(n>=i):return t-i;case!(i>n):return t+(e-i);default:return t}}()):void 0},e.prototype.snap=function(){var t,e;return t=this.parent.getOptions().interval,e=this.getSnappedValue(),t&&this.parent.getOption("snap")&&(this.setValue(e),this.parent.getOption("drawBar"))?this.parent.drawBar():void 0},e.prototype.viewAppended=function(){return this.setX(""+this.getPosition()),this.attachEvents(),this.parent.getOption("snap")?this.snap():void 0},e}(n)},{"../../core/customhtmlview":96}],70:[function(t,e){var n,i,o,r,s=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),i=t("../../core/customhtmlview"),o=t("./sliderbarhandleview"),e.exports=r=function(t){function e(t,i){null==t&&(t={}),null==i&&(i={}),this._createLabel=s(this._createLabel,this),t.cssClass=n.utils.curry("sliderbar-container",t.cssClass),null==t.minValue&&(t.minValue=0),null==t.maxValue&&(t.maxValue=100),null==t.interval&&(t.interval=!1),null==t.drawBar&&(t.drawBar=!0),null==t.showLabels&&(t.showLabels=!0),null==t.snap&&(t.snap=!0),null==t.snapOnDrag&&(t.snapOnDrag=!1),t.width||(t.width=300),null==t.drawOpposite&&(t.drawOpposite=!1),e.__super__.constructor.call(this,t,i),this.handles=[],this.labels=[]}return a(e,t),e.prototype.createHandles=function(){var t,e,n,i,r,s;for(i=this.getOption("handles"),e=0,n=i.length;n>e;e++)s=i[e],this.handles.push(this.addSubView(t=new o({value:s})));return r=function(t,e){return t.options.value<e.options.value?-1:t.options.value>e.options.value?1:0},this.handles.sort(r),this.setClass("labeled")},e.prototype.drawBar=function(){var t,e,n,o,r,s,a,l,u;for(a=[],l=this.handles,n=0,s=l.length;s>n;n++)e=l[n],a.push(e.getRelativeX());return r=a.length,o=(r>1?parseInt(a.first):void 0)||0,u=parseInt(a.last),t=u-o,this.bar||this.addSubView(this.bar=new i({cssClass:"bar"})),this.bar.setWidth(t),this.bar.setX(o+"px")},e.prototype.drawOppositeBar=function(){var t,e,n,o,r,s,a;for(r=[],s=this.handles,n=0,o=s.length;o>n;n++)e=s[n],r.push(e.getRelativeX());return a=parseInt(r.last),t=this.getWidth()-a,this.oppositeBar||this.addSubView(this.oppositeBar=new i({cssClass:"opposite bar"})),this.oppositeBar.setWidth(t),this.oppositeBar.setX(a+"px")},e.prototype._createLabel=function(t){var e,n,o,r,s,a,l;return a=this.getOptions(),o=a.maxValue,r=a.minValue,e=a.interval,l=a.showLabels,s=100*(t-r)/(o-r),this.labels.push(this.addSubView(n=new i({cssClass:"sliderbar-label",partial:""+t}))),n.setX(s+"%")},e.prototype.addLabels=function(){var t,e,n,i,o,r,s,a,l,u,c,p,h,d;if(s=this.getOptions(),o=s.maxValue,r=s.minValue,t=s.interval,h=s.showLabels,Array.isArray(h)){for(c=[],e=0,i=h.length;i>e;e++)d=h[e],c.push(this._createLabel(d));return c}for(p=[],d=n=a=r,l=o,u=t;u>0?l>=n:n>=l;d=n+=u)p.push(this._createLabel(d));return p},e.prototype.getValues=function(){var t,e,n,i,o;for(i=this.handles,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.getOptions().value);return o},e.prototype.setValue=function(t,e,n){return null==e&&(e=this.handles.first),null==n&&(n=!0),n&&e.setValue(t),this.getOption("drawBar")&&this.drawBar(),this.getOption("drawOpposite")&&this.drawOppositeBar(),this.setLimits(),this.emit("ValueIsChanging",e.value),this.emit("ValueChanged",e)},e.prototype.setLimits=function(){var t,e,n,i,o,r,s,a,l,u,c,p,h;if(l=this.getOptions(),r=l.maxValue,s=l.minValue,n=l.interval,1===this.handles.length)return this.handles.first.options.leftLimit=s,this.handles.first.options.rightLimit=r;for(u=this.handles,h=[],e=i=0,o=u.length;o>i;e=++i)t=u[e],a=t.getOptions(),a.leftLimit=(null!=(c=this.handles[e-1])?c.value:void 0)+n||s,h.push(a.rightLimit=(null!=(p=this.handles[e+1])?p.value:void 0)-n||r);return h},e.prototype.attachEvents=function(){return this.on("click",function(t){var e,n,i,o,r,s,a,l,u,c,p,h,d,f,m;for(p=this.getOptions(),l=p.maxValue,u=p.minValue,d=this.getWidth(),e=t.pageX-this.getBounds().x,n=(l-u)*e/d+u,f=this.handles.first.getSnappedValue(n),i=null,c=null,h=this.handles,s=0,a=h.length;a>s;s++)r=h[s],m=r.value,o=Math.abs(n-m),(c>o||!c)&&(c=o,i=r);return i.setValue(f)})},e.prototype.viewAppended=function(){return this.setWidth(this.getOption("width")),this.createHandles(),this.setLimits(),this.getOption("drawBar")&&this.drawBar(),this.getOption("drawOpposite")&&this.drawOppositeBar(),this.getOption("showLabels")&&this.addLabels(),this.attachEvents()},e}(i)},{"../../core/customhtmlview":96,"../../core/kd":99,"./sliderbarhandleview":69}],71:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kd-page",t.cssClass),e.__super__.constructor.call(this,t,i),this._currentCssClass=null}return r(e,t),e.prototype.move=function(t){return t?(this.unsetClass(this._currentCssClass),this._currentCssClass=t,this.setClass(t)):void 0},e}(o)},{"../../core/kd":99,"../../core/view":105}],72:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t("../../core/kd"),n=t("hammerjs"),r=t("../../core/view"),e.exports=o=function(t){function e(t,o){var r,s,a,l,u,c,p,h;null==t&&(t={}),t.cssClass=i.utils.curry("kd-slide",t.cssClass),null==t.animation&&(t.animation="move"),null==t.direction&&(t.direction="leftToRight"),null==t.touchEnabled&&(t.touchEnabled=!0),e.__super__.constructor.call(this,t,o),this.pages=[],this._coordsY=[],this._currentX=0,u=this.getOptions(),r=u.animation,s=u.direction,h=u.touchEnabled,c=[[r+"FromTop",r+"FromBottom"],[r+"ToBottom",r+"ToTop"]],l=[[r+"FromLeft",r+"FromRight"],[r+"ToRight",r+"ToLeft"]],"topToBottom"===s?(this.xcoordAnimations=c,this.ycoordAnimations=l,p=["nextSubPage","previousSubPage","nextPage","previousPage"]):(this.xcoordAnimations=l,this.ycoordAnimations=c,p=["nextPage","previousPage","nextSubPage","previousSubPage"]),h&&(a=n(this.getElement()),a.on("swipeleft",this.bound(p[0])),a.on("swiperight",this.bound(p[1])),a.on("swipeup",this.bound(p[2])),a.on("swipedown",this.bound(p[3])),a.on("touchmove",function(t){return t.preventDefault()}))}var o,r,a;return s(e,t),a=[1,2],o=a[0],r=a[1],e.prototype.addPage=function(t){return this.addSubView(t),0===this.pages.length&&(t.setClass("current"),this.currentPage=t),this.pages.push([t]),this._coordsY.push(0)},e.prototype.addSubPage=function(t){var e;return this.addSubView(t),e=this.pages.last,e.push(t)},e.prototype.nextPage=function(){return this.jump(this._currentX+1,o)},e.prototype.previousPage=function(){return this.jump(this._currentX-1,o)},e.prototype.nextSubPage=function(){return this.jump(this._coordsY[this._currentX]+1,r)},e.prototype.previousSubPage=function(){return this.jump(this._coordsY[this._currentX]-1,r)},e.prototype.jump=function(t,e,n){var r,s,a,l,u,c,p,h;return null==e&&(e=1),null==n&&(n=i.noop),e===o?(p=[this.pages,this._currentX],c=p[0],r=p[1]):(h=[this.pages[this._currentX],this._coordsY[this._currentX]],c=h[0],r=h[1]),c.length<=1||(l=Math.min(c.length-1,Math.max(0,t)),r===l)?void 0:(a=r>l?0:1,e===o?(s=c[r][this._coordsY[r]],u=c[l][this._coordsY[l]],this._currentX=l,u.move(this.xcoordAnimations[0][a]),s.move(this.xcoordAnimations[1][a])):(s=c[r],u=c[l],this._coordsY[this._currentX]=l,u.move(this.ycoordAnimations[0][a]),s.move(this.ycoordAnimations[1][a])),this.emit("CurrentPageChanged",{x:this._currentX,y:this._coordsY[this._currentX]}),u.setClass("current"),this.currentPage=u,this.utils.wait(600,function(){return s.unsetClass("current"),n()}))},e}(r)},{"../../core/kd":99,"../../core/view":105,hammerjs:109}],73:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t("../../core/view"),i=t("./splitview"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),t.cssClass||(t.cssClass="kdsplitcomboview"),e.__super__.constructor.call(this,t,n),this.init(t)}return r(e,t),e.prototype.init=function(t){return this.addSubView(this.createSplitView(t.direction,t.sizes,t.views))},e.prototype.createSplitView=function(t,e,n){var o,r,s,a,l,u;for(u=[],s=r=0,a=n.length;a>r;s=++r)o=n[s],"split"===o.type?(l=o.options,u.push(this.createSplitView(l.direction,l.sizes,o.views))):u.push(o);return new i({type:t,sizes:e,views:u})},e}(o)},{"../../core/view":105,"./splitview":76}],74:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("../../core/kd"),o=t("./splitview"),i=t("../scrollview/scrollview"),e.exports=r=function(t){function e(t,n){var i,o;null==t&&(t={}),null==t.fixed&&(t.fixed=!1),t.view||(t.view=null),e.__super__.constructor.call(this,t,n),o=this.getOptions().type,this.vertical="vertical"===o.toLowerCase(),i=this.getOptions(),this.fixed=i.fixed,this.size=i.size,this.index=i.index}return s(e,t),e.prototype.splitPanel=function(t){var e,i,r,s;return null==t&&(t={}),this.subViews.first instanceof o?n.warn("this panel is already splitted"):(s=this.subViews.first,e=this.parent.panels.indexOf(this),this.subViews=[],s&&(s.detach(),s.unsetParent(),t.views=[s]),t.colored=!0,r=this.parent.getOptions().splitClass,i=new(r||o)(t),this.parent.setView(i,e),i)},e.prototype._getSize=function(){return this.vertical?this.getWidth():this.getHeight()},e.prototype._setSize=function(t){return this._wouldResize(t)?(0>t&&(t=0),this.vertical?this.setWidth(t):this.setHeight(t),this.parent.sizes[this.index]=this.size=t,this.parent.emit("PanelDidResize",{panel:this}),this.emit("PanelDidResize",{newSize:t}),t):!1},e.prototype._wouldResize=function(t){var e,n,i,o;return n=null!=(i=this.parent.minimums[this.index])?i:0,e=null!=(o=this.parent.maximums[this.index])?o:999999,e>=t&&t>=n?!0:(n>t?this.parent._panelReachedMinimum(this.index):t>e&&this.parent._panelReachedMaximum(this.index),!1)},e.prototype._setOffset=function(t){return t=Math.max(t,0),this.vertical?this.setX(t):this.setY(t)},e.prototype._getOffset=function(){return this.vertical?parseInt(this.getElement().style.left,10):parseInt(this.getElement().style.top,10)},e}(i)},{"../../core/kd":99,"../scrollview/scrollview":68,"./splitview":76}],75:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../../core/view"),e.exports=n=function(t){function e(t,n){var i,o;null==t&&(t={}),t.handleSize||(t.handleSize=2),this.isVertical="vertical"===t.type.toLowerCase(),i=this.isVertical?"x":"y",null==t.draggable&&(t.draggable={axis:i}),e.__super__.constructor.call(this,t,n),o=this.getOptions(),this.panel0=o.panel0,this.panel1=o.panel1,this.on("DragFinished",this.dragFinished),this.on("DragInAction",this.dragInAction),this.on("DragStarted",this.dragStarted)}return o(e,t),e.prototype._setOffset=function(t){var e;return 0>t&&(t=0),e=t-this.getOption("handleSize"),this.$().css(this.isVertical?{left:e}:{top:e})},e.prototype._getOffset=function(){return this.isVertical?this.getRelativeX():this.getRelativeY()},e.prototype._animateTo=function(t){var e;return e=this.parent.options.duration,this.isVertical?(t-=this.getWidth()/2,this.$().animate({left:t},e)):(t-=this.getHeight()/2,this.$().animate({top:t},e))},e.prototype.dragFinished=function(t){return this.parent._resizeDidStop(t)},e.prototype.dragStarted=function(){return this.parent._resizeDidStart(),this.rOffset=this._getOffset(),this.p0Size=this.panel0._getSize(),this.p1Size=this.panel1._getSize(),this.p1Offset=this.panel1._getOffset()},e.prototype.dragInAction=function(t,e){return this.isVertical?this.panel0._wouldResize(t+this.p0Size)?this.parent.resizePanel(t+this.p0Size):this._setOffset(this.panel1._getOffset()):this.panel0._wouldResize(e+this.p0Size)?this.parent.resizePanel(e+this.p0Size):this._setOffset(this.panel1._getOffset())},e}(i)},{"../../core/view":105}],76:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("../../core/kd"),s=t("../../core/view"),r=t("./splitpanel"),i=t("./splitresizer"),e.exports=o=function(t){function e(t,i){var o;null==t&&(t={}),t.type||(t.type="vertical"),null==t.resizable&&(t.resizable=!0),t.sizes||(t.sizes=[.5,.5]),t.minimums||(t.minimums=[0,0]),t.maximums||(t.maximums=["100%","100%"]),t.views||(t.views=[]),t.fixed||(t.fixed=[]),t.duration||(t.duration=200),t.separator||(t.separator=null),null==t.colored&&(t.colored=!1),t.resizeHandleSize||(t.resizeHandleSize=2),t.type=t.type.toLowerCase(),t.cssClass=n.utils.curry("kdsplitview kdsplitview-"+t.type,t.cssClass),e.__super__.constructor.call(this,t,i),o=this.getOptions(),this.type=o.type,this.resizable=o.resizable,this.panels=[],this.resizer=null,this.sizes=[],this.minimums=[],this.maximums=[],this.size=0}var o;return a(e,t),e.prototype.viewAppended=function(){var t;return this._calculateSizes(),this._createPanels(),this._putPanels(),this._resizePanels(),this._putViews(),this.resizable&&this.panels[1]&&this._createResizer(),this.listenWindowResize(),null!=(t=this.parent)?t.on("PanelDidResize",n.utils.debounce(10,this.bound("_windowDidResize"))):void 0},e.prototype._createPanels=function(){return this._createPanel(0),null!=this.sizes[1]?this._createPanel(1):void 0},e.prototype._createPanel=function(t){var e,n,i,o;return o=this.getOptions(),e=o.fixed,i=o.panelClass,n=new(i||r)({cssClass:"kdsplitview-panel panel-"+t,index:t,type:this.type,size:this.sizes[t],fixed:!!e[t]}),n.on("KDObjectWillBeDestroyed",function(t){return function(){return t._panelIsBeingDestroyed(n)}}(this)),this.emit("SplitPanelCreated",n),this.panels[t]=n,n
},e.prototype._putPanels=function(){return this.addSubView(this.panels[0]),this.addSubView(this.panels[1]),this.getOptions().colored?(this.panels[0].setCss({backgroundColor:n.utils.getRandomRGB()}),this.panels[1].setCss({backgroundColor:n.utils.getRandomRGB()})):void 0},e.prototype._resizePanels=function(){return this.resizePanel(this.sizes[0])},e.prototype._panelIsBeingDestroyed=function(t){var e,n;return n=this.getOptions().views,e=t.index,this.panels[e]=null,this.sizes[e]=null,this.minimums[e]=null,this.maximums[e]=null,n[e]=null},e.prototype._createResizer=function(){var t,e,n;return t=this.getOptions(),n=t.type,e=t.resizeHandleSize,this.resizer=this.addSubView(new i({cssClass:"kdsplitview-resizer "+n,type:this.type,panel0:this.panels[0],panel1:this.panels[1],handleSize:e})),this._repositionResizer()},e.prototype._repositionResizer=function(){return this.resizer._setOffset(this.sizes[0])},e.prototype._putViews=function(){var t;return(t=this.getOptions().views)?(t[0]&&this.setView(t[0],0),t[1]?this.setView(t[1],1):void 0):void 0},e.prototype._calculateSizes=function(){var t,e,n,i,o;return this._setMinsAndMaxs(),n=this.getOptions().sizes,t=n,i=this._getSize(),e=[],e[0]=this._getLegitPanelSize(this._sanitizeSize(t[0]),0),e[1]=this._getLegitPanelSize(this._sanitizeSize(t[1]),1),o=e[0]+e[1],o>i?e[1]=i-e[0]:i>o&&(!t[0]||t[1]&&"auto"!==t[1]?!t[1]||t[0]&&"auto"!==t[0]||(e[0]=i-e[1]):e[1]=i-e[0]),this.size=i,this.sizes=e},e.prototype._sanitizeSize=function(t){return"number"==typeof t?1>t&&t>0?this._getSize()*t:t:/px$/.test(t)?parseInt(t,10):/%$/.test(t)?this._getSize()/100*parseInt(t,10):null},e.prototype._setMinsAndMaxs=function(){var t,e,n;return n=this.getOptions(),e=n.minimums,t=n.maximums,this.minimums[0]=this._sanitizeSize(e[0]),this.minimums[1]=this._sanitizeSize(e[1]),this.maximums[0]=this._sanitizeSize(t[0]),this.maximums[1]=this._sanitizeSize(t[1])},e.prototype._getSize=function(){return this.size?this.size:this.isVertical()?this.getWidth():this.getHeight()},e.prototype._setSize=function(t){return this.isVertical()?this.setWidth(t):this.setHeight(t)},e.prototype._getParentSize=function(){return this.isVertical()?this.parent&&this.parent.isInDom()?this.parent.getWidth():window.innerWidth:this.parent&&this.parent.isInDom()?this.parent.getHeight():window.innerHeight},e.prototype._getLegitPanelSize=function(t,e){var n,i;return i=this.minimums[e]||0,n=this.maximums[e]||this._getSize(),Math.min(Math.max(i,t),n)},e.prototype._windowDidResize=function(){return this.size=null,this._setSize(this._getParentSize()),this._calculateSizes(),this._resizePanels(),this.resizable?this._repositionResizer():void 0},e.prototype.mouseUp=function(){return this.$().unbind("mousemove.resizeHandle")},e.prototype._panelReachedMinimum=function(t){var e;return e=this.panels[t],e.emit("PanelReachedMinimum"),this.emit("PanelReachedMinimum",{panel:e})},e.prototype._panelReachedMaximum=function(t){var e;return e=this.panels[t],e.emit("PanelReachedMaximum"),this.emit("PanelReachedMaximum",{panel:e})},e.prototype._resizeDidStart=function(t){return this.emit("ResizeDidStart",t),document.body.classList.add("resize-in-action")},e.prototype._resizeDidStop=function(){var t;return t=n.utils.throttle(1e3,function(){return document.body.classList.remove("resize-in-action")}),function(e){var n,i;return n=this.sizes[0]/this._getSize(),i=this.sizes[1]/this._getSize(),this.setOption("sizes",[n,i]),this.emit("ResizeDidStop",e),t(this)}}(),e.prototype.isVertical=function(){return"vertical"===this.type},e.prototype.getPanelIndex=function(t){return t.index},e.prototype.hidePanel=function(t,e){var i;return null==e&&(e=n.noop),i=this.panels[t],i._lastSize=i._getSize(),i.isFloating?(i.setCss("width",0),e({panel:i,index:t})):this.resizePanel(0,t,e.bind(this,{panel:i,index:t}))},e.prototype.showPanel=function(t,e){var i,o,r;return null==e&&(e=n.noop),r=this.panels[t],o=r._lastSize||this.sizes[t]||200,r._lastSize=null,r.isFloating?(r.setCss("width",o),i=r.getRelativeX(),i>0&&r.setCss("left",i-o),n.getSingleton("windowController").addLayer(r),r.once("ReceivedClickElsewhere",function(e){return function(){return e.hidePanel(t)}}(this)),e({panel:r,index:t})):this.resizePanel(o,t,e.bind(this,{panel:r,index:t}))},e.prototype.setFloatingPanel=function(t,e){var n;return null==e&&(e=0),n=this.panels[t],n.setClass("floating"),n.isFloating=!0,n._lastSize=n._getSize(),this.resizePanel(e,t),this.emit("PanelSetToFloating",n)},e.prototype.unsetFloatingPanel=function(t){var e;return e=this.panels[t],delete e.isFloating,e.unsetClass("floating"),this.showPanel(t),this.emit("PanelSetToNormal",e)},e.prototype.resizePanel=function(t,e,i,o){var r,s,a,l;return null==t&&(t=0),null==e&&(e=0),null==i&&(i=n.noop),null==o&&(o=!1),null==this.sizes[1]||this.beingResized?void 0:(this._resizeDidStart(),t=this._sanitizeSize(t),t>this._getSize()&&(t=this._getSize()),s=this.panels[e],r=this.panels[(e+1)%2],s._getSize()!==t||o?(this.beingResized=!0,t=this._getLegitPanelSize(t,e),l=[t,this._getSize()-t],a=e?l[1]:l[0],s._setSize(l[0]),r._setSize(l[1]),this.panels[1]._setOffset(a),this.resizer&&this.resizer._setOffset(a),this._resizeDidStop(),this.beingResized=!1):(this._resizeDidStop(),void i()))},e.prototype.merge=function(){var t;return t=this.getOptions().views,this.getOptions().views=[],t.forEach(function(t){return function(e,n){return e?(e.detach(),e.unsetParent(),t.panels[n].subViews=[]):void 0}}(this)),this.emit("SplitIsBeingMerged",t),this.destroy()},e.prototype.removePanel=function(){},e.prototype.setView=function(t,e){return t?e>this.panels.length?n.warn("index is missing at KDSplitView::setView"):t instanceof s?this.panels[e].addSubView(t):n.warn("index is missing at KDSplitView::setView"):n.warn("view is missing at KDSplitView::setView")},o=function(){return n.warn("deprecated method invoked")},e.prototype._repositionPanels=o,e.prototype._repositionResizers=o,e.prototype._setPanelPositions=o,e}(s)},{"../../core/kd":99,"../../core/view":105,"./splitpanel":74,"./splitresizer":75}],77:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../../core/view"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),e.__super__.constructor.call(this,t,n),this.tabs=new i({cssClass:"kdtabhandle-tabs clearfix"})}return o(e,t),e.prototype.viewAppended=function(){return this.addSubView(this.tabs)},e}(i)},{"../../core/view":105}],78:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),i=t("../../core/customhtmlview"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),t.cssClass=n.utils.curry("kdtabhandle-movenav",t.cssClass),e.__super__.constructor.call(this,t,i),this._current=0}return r(e,t),e.prototype.viewAppended=function(){return this.addSubView(this.left=new i({cssClass:"leftButton",click:function(t){return function(){return t.move("right")}}(this)})),this.addSubView(this.right=new i({cssClass:"rightButton",click:function(t){return function(){return t.move("left")}}(this)})),this.listenWindowResize()},e.prototype._windowDidResize=function(){var t;return t=this.getDelegate(),t.getWidth()>t._tabsWidth+50?(this.move("initial"),this.hide()):this.show()},e.prototype.move=function(t){var e,n,i;switch(i=(e=this.getDelegate()).tabHandleContainer,n=e.getOption("maxHandleWidth"),t){case"left":if(n*e.handles.length+100<i.getWidth()-this._current)return;this._current-=n;break;case"right":if(0===this._current)return;this._current+=n;break;case"initial":this._current=0}return i.tabs.setCss("marginLeft",this._current+"px")},e}(i)},{"../../core/customhtmlview":96,"../../core/kd":99}],79:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){null==t&&(t={}),null==t.hidden&&(t.hidden=!1),t.title||(t.title="Title"),null==t.pane&&(t.pane=null),null==t.view&&(t.view=null),null==t.sortable&&(t.sortable=!1),null==t.closable&&(t.closable=!0),null==t.addTitleAttribute&&(t.addTitleAttribute=!0),t.sortable&&(t.draggable={axis:"x"},this.dragStartPosX=null),e.__super__.constructor.call(this,t,i),this.on("DragStarted",function(t){return function(e,i){return t.startedDragFromCloseElement=n(e.target).hasClass("close-tab"),t.handleDragStart(e,i)}}(this)),this.on("DragInAction",function(t){return function(e,n){return t.startedDragFromCloseElement&&(t.dragIsAllowed=!1),t.handleDragInAction(e,n)}}(this)),this.on("DragFinished",function(t){return function(e){return t.handleDragFinished(e),t.getDelegate().showPaneByIndex(t.index)}}(this))}return r(e,t),e.prototype.setDomElement=function(t){var e,i,o,r,s,a,l;return null==t&&(t=""),s=this.getOptions(),r=s.hidden,i=s.closable,a=s.tagName,l=s.title,e=s.addTitleAttribute,t=r?t+" hidden":t,o=i?"<span class='close-tab'></span>":"",l=e?"title='"+l+"'":"",this.domElement=n("<"+a+" "+l+" class='kdtabhandle "+t+"'>"+o+"</"+a+">")},e.prototype.viewAppended=function(){var t;return t=this.getOptions().view,t&&t instanceof o?this.addSubView(t):this.setPartial(this.partial())},e.prototype.partial=function(){return"<b>"+(this.getOptions().title||"Default Title")+"</b>"},e.prototype.makeActive=function(){return this.getDomElement().addClass("active")},e.prototype.makeInactive=function(){return this.getDomElement().removeClass("active")},e.prototype.setTitle=function(t){return this.setAttribute("title",t)},e.prototype.isHidden=function(){return this.getOptions().hidden},e.prototype.getWidth=function(){return this.$().outerWidth(!1)||0},e.prototype.cloneElement=function(){var t,e,n;return e=this.getOptions().pane,n=e.getDelegate(),t=n.tabHandleContainer.tabs,this.$cloned=this.$().clone(),t.$().append(this.$cloned),this.$cloned.css({marginLeft:-(n.handles.length-this.index)*this.getWidth()})},e.prototype.reorderTabHandles=function(t){var e,n,i,o;if(e=this.dragState.direction,o=this.getWidth(),"left"===e.current.x){if(i=this.index-1,n=-(o*this.draggedItemIndex-o*i-o/2),n>t)return this.emit("HandleIndexHasChanged",this.index,"left"),this.index--}else if(i=this.index+1,n=o*i-o*this.draggedItemIndex-o/2,t>n)return this.emit("HandleIndexHasChanged",this.index,"right"),this.index++},e.prototype.handleDragStart=function(){var t,e,n;return e=this.getOptions().pane,n=e.getDelegate(),t=n.handles,this.index=t.indexOf(this),this.draggedItemIndex=this.index},e.prototype.handleDragInAction=function(t){return this.dragIsAllowed?-(this.draggedItemIndex*this.getWidth())>t?this.$().css({left:0}):(this.$cloned||this.cloneElement(t),this.$().css({opacity:0}),this.$cloned.css({left:t}),this.reorderTabHandles(t)):void 0},e.prototype.handleDragFinished=function(){return this.$cloned?(this.$cloned.remove(),this.$().css({left:"",opacity:1,marginLeft:""}),this.targetTabHandle||0!==this.draggedItemIndex||this.$().css({left:0}),this.targetTabHandle=null,this.$cloned=null):void 0},e}(o)},{"../../core/view":105,jquery:111}],80:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("../../core/kd"),o=t("../../core/view"),e.exports=i=function(t){function e(t,i){var o;null==t&&(t={}),null==t.hiddenHandle&&(t.hiddenHandle=!1),t.name||(t.name=""),null==t.detachable&&(t.detachable=!0),o="kdtabpaneview kdhiddentab "+n.utils.slugify(t.name.toLowerCase())+" clearfix",t.cssClass=n.utils.curry(o,t.cssClass),e.__super__.constructor.call(this,t,i),this.name=t.name,this.lastScrollTops={parent:0,self:0},this.on("KDTabPaneActive",this.bound("setMainView")),this.on("KDTabPaneLazyViewAdded",this.bound("fireLazyCallback"))}return r(e,t),e.prototype.show=function(){var t;return this.getOption("detachable")&&null!=(t=this.parent)&&t.getElement().appendChild(this.getElement()),this.unsetClass("kdhiddentab"),this.setClass("active"),this.active=!0,this.emit("KDTabPaneActive"),this.applyScrollTops()},e.prototype.hide=function(){var t;if(this.active)return this.setScrollTops(),this.emit("KDTabPaneInactive"),this.unsetClass("active"),this.setClass("kdhiddentab"),this.getOption("detachable")&&null!=(t=this.parent)&&t.getElement().removeChild(this.getElement()),this.active=!1},e.prototype.setScrollTops=function(){var t;return this.lastScrollTops.parent=(null!=(t=this.parent)?t.getElement().scrollTop:void 0)||0,this.lastScrollTops.self=this.getElement().scrollTop},e.prototype.applyScrollTops=function(){return n.utils.defer(function(t){return function(){var e;return t.getElement().scrollTop=t.lastScrollTops.self,null!=(e=t.parent)?e.getElement().scrollTop=t.lastScrollTops.parent:void 0}}(this))},e.prototype.setTitle=function(t){return this.getDelegate().setPaneTitle(this,t),this.name=t},e.prototype.getHandle=function(){return this.getDelegate().getHandleByPane(this)},e.prototype.hideTabCloseIcon=function(){return this.getDelegate().hideCloseIcon(this)},e.prototype.setMainView=function(t){var e,i,r,s,a;if(t||(r=this.getOptions(),t=r.view,a=r.viewOptions),!this.mainView&&(t||a)){if(t instanceof o)this.mainView=this.addSubView(t);else{if(!a)return n.warn("probably you set a weird lazy view!");s=a.viewClass,i=a.options,e=a.data,this.mainView=this.addSubView(new s(i,e))}return this.emit("KDTabPaneLazyViewAdded",this,this.mainView),this.mainView}},e.prototype.getMainView=function(){return this.mainView},e.prototype.destroyMainView=function(){return this.mainView.destroy(),this.mainView=null},e.prototype.fireLazyCallback=function(t,e){var n,i;return i=this.getOptions().viewOptions,i&&(n=i.callback)?n.call(this,t,e):void 0},e}(o)},{"../../core/kd":99,"../../core/view":105}],81:[function(t,e){var n,i,o,r,s,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),a=t("./tabhandleview"),l=t("./tabpaneview"),o=t("../scrollview/scrollview"),r=t("./tabhandlecontainer"),s=t("./tabhandlemovenav"),e.exports=u=function(t){function e(t,n){var o;null==t&&(t={}),null==t.resizeTabHandles&&(t.resizeTabHandles=!1),null==t.maxHandleWidth&&(t.maxHandleWidth=128),null==t.minHandleWidth&&(t.minHandleWidth=30),null==t.lastTabHandleMargin&&(t.lastTabHandleMargin=0),null==t.sortable&&(t.sortable=!1),null==t.hideHandleContainer&&(t.hideHandleContainer=!1),null==t.hideHandleCloseIcons&&(t.hideHandleCloseIcons=!1),null==t.enableMoveTabHandle&&(t.enableMoveTabHandle=!1),null==t.detachPanes&&(t.detachPanes=!0),null==t.tabHandleContainer&&(t.tabHandleContainer=null),t.tabHandleClass||(t.tabHandleClass=a),t.paneData||(t.paneData=[]),t.cssClass=i.utils.curry("kdtabview",t.cssClass),this.handles=[],this.panes=[],this.selectedIndex=[],this.tabConstructor=null!=(o=t.tabClass)?o:l,this.lastOpenPaneIndex=0,e.__super__.constructor.call(this,t,n),this.activePane=null,this.handlesHidden=!1,this.blockTabHandleResize=!1,this.setTabHandleContainer(t.tabHandleContainer),t.enableMoveTabHandle&&this.setTabHandleMoveNav(),t.hideHandleCloseIcons&&this.hideHandleCloseIcons(),t.hideHandleContainer&&this.hideHandleContainer(),this.on("PaneRemoved",function(t){return function(){return t.resizeTabHandles()}}(this)),this.on("PaneAdded",function(t){return function(){return t.blockTabHandleResize=!1,t.resizeTabHandles()}}(this)),this.on("PaneDidShow",this.bound("setActivePane")),t.paneData.length>0&&this.on("viewAppended",function(e){return function(){return e.createPanes(t.paneData)}}(this)),this.tabHandleContainer.on("mouseleave",function(t){return function(){return t.blockTabHandleResize?(t.blockTabHandleResize=!1,t.resizeTabHandles()):void 0}}(this))}return c(e,t),e.prototype.createPanes=function(t){var e,n,i,o;for(null==t&&(t=this.getOptions().paneData),o=[],e=0,n=t.length;n>e;e++)i=t[e],o.push(this.addPane(new this.tabConstructor(i,null)));return o},e.prototype.addPane=function(t,e){var n,o,r,s,a,u,c,p,h,d,f,m,g,v,y,w;return null==e&&(e=null!=(h=t.getOptions().shouldShow)?h:!0),t instanceof l?(d=this.getOptions(),v=d.tabHandleClass,g=d.sortable,o=d.detachPanes,t.setOption("detachable",o),this.panes.push(t),f=t.getOptions(),c=f.name,w=f.title,r=f.hiddenHandle,y=f.tabHandleView,n=f.closable,s=f.lazy,p=t.tabHandle||new v({pane:t,title:c||w,hidden:r,cssClass:i.utils.slugify(c.toLowerCase()),view:y,closable:n,sortable:g,mousedown:function(t){var e,n;return e=this.getOptions().pane,n=e.getDelegate(),n.handleClicked(t,this)}}),this.addHandle(p),t.tabHandle=p,this.appendPane(t),e&&!s&&this.showPane(t),this.emit("PaneAdded",t),m=this.getOptions(),u=m.minHandleWidth,a=m.maxHandleWidth,p.getDomElement().css({maxWidth:a,minWidth:u}),p.on("HandleIndexHasChanged",this.bound("resortTabHandles")),t):(c=(null!=(null!=t?t.constructor:void 0)).name,i.warn("You can't add "+(c?c:void 0)+" as a pane, use KDTabPaneView instead"),!1)},e.prototype.resortTabHandles=function(t,e){var n,i,o,r,s;if(!(0===t&&"left"===e||t===this.handles.length-1&&"right"===e||t>=this.handles.length||0>t))return this.handles[0].unsetClass("first"),"right"===e?(n="insertAfter",s=t+1):(n="insertBefore",s=t-1),this.handles[t].$()[n](this.handles[s].$()),i="left"===e?t-1:t+1,o=this.handles.splice(t,1),r=this.panes.splice(t,1),this.handles.splice(i,0,o[0]),this.panes.splice(i,0,r[0]),this.handles[0].setClass("first"),this.emit("TabsSorted")},e.prototype.removePane=function(t,e){var n,i,o,r,s;return null==e&&(e=!1),t.emit("KDTabPaneDestroy"),o=this.getPaneIndex(t),r=this.getActivePane()===t,this.panes.splice(o,1),i=this.getHandleByIndex(o),this.handles.splice(o,1),e?(this.panes=this.panes.filter(function(e){return e!==t}),this.handles=this.handles.filter(function(t){return t!==i}),t.detach(),i.detach()):(t.destroy(),i.destroy()),r&&((s=this.getPaneByIndex(this.lastOpenPaneIndex))?this.showPane(s):(n=this.getPaneByIndex(0))&&this.showPane(n)),this.emit("PaneRemoved",{pane:t,handle:i}),{pane:t,handle:i}},e.prototype.removePaneByName=function(t){var e,n,i,o,r;for(o=this.panes,r=[],e=0,n=o.length;n>e;e++){if(i=o[e],i.name===t){this.removePane(i);break}r.push(void 0)}return r},e.prototype.appendHandleContainer=function(){return this.addSubView(this.tabHandleContainer)},e.prototype.appendPane=function(t){return t.setDelegate(this),this.addSubView(t)},e.prototype.appendHandle=function(t){var e,n,i;return this.handleHeight||(this.handleHeight=this.tabHandleContainer.getHeight()),t.setDelegate(this),this.tabHandleContainer.tabs.addSubView(t),i=this.getOptions(),e=i.enableMoveTabHandle,n=i.maxHandleWidth,e?this._tabsWidth=this.handles.length*n:void 0},e.prototype.addHandle=function(t){var e;return t instanceof a?(this.handles.push(t),this.appendHandle(t),t.getOptions().hidden&&t.setClass("hidden"),t):(e=(null!=(null!=t?t.constructor:void 0)).name,i.warn("You can't add "+(null!=e?e:void 0)+" as a pane, use KDTabHandleView instead"),!1)},e.prototype.removeHandle=function(){},e.prototype.showPane=function(t){var e,n,i;if(t&&(e=this.getActivePane(),t!==e))return e&&(this.lastOpenPaneIndex=this.getPaneIndex(e)),this.hideAllPanes(),t.show(),i=this.getPaneIndex(t),n=this.getHandleByIndex(i),n.makeActive(),t.emit("PaneDidShow"),this.emit("PaneDidShow",t,i),t},e.prototype.hideAllPanes=function(){var t,e,n,i,o,r,s,a,l;for(s=this.panes,e=0,i=s.length;i>e;e++)r=s[e],r&&r.hide();for(a=this.handles,l=[],n=0,o=a.length;o>n;n++)t=a[n],t&&l.push(t.makeInactive());return l},e.prototype.hideHandleContainer=function(){return this.tabHandleContainer.hide(),this.handlesHidden=!0},e.prototype.showHandleContainer=function(){return this.tabHandleContainer.show(),this.handlesHidden=!1},e.prototype.toggleHandleContainer=function(t){return null==t&&(t=0),this.tabHandleContainer.$().toggle(t)},e.prototype.hideHandleCloseIcons=function(){return this.tabHandleContainer.$().addClass("hide-close-icons")},e.prototype.showHandleCloseIcons=function(){return this.tabHandleContainer.$().removeClass("hide-close-icons")},e.prototype.handleMouseDownDefaultAction=function(t,e){var n,i,o,r,s,a;for(s=this.handles,a=[],o=i=0,r=s.length;r>i;o=++i)n=s[o],t===n&&a.push(this.handleClicked(o,e));return a},e.prototype.handleClicked=function(t,e){var i;return i=e.getOptions().pane,n(t.target).hasClass("close-tab")?(this.blockTabHandleResize=!0,this.removePane(i),!1):this.showPane(i)},e.prototype.setTabHandleContainer=function(t){return null!=t?(null!=this.tabHandleContainer&&this.tabHandleContainer.destroy(),this.tabHandleContainer=t):(this.tabHandleContainer=new r,this.appendHandleContainer()),this.tabHandleContainer.setClass("kdtabhandlecontainer")},e.prototype.getTabHandleContainer=function(){return this.tabHandleContainer},e.prototype.setTabHandleMoveNav=function(){return this.tabHandleContainer.addSubView(new s({delegate:this}))},e.prototype.checkPaneExistenceById=function(t){var e,n,i,o,r;for(r=!1,o=this.panes,e=0,n=o.length;n>e;e++)i=o[e],i.id===t&&(r=!0);return r},e.prototype.getPaneByName=function(t){var e,n,i,o,r;for(r=!1,o=this.panes,e=0,n=o.length;n>e;e++)i=o[e],i.name===t&&(r=i);return r},e.prototype.getPaneById=function(t){var e,n,i,o,r;for(o=null,r=this.panes,e=0,n=r.length;n>e;e++)i=r[e],i.id===t&&(o=i);return o},e.prototype.getActivePane=function(){return this.activePane},e.prototype.getActivePaneIndex=function(){return this.getPaneIndex(this.getActivePane())},e.prototype.setActivePane=function(t){this.activePane=t},e.prototype.getPaneByIndex=function(t){return this.panes[t]},e.prototype.getHandleByIndex=function(t){return this.handles[t]},e.prototype.getPaneIndex=function(t){if(!t)throw new Error("no pane provided!");return this.panes.indexOf(t)},e.prototype.showPaneByIndex=function(t){return this.showPane(this.getPaneByIndex(t))},e.prototype.showPaneByName=function(t){return this.showPane(this.getPaneByName(t))},e.prototype.showNextPane=function(){var t,e;return e=this.getActivePane(),t=this.getPaneIndex(e),this.showPane(this.getPaneByIndex(t+1))},e.prototype.showPreviousPane=function(){var t,e;return e=this.getActivePane(),t=this.getPaneIndex(e),this.showPane(this.getPaneByIndex(t-1))},e.prototype.setPaneTitle=function(t,e){var n;return n=this.getHandleByPane(t),n.getDomElement().find("b").text(e),n.setAttribute("title",e)},e.prototype.getHandleByPane=function(t){var e,n;return n=this.getPaneIndex(t),e=this.getHandleByIndex(n)},e.prototype.hideCloseIcon=function(t){var e,n;return n=this.getPaneIndex(t),e=this.getHandleByIndex(n),e.getDomElement().addClass("hide-close-icon")},e.prototype.getVisibleHandles=function(){return this.handles.filter(function(t){return t.isHidden()===!1})},e.prototype.getVisibleTabs=function(){return this.panes.filter(function(t){return t.tabHandle.isHidden()===!1})},e.prototype.resizeTabHandles=function(){var t,e,n,i,o,r,s,a,l,u,c,p,h,d;if(!(!this.getOptions().resizeTabHandles||this._tabHandleContainerHidden||this.blockTabHandleResize||(r=this.getOptions().lastTabHandleMargin,h=[],d=0,l=this.tabHandleContainer.tabs.getElement().offsetWidth,0>=l))){for(e=l-r,t=100-100*r/e,c=this.handles,i=0,s=c.length;s>i;i++)n=c[i],n.isHidden()||(h.push(n),d+=n.getElement().offsetWidth);for(u=(t/h.length).toFixed(2),p=[],o=0,a=h.length;a>o;o++)n=h[o],p.push(n.setWidth(u,"%"));return p}},e}(o)},{"../../core/kd":99,"../scrollview/scrollview":68,"./tabhandlecontainer":77,"./tabhandlemovenav":78,"./tabhandleview":79,"./tabpaneview":80,jquery:111}],82:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),r=t("./tabview"),o=t("./tabpaneview"),i=t("../forms/formviewwithfields"),e.exports=s=function(t){function e(t,n){var o;null==t&&(t={}),null==t.navigable&&(t.navigable=!0),null==t.goToNextFormOnSubmit&&(t.goToNextFormOnSubmit=!0),e.__super__.constructor.call(this,t,n),this.forms={},this.hideHandleCloseIcons(),o=this.getOptions().forms,o&&(this.createTabs(o=i.sanitizeFormOptions(o)),this.showPane(this.panes[0])),1===o.length&&this.hideHandleContainer()}return a(e,t),e.prototype.handleClicked=function(){return this.getOptions().navigable?e.__super__.handleClicked.apply(this,arguments):void 0},e.prototype.createTab=function(t,e){var n,i;return this.addPane(i=new o({name:t.title}),t.shouldShow),n=t.callback,t.callback=function(t){return function(i){var o;return t.getOptions().goToNextFormOnSubmit&&t.showNextPane(),"function"==typeof n&&n(i),o=t.getOptions().forms,o&&e===Object.keys(o).length-1?t.fireFinalCallback():void 0}}(this),this.createForm(t,i),i},e.prototype.createTabs=function(t){return t.forEach(function(t){return function(e,n){return t.createTab(e,n)}}(this))},e.prototype.createForm=function(t,e){var n;return e.addSubView(n=new i(t)),this.forms[t.title]=e.form=n,n},e.prototype.getFinalData=function(){var t,e,i,o,r;for(t={},r=this.panes,e=0,i=r.length;i>e;e++)o=r[e],t=n.extend(o.form.getData(),t);return t},e.prototype.fireFinalCallback=function(){var t,e;return e=this.getFinalData(),"function"==typeof(t=this.getOptions()).callback?t.callback(e):void 0},e}(r)},{"../forms/formviewwithfields":33,"./tabpaneview":80,"./tabview":81,jquery:111}],83:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t("../../core/kd"),r=t("../../core/view"),s=t("timeago"),e.exports=o=function(t){function e(t,n){null==t&&(t={}),t.tagName="time",e.__super__.constructor.call(this,t,n),e.on("OneMinutePassed",function(t){return function(){return t.updatePartial(s(t.getData()))}}(this))}return a(e,t),e.registerStaticEmitter(),i.utils.repeat(6e4,function(){return e.emit("OneMinutePassed")}),e.prototype.setData=function(){return e.__super__.setData.apply(this,arguments),this.parent?this.updatePartial(s(this.getData())):void 0},e.prototype.viewAppended=function(){return this.setPartial(s(this.getData()))},e}(r)},{"../../core/kd":99,"../../core/view":105,jquery:111,timeago:129}],84:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t("../../core/kd"),r=t("../../core/view"),n=t("htmlencode"),e.exports=o=function(t){function e(t,n){var o;t.bind||(t.bind="mouseenter mouseleave"),null==t.sticky&&(t.sticky=!1),t.cssClass=i.utils.curry("kdtooltip",t.cssClass),e.__super__.constructor.call(this,t,n),this.visible=!1,this.parentView=this.getDelegate(),this.wrapper=new r({cssClass:"wrapper"}),this.getOptions().animate?this.setClass("out"):this.hide(),this.addListeners(),o=i.getSingleton("windowController"),o.on("ScrollHappened",this.bound("hide")),this.once("viewAppended",function(t){return function(){var e,n,i,o;return n=t.getOptions(),o=n.view,i=n.title,e=n.html,null!=o?t.setView(o):(t.setClass("just-text"),t.setTitle(i,e)),t.parentView.emit("TooltipReady"),t.addSubView(t.wrapper),t.visible=!0}}(this))}var o,a,l,u,c;return s(e,t),e.prototype.show=function(){var t;return(t=this.getOptions().selector)?void 0:(this.display(),e.__super__.show.apply(this,arguments),this.visible=!0)},e.prototype.hide=function(){var t,n;if(this.visible)return t=this.getOptions().permanent,e.__super__.hide.apply(this,arguments),this.getDomElement().remove(),n=i.getSingleton("windowController"),t||n.removeLayer(this),this.visible=!1},e.prototype.update=function(t,e){return null==t&&(t=this.getOptions()),e?this.setView(e):(t.selector||(t.selector=null),t.title||(t.title=""),this.setTitle(t.title,t.html),this.display()),this.visible=!0},e.prototype.addListeners=function(){var t,e,n,i,o,r,s,a,l;for(a=this.getOptions(),n=a.events,l=a.sticky,s=a.permanent,e=this.bound("show"),t=this.bound("hide"),i=0,o=n.length;o>i;i++)r=n[i],this.parentView.bindEvent(r);return this.parentView.on("mouseenter",e),l||this.parentView.on("mouseleave",t),s||this.on("ReceivedClickElsewhere",t),this.once("KDObjectWillBeDestroyed",function(n){return function(){return n.parentView.off("mouseenter",e),l?void 0:n.parentView.off("mouseleave",t)}}(this))},e.prototype.setView=function(t){var e,n,i;if(t)return null!=this.wrapper.view&&this.wrapper.view.destroy(),t.constructorName?(i=t.options,n=t.data,e=t.constructorName,this.childView=new e(i,n)):this.wrapper.addSubView(t)},e.prototype.getView=function(){return this.childView},e.prototype.destroy=function(){return this.parentView.tooltip=null,delete this.parentView.tooltip,e.__super__.destroy.apply(this,arguments)},e.prototype.translateCompassDirections=function(t){var e,n;return n=t.placement,e=t.gravity,t.placement=c[n],t.direction=o(t.placement,e),t},e.prototype.display=function(){var t,e,n,o,r,s;return n=this.getOptions(),r=this.getOptions(),o=r.permanent,e=r.gravity,t=r.animate,this.appendToDomBody(),s=i.getSingleton("windowController"),o||s.addLayer(this),e&&(n=this.translateCompassDirections(n)),n.gravity=null,t&&this.setClass("in"),i.utils.defer(function(t){return function(){return t.setPositions(n)}}(this)),this.visible=!0},e.prototype.getCorrectPositionCoordinates=function(t,e,n){var o,r,s,l,c,p,h,d,f,m,g,v;if(null==t&&(t={}),null==n&&(n=i.noop),o=this.$(),f=this.parentView.$(t.selector),s={container:{height:o.height(),width:o.width()},selector:{offset:f.offset(),height:f.height(),width:f.width()}},d=e.placement,l=e.direction,c=this.getOptions().forcePosition,v=a(u(s,d,l),s.container.width,s.container.height),!c&&Object.keys(v).length>0)for(g=[["top","right"],["right","top"],["right","bottom"],["bottom","right"],["top","left"],["top","center"],["right","center"],["bottom","center"],["bottom","left"],["left","bottom"],["left","center"],["left","top"]],p=0,h=g.length;h>p;p++)if(m=g[p],0===Object.keys(a(u(s,m[0],m[1]),s.container.width,s.container.height)).length){d=m[0],l=m[1];break}return r={coords:u(s,d,l),placement:d,direction:l},n(r),r},e.prototype.setPositions=function(t,e){var n,i,o,r,s,a,l,u,c,p,h,d,f;for(null==t&&(t=this.getOptions()),null==e&&(e=!1),e&&this.setClass("animate-movement"),c=t.placement||"top",i=t.direction||"right",u=Number===typeof t.offset?{top:t.offset,left:0}:t.offset,i=("top"!==c&&"bottom"!==c||"top"!==i&&"bottom"!==i)&&("left"!==c&&"right"!==c||"left"!==i&&"right"!==i)?i:"center",h=this.getCorrectPositionCoordinates(t,{placement:c,direction:i}),n=h.coords,c=h.placement,i=h.direction,d=["top","bottom","left","right"],r=0,a=d.length;a>r;r++)p=d[r],c===p?this.setClass("placement-"+p):this.unsetClass("placement-"+p);for(f=["top","bottom","left","right","center"],s=0,l=f.length;l>s;s++)o=f[s],i===o?this.setClass("direction-"+o):this.unsetClass("direction-"+o);return this.$().css({left:n.left+u.left,top:n.top+u.top}),this.utils.wait(500,function(t){return function(){return t.unsetClass("animate-movement")}}(this))},e.prototype.setTitle=function(t,e){return e||(t=n.htmlEncode(t)),this.wrapper.updatePartial(t)},o=function(t,e){return"top"===t||"bottom"===t?/e/.test(e)?"left":/w/.test(e)?"right":"center":"left"===t||"right"===t?/n/.test(e)?"top":/s/.test(e)?"bottom":t:void 0},c={top:"top",above:"top",below:"bottom",bottom:"bottom",left:"left",right:"right"},a=function(t,e,n){var i;return i={},t.left<0&&(i.left=-t.left),t.top<0&&(i.top=-t.top),t.left+e>window.innerWidth&&(i.right=t.left+e-window.innerWidth),t.top+n>window.innerHeight&&(i.bottom=t.top+n-window.innerHeight),i},l=function(t,e,n){var i;return null==n&&(n=!1),i=t.selector[e]-t.container[e],n?i/2:i},u=function(t,e,n){var i,o,r,s,a,u,c;return i={top:t.selector.offset.top,left:t.selector.offset.left},a=/o/.test(e)?["height","width","top","left","right"]:["width","height","left","top","bottom"],u=a[0],o=a[1],c=a[2],r=a[3],s=a[4],i[c]+=e.length<5?-(t.container[u]+10):t.selector[u]+10,n!==s&&(i[r]+=l(t,o,"center"===n)),i
},e}(r)},{"../../core/kd":99,"../../core/view":105,htmlencode:115}],85:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("../list/listitemview"),e.exports=n=function(t){function e(t,n){var i,o,r;null==t&&(t={}),null==n&&(n={}),t.tagName||(t.tagName="li"),t.type||(t.type="jtreeitem"),t.bind||(t.bind="mouseenter contextmenu dragstart dragenter dragleave dragend dragover drop"),t.childClass||(t.childClass=null),t.childOptions||(t.childOptions={}),e.__super__.constructor.call(this,t,n),this.setClass("jtreeitem"),this.expanded=!1,r=this.getOptions(),i=r.childClass,o=r.childOptions,i&&(this.child=new i(o,this.getData()))}return o(e,t),e.prototype.viewAppended=function(){var t;return this.getOptions().childClass?this.addSubView(this.child):this.updatePartial("<span class='arrow'></span>\n"+(null!=(t=this.getData().title)?t:""))},e.prototype.toggle=function(){return this.expanded?this.collapse():this.expand()},e.prototype.expand=function(){return this.expanded=!0,this.setClass("expanded")},e.prototype.collapse=function(){return this.expanded=!1,this.unsetClass("expanded")},e.prototype.decorateSubItemsState=function(t){return null==t&&(t=!0),t?this.setClass("has-sub-items"):this.unsetClass("has-sub-items")},e}(i)},{"../list/listitemview":51}],86:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("../../core/kd"),o=t("../list/listview"),e.exports=n=function(t){function e(t,n){null==t&&(t={}),null==t.animated&&(t.animated=!1),t.cssClass=i.utils.curry("jtreeview expanded",t.cssClass),e.__super__.constructor.call(this,t,n)}return r(e,t),e.prototype.toggle=function(t){return this.expanded?this.collapse(t):this.expand(t)},e.prototype.expand=function(t){return this.getOptions().animated?this.$().slideDown(150,function(e){return function(){return e.setClass("expanded"),"function"==typeof t?t():void 0}}(this)):(this.show(),this.setClass("expanded"),"function"==typeof t?t():void 0)},e.prototype.collapse=function(t){return this.getOptions().animated?this.$().slideUp(100,function(e){return function(){return e.unsetClass("expanded"),"function"==typeof t?t():void 0}}(this)):(this.hide(),this.unsetClass("expanded"),"function"==typeof t?t():void 0)},e.prototype.mouseDown=function(){return i.getSingleton("windowController").setKeyView(this),!1},e.prototype.keyDown=function(t){return this.emit("KeyDownOnTreeView",t)},e.prototype.destroy=function(){return i.getSingleton("windowController").revertKeyView(this),e.__super__.destroy.apply(this,arguments)},e}(o)},{"../../core/kd":99,"../list/listview":52}],87:[function(t,e){var n,i,o,r,s,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../../core/kd"),n=t("./treeitemview"),i=t("./treeview"),l=t("../../core/viewcontroller"),a=t("../scrollview/scrollview"),s=t("../list/listviewcontroller"),e.exports=o=function(t){function e(t,o){var r;null==t&&(t={}),null==o&&(o=[]),r=t,r.view||(r.view=new a({cssClass:"jtreeview-wrapper"})),r.listViewControllerClass||(r.listViewControllerClass=s),r.treeItemClass||(r.treeItemClass=n),r.listViewClass||(r.listViewClass=i),r.itemChildClass||(r.itemChildClass=null),r.itemChildOptions||(r.itemChildOptions={}),r.nodeIdPath||(r.nodeIdPath="id"),r.nodeParentIdPath||(r.nodeParentIdPath="parentId"),null==r.contextMenu&&(r.contextMenu=!1),null==r.multipleSelection&&(r.multipleSelection=!1),null==r.addListsCollapsed&&(r.addListsCollapsed=!1),null==r.sortable&&(r.sortable=!1),null==r.putDepthInfo&&(r.putDepthInfo=!0),null==r.addOrphansToRoot&&(r.addOrphansToRoot=!0),null==r.dragdrop&&(r.dragdrop=!1),e.__super__.constructor.call(this,r,o),this.listData={},this.listControllers={},this.nodes={},this.indexedNodes=[],this.selectedNodes=[]}var o,l,h;return u(e,t),h=function(){return{37:"left",38:"up",39:"right",40:"down",8:"backspace",9:"tab",13:"enter",27:"escape"}},l=null,o=function(){return l=document.createElement("img"),l.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAYCAMAAAAs/jgVAAAA0lBMVEX///+It9YAAAD///8AAACIt9aIt9aIt9aIt9aIt9aIt9YAAAD///+It9aIt9aIt9aIt9aIt9aIt9aIt9bT09OIt9aIt9aIt9b///+It9bv9fr+/v79/f2QvNn4+PioyuHA2enP4u/09PS41Obf7PTn8ff6+vr29vb3+vygxd78/Pz19fX7+/vs7OzY2NjR0dGwz+Tv7+/T09Pz8/PX19fQ0NCYwdvx8fHLy8vq6urZ2dnX5/H5+fny8vLOzs739/fPz8/W1tbu7u7w8PDH3ezd3d0P0SzzAAAAGHRSTlMAACZqGJkG2/k2rkZV4bG0V9gDaYBabJYxtX/TAAACLElEQVR4Xu3V127bMBQG4NT1SOw4s0kP59Ce3iN7tu//Sj2i0iiKE8AB7Juiv0SIFAR9OAQJ7mwy/9NsvElz61yDA4cEgGWQZA0Evm0xyAFAYkVMr/nCtU8PjsnGcnxw2n7lGMsSnmSMAX9slNxRh2w4naMXjrGEByzgCWPsqtdE7qT7ARDrOuCqL4LdE8tlyCCHWMZmjw3kWuSDuJ5V4K9iKl7BWl7LcgHnXOLFecAHV8jtkU841wqrHGbhreHtWS6QN5nMbiR2BjPkfhaAoh7QEQVfKFqMkNMAoEAp3wNwC05FQGNbXQwAeuEX7z2DXVP0NIAv6uUhl8gslFKGmUzkbIBcx3L4/XUUC+q+crYg5NDSkTBaRIpo33J2qj1NYhCeL2IwRFMBC6Lqy8VWJ8MwxSuUQTgpuN2SI0Tbf6xyKETKaAVFKs4OlWc/Kt4ZX5NadgvuPrxPp+E0xWc4mX2Bi4FgKi6ytVQcESZafMAtnWWKDdnhBLlOnYshJteW+2Vqk0ko8qOSG1FCDJKjihMuIXS0Mpnj6e341sE2HTuWa9U5YgCM5eJyqUQeYCHIxRRAl5ygoIUP4FVcOdSUeAbv16WSPz/l+WWePz3nl/PhpxthjV22zkZo9i4e7i7u5tgeLn4P7TbfDme3+f4PJ0wdZ+o4aegs5wXX7m6D67aRe18ecpizPtlw+mf2RHhfnuWwwPPDDYr9w/PyAFo9z7d8vGJ5399kf+cfyh+807YxJJdmLQAAAABJRU5ErkJggg==",l.width=110}(),e.prototype.loadView=function(){return this.initTree(this.getData()),this.setKeyView(),this.setMainListeners(),this.registerBoundaries()},e.prototype.registerBoundaries=function(){return this.boundaries={top:this.getView().getY(),left:this.getView().getX(),width:this.getView().getWidth(),height:this.getView().getHeight()}},e.prototype.initTree=function(t){return this.removeAllNodes(),this.addNodes(t)},e.prototype.logTreeStructure=function(){var t,e,n,i,o;n=this.getOptions(),i=this.indexedNodes,o=[];for(t in i)c.call(i,t)&&(e=i[t],o.push(r.log(t,this.getNodeId(e),this.getNodePId(e),e.depth)));return o},e.prototype.getNodeId=function(t){return t[this.getOptions().nodeIdPath]},e.prototype.getNodePId=function(t){return t[this.getOptions().nodeParentIdPath]},e.prototype.getPathIndex=function(t){var e,n,i,o,r;for(r=this.indexedNodes,n=e=0,i=r.length;i>e;n=++e)if(o=r[n],this.getNodeId(o)===t)return n;return-1},e.prototype.repairIds=function(t){var e,n,i,o;return n=this.getOptions(),e=n.nodeIdPath,i=n.nodeParentIdPath,t[e]||(t[e]=this.utils.getUniqueId()),t[e]=""+this.getNodeId(t),t[i]=this.getNodePId(t)?""+this.getNodePId(t):"0",this.nodes[this.getNodeId(t)]={},n.putDepthInfo&&(t.depth=(null!=(o=this.nodes[t[i]])?o.getData:void 0)?this.nodes[t[i]].getData().depth+1:0),"0"===t[i]||this.nodes[t[i]]||(n.addOrphansToRoot?t[i]="0":t=!1),t},e.prototype.isNodeVisible=function(t){var e,n;return e=t.getData(),n=this.nodes[this.getNodePId(e)],n?n.expanded?this.isNodeVisible(n):!1:!0},e.prototype.areSibling=function(t,e){var n,i;return n=this.getNodePId(t.getData()),i=this.getNodePId(e.getData()),n===i},e.prototype.setFocusState=function(){var t;return t=this.getView(),r.getSingleton("windowController").addLayer(t),t.unsetClass("dim")},e.prototype.setBlurState=function(){var t;return t=this.getView(),r.getSingleton("windowController").removeLayer(t),t.setClass("dim")},e.prototype.addNode=function(t,e){var n,i,o;if(!this.nodes[this.getNodeId(t)]&&(t=this.repairIds(t)))return p.call(this.getData(),t)<0&&this.getData().push(t),this.registerListData(t),o=this.getNodePId(t),null!=this.listControllers[o]?n=this.listControllers[o].getListView():(n=this.createList(o).getListView(),this.addSubList(this.nodes[o],o)),i=n.addItem(t,e),this.emit("NodeWasAdded",i),this.addIndexedNode(t),i},e.prototype.addNodes=function(t){var e,n,i,o;for(o=[],e=0,n=t.length;n>e;e++)i=t[e],o.push(this.addNode(i));return o},e.prototype.removeNode=function(t){var e,n,i,o,r,s,a,l;for(r=null,l=this.getData(),n=e=0,i=l.length;i>e;n=++e)o=l[n],this.getNodeId(o)===t&&(this.removeIndexedNode(o),r=n);return null!=r?(s=this.getData().splice(r,1)[0],this.removeChildNodes(t),a=this.getNodePId(s),this.listControllers[a].getListView().removeItem(this.nodes[t]),delete this.nodes[t]):void 0},e.prototype.removeNodeView=function(t){return this.removeNode(this.getNodeId(t.getData()))},e.prototype.removeAllNodes=function(){var t,e,n;n=this.listControllers;for(t in n)c.call(n,t)&&(e=n[t],e.getListItems().forEach(this.bound("removeNodeView")),null!=e&&e.getView().destroy(),delete this.listControllers[t],delete this.listData[t]);return this.nodes={},this.listData={},this.indexedNodes=[],this.selectedNodes=[],this.listControllers={}},e.prototype.removeChildNodes=function(t){var e,n,i,o,r,s,a,l,u,c;for(n=[],u=this.getData(),o=i=0,s=u.length;s>i;o=++i)l=u[o],this.getNodePId(l)===t&&n.push(this.getNodeId(l));for(r=0,a=n.length;a>r;r++)e=n[r],this.removeNode(e);return null!=(c=this.listControllers[t])&&c.getView().destroy(),delete this.listControllers[t],delete this.listData[t]},e.prototype.nodeWasAdded=function(t){var e,n,i;return n=t.getData(),this.getOptions().dragdrop&&t.$().attr("draggable","true"),e=n.id,i=n.parentId,this.nodes[this.getNodeId(n)]=t,this.nodes[this.getNodePId(n)]&&(this.getOptions().addListsCollapsed||this.expand(this.nodes[this.getNodePId(n)]),this.nodes[this.getNodePId(n)].decorateSubItemsState()),this.listControllers[e]?this.addSubList(t,e):void 0},e.prototype.getChildNodes=function(t){var e;return e=[],this.indexedNodes.forEach(function(n){return function(i,o){return n.getNodePId(i)===n.getNodeId(t)?e.push({node:i,index:o}):void 0}}(this)),e.length?e:!1},e.prototype.getPreviousNeighbor=function(t){var e,n,i;return i=t,e=this.getChildNodes(t),e&&(n=e.last,i=this.getPreviousNeighbor(n.node)),i},e.prototype.addIndexedNode=function(t,e){var n,i,o;return e>=0?void this.indexedNodes.splice(e+1,0,t):(i=this.nodes[this.getNodePId(t)],i?(o=this.getPreviousNeighbor(i.getData()),n=this.indexedNodes.indexOf(o),this.indexedNodes.splice(n+1,0,t)):this.indexedNodes.push(t))},e.prototype.removeIndexedNode=function(t){var e;return p.call(this.indexedNodes,t)>=0&&(e=this.indexedNodes.indexOf(t),this.indexedNodes.splice(e,1),this.nodes[this.getNodePId(t)]&&!this.getChildNodes(this.nodes[this.getNodePId(t)].getData()))?this.nodes[this.getNodePId(t)].decorateSubItemsState(!1):void 0},e.prototype.registerListData=function(t){var e,n;return n=this.getNodePId(t),(e=this.listData)[n]||(e[n]=[]),this.listData[n].push(t)},e.prototype.createList=function(t,e){var n,i,o;return n=this.getOptions(),this.listControllers[t]=new n.listViewControllerClass({id:this.getId()+"_"+t,wrapper:!1,scrollView:!1,selection:null!=(i=n.selection)?i:!1,multipleSelection:null!=(o=n.multipleSelection)?o:!1,view:new n.listViewClass({tagName:"ul",type:n.type,itemClass:n.treeItemClass,itemChildClass:n.itemChildClass,itemChildOptions:n.itemChildOptions})},{items:e}),this.setListenersForList(t),this.listControllers[t]},e.prototype.addSubList=function(t,e){var n,i;return i=this.getOptions(),n=this.listControllers[e].getView(),t?(t.$().after(n.$()),n.parentIsInDom=!0,n.emit("viewAppended"),i.addListsCollapsed?this.collapse(t):this.expand(t)):this.getView().addSubView(n)},e.prototype.setMainListeners=function(){return r.getSingleton("windowController").on("ReceivedMouseUpElsewhere",function(t){return function(e){return t.mouseUp(e)}}(this)),this.getView().on("ReceivedClickElsewhere",function(t){return function(){return t.setBlurState()}}(this))},e.prototype.setListenersForList=function(t){return this.listControllers[t].getView().on("ItemWasAdded",function(t){return function(e,n){return t.setItemListeners(e,n)}}(this)),this.listControllers[t].on("ItemSelectionPerformed",function(t){return function(e,n){var i,o;return i=n.event,o=n.items,t.organizeSelectedNodes(e,o,i)}}(this)),this.listControllers[t].on("ItemDeselectionPerformed",function(t){return function(e,n){var i,o;return i=n.event,o=n.items,t.deselectNodes(e,o,i)}}(this)),this.listControllers[t].getListView().on("KeyDownOnTreeView",function(t){return function(e){return t.keyEventHappened(e)}}(this))},e.prototype.setItemListeners=function(t){var e;return t.on("viewAppended",this.nodeWasAdded.bind(this,t)),e=["dblclick","click","mousedown","mouseup","mouseenter","mousemove"],this.getOptions().contextMenu&&e.push("contextmenu"),this.getOptions().dragdrop&&(e=e.concat(["dragstart","dragenter","dragleave","dragend","dragover","drop"])),t.on(e,function(e){return function(n){return e.mouseEventHappened(t,n)}}(this))},e.prototype.organizeSelectedNodes=function(t,e,n){var i,o,r,s;for(null==n&&(n={}),(n.metaKey||n.ctrlKey||n.shiftKey)&&this.getOptions().multipleSelection||this.deselectAllNodes(t),s=[],i=0,o=e.length;o>i;i++)r=e[i],s.push(p.call(this.selectedNodes,r)<0?this.selectedNodes.push(r):void 0);return s},e.prototype.deselectNodes=function(t,e){var n,i,o,r;for(r=[],n=0,i=e.length;i>n;n++)o=e[n],r.push(p.call(this.selectedNodes,o)>=0?this.selectedNodes.splice(this.selectedNodes.indexOf(o),1):void 0);return r},e.prototype.deselectAllNodes=function(t){var e,n,i;i=this.listControllers;for(e in i)c.call(i,e)&&(n=i[e],n!==t&&n.deselectAllItems());return this.selectedNodes=[]},e.prototype.selectNode=function(t,e,n){var i;return null==n&&(n=!0),t?(n&&this.setFocusState(),i=this.listControllers[this.getNodePId(t.getData())],i?i.selectItem(t,e):void 0):void 0},e.prototype.deselectNode=function(t,e){return this.listControllers[this.getNodePId(t.getData())].deselectSingleItem(t,e)},e.prototype.selectFirstNode=function(){return this.selectNode(this.nodes[this.getNodeId(this.indexedNodes[0])])},e.prototype.selectNodesByRange=function(t,e){var n,i,o,r,s,a;for(i=[this.indexedNodes.indexOf(t.getData()),this.indexedNodes.indexOf(e.getData())],i.sort(function(t,e){return t-e}),o=this.indexedNodes.slice(i[0],i[1]+1),a=[],n=0,r=o.length;r>n;n++)s=o[n],a.push(this.selectNode(this.nodes[this.getNodeId(s)],{shiftKey:!0}));return a},e.prototype.toggle=function(t){return t.expanded?this.collapse(t):this.expand(t)},e.prototype.expand=function(t){var e,n;return e=t.getData(),t.expand(),null!=(n=this.listControllers[this.getNodeId(e)])?n.getView().expand():void 0},e.prototype.collapse=function(t){var e,n;return e=t.getData(),null!=(n=this.listControllers[this.getNodeId(e)])?n.getView().collapse(function(){return function(){return t.collapse()}}(this)):void 0},e.prototype.showDragOverFeedback=function(){return r.utils.throttle(function(t){var e,n,i;return e=t.getData(),"file"!==e.type?t.setClass("drop-target"):(null!=(n=this.nodes[e.parentPath])&&n.setClass("drop-target"),null!=(i=this.listControllers[e.parentPath])&&i.getListView().setClass("drop-target")),t.setClass("items-hovering")},100)}(),e.prototype.clearDragOverFeedback=function(){return r.utils.throttle(function(t){var e,n,i;return e=t.getData(),"file"!==e.type?t.unsetClass("drop-target"):(null!=(n=this.nodes[e.parentPath])&&n.unsetClass("drop-target"),null!=(i=this.listControllers[e.parentPath])&&i.getListView().unsetClass("drop-target")),t.unsetClass("items-hovering")},100)}(),e.prototype.clearAllDragFeedback=function(){return this.utils.wait(101,function(t){return function(){var e,n,i,o,r,s;t.getView().$(".drop-target").removeClass("drop-target"),t.getView().$(".items-hovering").removeClass("items-hovering"),o=t.listControllers;for(i in o)c.call(o,i)&&(e=o[i],e.getListView().unsetClass("drop-target"));r=t.nodes,s=[];for(i in r)c.call(r,i)&&(n=r[i],s.push(n.unsetClass("items-hovering drop-target")));return s}}(this))},e.prototype.mouseEventHappened=function(t,e){switch(e.type){case"mouseenter":return this.mouseEnter(t,e);case"dblclick":return this.dblClick(t,e);case"click":return this.click(t,e);case"mousedown":return this.mouseDown(t,e);case"mouseup":return this.mouseUp(t,e);case"mousemove":return this.mouseMove(t,e);case"contextmenu":return this.contextMenu(t,e);case"dragstart":return this.dragStart(t,e);case"dragenter":return this.dragEnter(t,e);case"dragleave":return this.dragLeave(t,e);case"dragover":return this.dragOver(t,e);case"dragend":return this.dragEnd(t,e);case"drop":return this.drop(t,e)}},e.prototype.dblClick=function(t){return this.toggle(t)},e.prototype.click=function(t,e){return/arrow/.test(e.target.className)?(this.toggle(t),this.selectedItems):(this.lastEvent=e,(e.metaKey||e.ctrlKey||e.shiftKey)&&this.getOptions().multipleSelection||this.deselectAllNodes(),null!=t&&(e.shiftKey&&this.selectedNodes.length>0&&this.getOptions().multipleSelection?this.selectNodesByRange(this.selectedNodes[0],t):this.selectNode(t,e)),this.selectedItems)},e.prototype.contextMenu=function(){},e.prototype.mouseDown=function(t,e){return this.lastEvent=e,p.call(this.selectedNodes,t)<0?(this.mouseIsDown=!0,this.cancelDrag=!0,this.mouseDownTempItem=t,this.mouseDownTimer=setTimeout(function(n){return function(){return n.mouseIsDown=!1,n.cancelDrag=!1,n.mouseDownTempItem=null,n.selectNode(t,e)}}(this),1e3)):(this.mouseIsDown=!1,this.mouseDownTempItem=null)},e.prototype.mouseUp=function(){return clearTimeout(this.mouseDownTimer),this.mouseIsDown=!1,this.cancelDrag=!1,this.mouseDownTempItem=null},e.prototype.mouseEnter=function(t,e){return clearTimeout(this.mouseDownTimer),this.mouseIsDown&&this.getOptions().multipleSelection?(this.cancelDrag=!0,(e.metaKey||e.ctrlKey||e.shiftKey)&&this.getOptions().multipleSelection||this.deselectAllNodes(),this.selectNodesByRange(this.mouseDownTempItem,t)):void 0},e.prototype.dragStart=function(t,e){var n,i,o;return this.cancelDrag?(e.preventDefault(),e.stopPropagation(),!1):(this.dragIsActive=!0,n=e.originalEvent,n.dataTransfer.effectAllowed="copyMove",o=function(){var t,e,n,o;for(n=this.selectedNodes,o=[],t=0,e=n.length;e>t;t++)i=n[t],o.push(this.getNodeId(i.getData()));return o}.call(this),n.dataTransfer.setData("Text",o.join()),this.selectedNodes.length>1&&n.dataTransfer.setDragImage(l,-10,0),t.setClass("drag-started"))},e.prototype.dragEnter=function(t,e){return this.emit("dragEnter",t,e)},e.prototype.dragLeave=function(t,e){return this.clearAllDragFeedback(),this.emit("dragLeave",t,e)},e.prototype.dragOver=function(t,e){return this.emit("dragOver",t,e)},e.prototype.dragEnd=function(t,e){return this.dragIsActive=!1,t.unsetClass("drag-started"),this.clearAllDragFeedback(),this.emit("dragEnd",t,e)},e.prototype.drop=function(t,e){return this.dragIsActive=!1,e.preventDefault(),e.stopPropagation(),this.emit("drop",t,e),!1},e.prototype.setKeyView=function(){return this.listControllers[0]?r.getSingleton("windowController").setKeyView(this.listControllers[0].getListView()):void 0},e.prototype.keyEventHappened=function(t){var e,n,i,o;if(n=h()[t.which],o=this.selectedNodes[0],this.emit("keyEventPerformedOnTreeView",t),o)switch(n){case"down":case"up":if(t.preventDefault(),i=this["perform"+n.capitalize()+"Key"](o,t))return"function"==typeof(e=this.getView()).scrollToSubView?e.scrollToSubView(i):void 0;break;case"left":return this.performLeftKey(o,t);case"right":return this.performRightKey(o,t);case"backspace":return this.performBackspaceKey(o,t);case"enter":return this.performEnterKey(o,t);case"escape":return this.performEscapeKey(o,t);case"tab":return!1}},e.prototype.performDownKey=function(t,e){var n,i,o;return this.selectedNodes.length>1&&(t=this.selectedNodes[this.selectedNodes.length-1],(e.metaKey||e.ctrlKey||e.shiftKey)&&this.getOptions().multipleSelection||(this.deselectAllNodes(),this.selectNode(t))),o=t.getData(),n=this.indexedNodes.indexOf(o)+1,this.indexedNodes[n]?(i=this.nodes[this.getNodeId(this.indexedNodes[n])],this.isNodeVisible(i)?p.call(this.selectedNodes,i)>=0?this.deselectNode(this.nodes[this.getNodeId(o)]):(this.selectNode(i,e),i):this.performDownKey(i,e)):void 0},e.prototype.performUpKey=function(t,e){var n,i,o;return this.selectedNodes.length>1&&(t=this.selectedNodes[this.selectedNodes.length-1],(e.metaKey||e.ctrlKey||e.shiftKey)&&this.getOptions().multipleSelection||(this.deselectAllNodes(),this.selectNode(t))),o=t.getData(),n=this.indexedNodes.indexOf(o)-1,this.indexedNodes[n]&&(i=this.nodes[this.getNodeId(this.indexedNodes[n])],this.isNodeVisible(i)?p.call(this.selectedNodes,i)>=0?this.deselectNode(this.nodes[this.getNodeId(o)]):this.selectNode(i,e):this.performUpKey(i,e)),i},e.prototype.performRightKey=function(t){return this.expand(t)},e.prototype.performLeftKey=function(t){var e,n;return e=t.getData(),this.nodes[this.getNodePId(e)]&&(n=this.nodes[this.getNodePId(e)],this.selectNode(n)),n},e.prototype.performBackspaceKey=function(){},e.prototype.performEnterKey=function(){},e.prototype.performEscapeKey=function(){},e}(l)},{"../../core/kd":99,"../../core/viewcontroller":106,"../list/listviewcontroller":54,"../scrollview/scrollview":68,"./treeitemview":85,"./treeview":86}],88:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t("../../core/view"),n=t("../../core/customhtmlview"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.dragEnter=function(t){return t.preventDefault(),t.stopPropagation(),this.setClass("hover")},e.prototype.dragOver=function(t){return t.preventDefault(),t.stopPropagation(),this.setClass("hover")},e.prototype.dragLeave=function(t){return t.preventDefault(),t.stopPropagation(),this.unsetClass("hover")},e.prototype.drop=function(t){var e,n,i,o,r;for(t.preventDefault(),t.stopPropagation(),this.unsetClass("hover"),r=t.originalEvent,n=r.dataTransfer.files,i=0,o=n.length;o>i;i++)e=n[i],this.getDelegate().fileDropped(e);return!1},e.prototype.viewAppended=function(){var t,e;return e=this.getOptions().title,t=this.getDelegate().getOptions(),this.setPartial("<span>"+e+"</span>"),this.addSubView(new n({cssClass:"info",tagName:"span",tooltip:{title:"Max. File Amount: <b>"+t.limit+"</b> files<br/>Max. File Size: <b>"+t.fileMaxSize+"</b> kbytes<br/>Max. Total Size: <b>"+t.totalMaxSize+"</b> kbytes",placement:"above",offset:0,delayIn:300,html:!0,animate:!0,selector:null,partial:"i"}}))},e}(o)},{"../../core/customhtmlview":96,"../../core/view":105}],89:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("../list/listitemview"),e.exports=i=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.setClass("kdfileuploadlistitem clearfix"),this.active=!1}return r(e,t),e.prototype.click=function(t){return n(t.target).is("span.iconic.x")?this.emit("removeFile",{orgEvent:t}):void 0},e.prototype.viewAppended=function(){return this.$().append(this.partial(this.data))},e.prototype.partial=function(t){return n("<span class='file-title'>"+t.name+"</span> <span class='file-size'>"+(t.size/1024).toFixed(2)+"kb</span> <span class='x'></span>")},e}(o)},{"../list/listitemview":51,jquery:111}],90:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t("../list/listview"),n=t("./fileuploadlistitemview"),e.exports=i=function(t){function e(t,i){null==t.itemClass&&(t.itemClass=n),e.__super__.constructor.call(this,t,i),this.setClass("kdfileuploadlist"),this.itemsByName={}}return r(e,t),e.prototype.addItem=function(t){var e;return e=new(this.getOptions().itemClass)({delegate:this},t),this.getDelegate().on("removeFile",this.getDelegate().removeFile),this.addItem(e),this.itemsByName[t.name]=e},e}(o)},{"../list/listview":52,"./fileuploadlistitemview":89}],91:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t("jquery"),o=t("../list/listitemview"),e.exports=i=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.setClass("kdfileuploadthumbitem clearfix"),this.active=!1}return r(e,t),e.prototype.click=function(t){return n(t.target).is("span.iconic.x")?this.emit("removeFile",{orgEvent:t}):void 0},e.prototype.viewAppended=function(){return this.$().append(this.partial(this.data))},e.getURLVendor=function(){return window.URL||window.webkitURL||window.mozURL},e.prototype.partial=function(t){var e,i,o;return o=/image.*/,e=this.getURLVendor(),i=t.type.match(o)?e.createObjectURL(t):"./a/images/icon.file.png",n("<img class='thumb' src='"+i+"'/> <p class='meta'> <span class='file-title'>"+t.name+"</span> <span class='file-size'>"+(t.size/1024).toFixed(2)+"kb</span> <span class='close-icon'></span> </p>")},e}(o)},{"../list/listitemview":51,jquery:111}],92:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./fileuploadthumbitemview"),n=t("./fileuploadlistview"),e.exports=o=function(t){function e(t,n){null==t.itemClass&&(t.itemClass=i),e.__super__.constructor.call(this,t,n),this.setClass("kdfileuploadthumblist")}return r(e,t),e}(n)},{"./fileuploadlistview":90,"./fileuploadthumbitemview":91}],93:[function(t,e){var n,i,o,r,s,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=t("../../core/view"),s=t("../list/listviewcontroller"),l=t("../notifications/notificationview"),n=t("./fileuploadarea"),i=t("./fileuploadlistview"),o=t("./fileuploadthumblistview"),a=t("./multipartuploader"),e.exports=r=function(t){function e(t,n){null!=window.FileReader?(null==t.limit&&(t.limit=20),null==t.fileMaxSize&&(t.fileMaxSize=4096),null==t.filetotalSize&&(t.filetotalSize=4096),null==t.extensions&&(t.extensions=null),null==t.preview&&(t.preview="list"),null==t.title&&(t.title="Drop your files here!"),null==t.onlyOne&&(t.onlyOne=!1),e.__super__.constructor.call(this,t,n),this.listController=null,this.addDropArea(),this.addList(),this.files={},this.totalSizeToUpload=0,this.setClass("kdfileupload")):(e.__super__.constructor.call(this,t,n),this.setPartial("<p class='warning info'><strong>Oops sorry,</strong> file upload is only working on Chrome, Firefox and Opera at the moment. We're working on a fix.</p>"))}return c(e,t),e.prototype.addDropArea=function(){return this.dropArea=new n({title:this.getOptions().title,bind:"drop dragenter dragleave dragover dragstart dragend",cssClass:"kdfileuploadarea",delegate:this}),this.addSubView(this.dropArea)},e.prototype.addList=function(){return this.fileList=function(){switch(this.getOptions().preview){case"thumbs":return this.addThumbnailList();default:return this.addFileList()}}.call(this),this.listController=new s({view:this.fileList}),this.addSubView(this.listController.getView())},e.prototype.addFileList=function(){return new i({delegate:this})},e.prototype.addThumbnailList=function(){return new o({delegate:this})},e.prototype.fileDropped=function(t){var e;return e=new a({url:"/Upload",file:t}),e.send(),e.once("FileReadComplete",function(e){return function(n){return e.emit("FileReadComplete",{file:t,progressEvent:n}),e.fileReadComplete(t,n)}}(this)),e.once("FileUploadSuccess",function(e){return function(n){return e.fileUploadComplete(t,n)}}(this)),e.once("FileUploadError",this.bound("handleUploadError"))},e.prototype.handleUploadError=function(){},e.prototype.fileUploadComplete=function(t,e){var n;return null!=(n=this.fileList.itemsByName[t.name])&&n.setClass("uploaded"),this.emit("FileUploadComplete",e)},e.prototype.fileReadComplete=function(t,e){return t.data=e.target.result,this.putFileInQueue(t)},e.prototype.putFileInQueue=function(t){return this.getOptions().onlyOne&&(this.files={},this.fileList.empty()),!this.isDuplicate(t)&&this.checkLimits(t)?(this.files[t.name]=t,this.fileList.addItem(t),!0):!1},e.prototype.removeFile=function(t){var e;return e=t.getData(),delete this.files[e.name],this.fileList.removeItem(t)},e.prototype.isDuplicate=function(t){return null!=this.files[t.name]?(this.notify("File is already in queue!"),!0):!1},e.prototype.checkLimits=function(t){return this.checkFileAmount()&&this.checkFileSize(t)&&this.checkTotalSize(t)},e.prototype.checkFileAmount=function(){var t,e,n,i,o;n=this.getOptions().limit,t=1,o=this.files;for(i in o)p.call(o,i)&&(e=o[i],t++);return t>n?(this.notify("Total number of allowed file is "+n),!1):!0},e.prototype.checkTotalSize=function(t){var e,n,i,o;i=this.getOptions().totalMaxSize,o=t.size,n=this.files;for(e in n)p.call(n,e)&&(t=n[e],o+=t.size);return o/1024>i?(this.notify("Total allowed filesize is "+i+" kilobytes"),!1):!0},e.prototype.checkFileSize=function(t){var e;return e=this.getOptions().fileMaxSize,t.size/1024>e?(this.notify("Maximum allowed filesize is "+e+" kilobytes"),!1):!0},e.prototype.notify=function(t){return new l({title:t,duration:2e3,type:"tray"})},e}(u)},{"../../core/view":105,"../list/listviewcontroller":54,"../notifications/notificationview":60,"./fileuploadarea":88,"./fileuploadlistview":90,"./fileuploadthumblistview":92,"./multipartuploader":94}],94:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=t("../../core/eventemitter"),e.exports=i=function(t){function e(t){var n;if(this.url=t.url,this.file=t.file,n=t.id,!("FileReader"in window))throw new Error("FileReader API not found!");e.__super__.constructor.call(this),this.id=null!=n?n:"file"}var n;return o(e,t),n="gc0p4Jq0M2Yt08jU534c0p",e.prototype.makeMultipartItem=function(t,e){return"--"+n+'\r\n Content-Disposition: form-data; name="'+t+'"\r\n\r\n '+e+"\r\n"},e.prototype.serializedToMultipart=function(t){var e;return function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.makeMultipartItem(e.name,e.value));return o}.call(this).join("")},e.prototype.fileToMultipart=function(t){var e,i;return e=new FileReader,this.file?(i=function(t){return function(e){return"--"+n+'\r\n Content-Disposition: form-data; name="'+t.id+'"; filename="'+t.file.name+'"\r\n Content-Type: '+t.file.type+"\r\n\r\n "+e+"\r\n --"+n+"--\r\n"}}(this),e.onload=function(e){return function(n){return n.loaded===n.total?(e.emit("FileReadComplete",n),t(i(n.currentTarget.result))):void 0}}(this),e.readAsBinaryString(this.file)):t("")},e.prototype.send=function(){var t,e,i;return e=new FileReader,i=new XMLHttpRequest,t="",i.open("POST",this.url,!0),i.setRequestHeader("Content-Type","multipart/form-data; boundary="+n),i.onreadystatechange=function(t){return function(){return 4===i.readyState?i.status>=200&&i.status<400?t.emit("FileUploadSuccess",JSON.parse(i.responseText)):t.emit("FileUploadError",i):void 0}}(this),t+=this.serializedToMultipart([{name:this.id+"-size",value:this.file.size}]),this.fileToMultipart(function(e){var n,o,r,s,a;for(t+=e,s=r=t.length,n=new ArrayBuffer(s),a=new Uint8Array(n);r--;)a[r]=255&t.charCodeAt(r);return o=new Blob([a]),i.send(o)}),this},e}(n)},{"../../core/eventemitter":97}],95:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("./object"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(i)},{"./object":102}],96:[function(t,e){var n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=t("./view"),e.exports=n=function(t){function e(t,n){var i,o;
null==t&&(t={}),"string"==typeof t&&(this.tagName=t),null==this.tagName&&(this.tagName=null!=(i=t.tagName)?i:"div"),"a"===this.tagName&&null==(null!=(o=t.attributes)?o.href:void 0)&&(t.attributes||(t.attributes={}),t.attributes.href="#"),e.__super__.constructor.call(this,t,n)}return o(e,t),e.prototype.setDomElement=function(){var t;return e.__super__.setDomElement.apply(this,arguments),this.unsetClass("kdview"),t=this.getElement(),t.classList.length?void 0:t.removeAttribute("class")},e}(i)},{"./view":105}],97:[function(t,e){var n,i=[].slice;e.exports=n=function(){function t(t){var e;null==t&&(t={}),e=t.maxListeners,this._e={},this._maxListeners=e>0?e:10}var e,n,o,r;return t.registerStaticEmitter=function(){return this._e={}},o=function(t,e,n){return null==t[e]&&(t[e]=[]),t[e].push(n)},r=function(t,e,n){var i;return e&&"*"!==e?n&&t[e]?(i=t[e].indexOf(n),i>=0?t[e].splice(i,1):void 0):t[e]=[]:t={}},n=function(t,e,n){var i,r,s,a;if(null==e)throw new Error("Try passing an event, genius!");if(null==n)throw new Error("Try passing a listener, genius!");if(Array.isArray(e)){for(a=[],i=0,r=e.length;r>i;i++)s=e[i],a.push(o(t,s,n));return a}return o(t,e,n)},e=function(t,e,n){var i,o,s,a;if(Array.isArray(e)){for(a=[],i=0,o=e.length;o>i;i++)s=e[i],a.push(r(t,s,n));return a}return r(t,e,n)},t.emit=function(){var t,e,n,o,r,s,a;if(null==this._e)throw new Error("Static events are not enabled for this constructor.");for(n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],a=null!=(e=this._e)[n]?e[n]:e[n]=[],o=0,r=a.length;r>o;o++)s=a[o],s.apply(null,t);return this},t.on=function(t,e){if("function"!=typeof e)throw new Error("listener is not a function");if(null==this._e)throw new Error("Static events are not enabled for this constructor.");return this.emit("newListener",e),n(this._e,t,e),this},t.off=function(t,n){return this.emit("listenerRemoved",t,n),e(this._e,t,n),this},t.prototype.emit=function(){var t,e,n,o;return n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],null==(e=this._e)[n]&&(e[n]=[]),o=[],o=o.concat(this._e[n].slice(0)),o.forEach(function(e){return function(n){return n.apply(e,t)}}(this)),this},t.prototype.on=function(t,e){if("function"!=typeof e)throw new Error("listener is not a function");return this.emit("newListener",t,e),n(this._e,t,e),this},t.prototype.off=function(t,n){return this.emit("listenerRemoved",t,n),e(this._e,t,n),this},t.prototype.once=function(t,e){var n;return n=function(i){return function(){var o;return o=[].slice.call(arguments),i.off(t,n),e.apply(i,o)}}(this),this.on(t,n),this},t}()},{}],98:[function(t,e){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,r=[].slice;n=t("./eventemitter"),e.exports=n.Wildcard=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.apply(this,arguments),this._delim=t.delimiter||"."}var n,o,s,a;return i(e,t),a="*",o="_listeners",e.prototype.setMaxListeners=function(t){return this._maxListeners=t},n=function(t,e,i){var r,s,l,u;return null==i&&(i=0),r=[],i===e.length&&(l=t[o]),u=t[a],s=t[e[i]],null!=l&&(r=r.concat(l)),null!=u&&(r=r.concat(n(u,e,i+1))),null!=s&&(r=r.concat(n(s,e,i+1))),r},s=function(t,e,n,i){var r,a,l,u;return null==i&&(i=0),r=e[i],u=t[r],null!=u?s(u,e,n,i+1):void(t[o]=null!=n&&null!=(l=t[o])?function(){var t,e,i;for(i=[],t=0,e=l.length;e>t;t++)a=l[t],a!==n&&i.push(a);return i}():[])},e.prototype.emit=function(){var t,e,i,o,s,a,l;for(t=arguments[0],l=2<=arguments.length?r.call(arguments,1):[],this.hasOwnProperty("event")&&(a=this.event),this.event=t,s=n(this._e,t.split(this._delim)),e=0,i=s.length;i>e;e++)o=s[e],o.apply(this,l);return null!=a?this.event=a:delete this.event,this},e.prototype.off=function(t,e){return s(this._e,(null!=t?t:"*").split(this._delim),e),this},e.prototype.on=function(t,e){var n,i,r,s,a,l;if("function"!=typeof e)throw new Error("listener is not a function");for(this.emit("newListener",t,e),i=t.split(this._delim),l=this._e,r=0,s=i.length;s>r;r++)n=i[r],l=null!=l[n]?l[n]:l[n]={};return a=null!=l[o]?l[o]:l[o]=[],a.push(e),this},e}(n)},{"./eventemitter":97}],99:[function(t,e){var n,i,o,r,s,a,l,u,c;c=t("./utils"),i=t("kd-dom"),n={},r={},l={},u=[],a=null,s={},o=function(t){return null!=l[t]?l[t]:(console.warn("[getSingleton] "+t+" doesn't exist"),null)},e.exports={extend:function(t){var e,n,i;n=[];for(e in t){if(i=t[e],this[e])throw new Error(e+" is already registered");n.push(this[e]=i)}return n},registerSingleton:function(t,e,n){var i;return null==n&&(n=!1),null!=(i=l[t])?n?(console.warn("[registerSingleton] overriding "+t),"function"==typeof i.destroy&&i.destroy(),l[t]=e):(console.error("[registerSingleton] "+t+" exists. if you want to override set override param to true."),l[t]):l[t]=e},registerInstance:function(t){return r[t.id]&&console.warn("[registerInstance] instance is being overwritten"),r[t.id]=t},unregisterInstance:function(t){return delete r[t]},deleteInstance:function(t){return delete r[t]},getSingleton:o,singleton:o,getAllKDInstances:function(){return r},getInstanceForTesting:function(t){return s[t]},registerInstanceForTesting:function(t){var e;return e=t.getOption("testPath"),s[e]=t,t.on("KDObjectWillBeDestroyed",function(){return function(){return delete s[e]}}(this))},noop:function(){},log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),info:console.info.bind(console),time:console.time.bind(console),timeEnd:console.timeEnd.bind(console),debugStates:n,instances:r,singletons:l,subscriptions:u,lastFuncCall:a,instancesToBeTested:s,utils:c,dom:i}},{"./utils":104,"kd-dom":112}],100:[function(t,e){var n,i={}.hasOwnProperty;t("mousetrap"),t("mousetrap-global-bind"),t("mousetrap-record"),e.exports=n=function(){function t(){this.maps={},this.isListening=!1}var e;return e=function(t){return function(){var e,n;return e=this.isListening,e&&this.reset(),n=t.apply(this,arguments),e&&this.listen(),n}},t.prototype.addComboMap=e(function(t,e){var n,i,o,r;return i=null!=(n=this.maps)[o=null!=(r=null!=e?e:t.priority)?r:0]?n[o]:n[o]=[],i.push(t),this}),t.prototype.removeComboMap=e(function(t){var e,n,o;o=this.maps;for(n in o)i.call(o,n)&&(e=o[n],this.maps[n]=e.filter(function(e){return e!==t}));return this}),t.prototype.listen=function(){var e,n;return this.isActive()?this:(null!=(e=t.currentListener)&&e.reset(),n={},this.combos(function(t,e,i){var o;return null==e&&(e={global:!0}),n[t]?void 0:(n[t]=!0,o=e.global?"bindGlobal":"bind",Mousetrap[o](t,i))}),t.currentListener=this,this.isListening=!0,this)},t.prototype.reset=function(){return this.isActive()?(Mousetrap.reset(),this.isListening=!1,t.currentListener=null,this):this},t.prototype.getCombos=function(){return Object.keys(this.maps).sort(function(t,e){return e-t}).map(function(t){return function(e){return t.maps[e]}}(this)).reduce(function(t,e){return t.concat(e)},[])},t.prototype.combos=function(t){return this.getCombos().forEach(function(e){return e.eachCombo(t)}),this},t.prototype.isActive=function(){return this.isListening&&this===t.currentListener},t.current=function(){return null!=this.currentListener?this.currentListener:(this.currentListener=new this,this.currentListener.listen(),this.currentListener)},t.record=function(t){Mousetrap.record(t.bind(t))},t}()},{mousetrap:126,"mousetrap-global-bind":127,"mousetrap-record":128}],101:[function(t,e){var n,i={}.hasOwnProperty;e.exports=n=function(){function t(t){var e,n,o;if(this.combos={},null!=t&&(n=t.combos,this.priority=t.priority),null!=n)for(e in n)i.call(n,e)&&(o=n[e],this.addCombo(e,null,o))}return t.prototype.addCombo=function(t,e,n){var i;return null==n&&(i=[e,n],n=i[0],e=i[1]),this.combos[t]={listener:n,options:e},this},t.prototype.removeCombo=function(t){return this.combos[t]=null,this},t.prototype.eachCombo=function(t,e){var n,o,r,s,a;s=this.combos;for(n in s)i.call(s,n)&&(a=s[n],r=a.options,o=a.listener,t.call(e,n,r,o))},t}()},{}],102:[function(t,e){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].slice;n=t("./kd"),i=t("./eventemitter"),e.exports=o=function(t){function e(t,i){null==t&&(t={}),this.id||(this.id=t.id||n.utils.getUniqueId()),this.setOptions(t),i&&this.setData(i),t.delegate&&this.setDelegate(t.delegate),this.registerKDObjectInstance(),e.__super__.constructor.apply(this,arguments),t.testPath&&n.registerInstanceForTesting(this),this.on("error",n.error),this.once("ready",function(t){return function(){return t.readyState=o}}(this))}var i,o,s;return r(e,t),s=[0,1],i=s[0],o=s[1],e.prototype.utils=n.utils,e.prototype.define=function(t,e){return"function"==typeof e&&(e={get:e}),Object.defineProperty(this,t,e)},e.prototype.bound=function(t){var e;if("function"!=typeof this[t])throw new Error("bound: unknown method! "+t);return e="__bound__"+t,e in this||Object.defineProperty(this,e,{value:this[t].bind(this)}),this[e]},e.prototype.lazyBound=function(){var t,e,n;return t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],(e=this[t]).bind.apply(e,[this].concat(a.call(n)))},e.prototype.forwardEvent=function(t,e,n){return null==n&&(n=""),t.on(e,this.lazyBound("emit",n+e))},e.prototype.forwardEvents=function(t,e,n){var i,o,r,s;for(null==n&&(n=""),s=[],o=0,r=e.length;r>o;o++)i=e[o],s.push(this.forwardEvent(t,i,n));return s},e.prototype.ready=function(t){return("undefined"!=typeof Promise&&null!==Promise?Promise.prototype.nodeify:void 0)?new Promise(function(t){return function(e){return t.readyState===o&&e(),t.once("ready",e)}}(this)).nodeify(t):this.readyState===o?this.utils.defer(t):this.once("ready",t)},e.prototype.registerSingleton=n.registerSingleton,e.prototype.getSingleton=n.getSingleton,e.prototype.getInstance=function(t){var e;return null!=(e=n.getAllKDInstances()[t])?e:null},e.prototype.registerKDObjectInstance=function(){return n.registerInstance(this)},e.prototype.setData=function(t){this.data=t},e.prototype.getData=function(){return this.data},e.prototype.setOptions=function(t){this.options=null!=t?t:{}},e.prototype.setOption=function(t,e){return this.options[t]=e},e.prototype.unsetOption=function(t){return this.options[t]?delete this.options[t]:void 0},e.prototype.getOptions=function(){return this.options},e.prototype.getOption=function(t){var e;return null!=(e=this.options[t])?e:null},e.prototype.changeId=function(t){return n.deleteInstance(t),this.id=t,n.registerInstance(this)},e.prototype.getId=function(){return this.id},e.prototype.setDelegate=function(t){this.delegate=t},e.prototype.getDelegate=function(){return this.delegate},e.prototype.destroy=function(){return this.isDestroyed=!0,this.emit("KDObjectWillBeDestroyed"),n.deleteInstance(this.id)},e.prototype.chainNames=function(t){return t.chain,t.newLink,t.chain+"."+t.newLink},e}(i)},{"./eventemitter":97,"./kd":99}],103:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;i=t("./kd"),r=t("./object"),o=t("../components/notifications/notificationview"),n=t("htmlencode"),e.exports=s=function(t){function e(t){e.__super__.constructor.call(this),this.tree={},this.routes={},this.visitedRoutes=[],t&&this.addRoutes(t),i.utils.defer(function(t){return function(){return e.emit("RouterIsReady",t)}}(this))}var r,s,p,h,d;return a(e,t),s=window.history,p="_",e.registerStaticEmitter(),r=function(t){var e;if(null!=(null!=t?t.bongo_:void 0)&&null!=t.getId)return{constructorName:null!=(e=t.bongo_)?e.constructorName:void 0,id:t.getId()}},h=function(t,e){return null==(null!=t?t.constructorName:void 0)||null==t.id?e(null):i.remote.cacheable(t.constructorName,t.id,e)},e.prototype.listen=function(){var t;return location.hash.length&&(t=location.hash.substr(1),this.userRoute=t,this.utils.defer(function(e){return function(){return e.handleRoute(t,{shouldPushState:!0,replaceState:!0})}}(this))),this.startListening()},e.prototype.popState=function(t){return h(t.state,function(t){return function(e,n){return e?i.showError(e):t.handleRoute(""+location.pathname+location.search,{shouldPushState:!1,state:n})}}(this))},e.prototype.clear=function(t,e){return null==t&&(t="/"),null==e&&(e=!0),delete this.userRoute,this.handleRoute(t,{replaceState:e})},e.prototype.back=function(){return this.visitedRoutes.length<=1?this.clear():s.back()},e.prototype.startListening=function(){return this.isListening?!1:(this.isListening=!0,window.addEventListener("popstate",this.bound("popState")),!0)},e.prototype.stopListening=function(){return this.isListening?(this.isListening=!1,window.removeEventListener("popstate",this.bound("popState")),!0):!1},e.handleNotFound=function(t){return console.trace(),i.log("The route "+n.XSSEncode(t)+" was not found!")},e.prototype.getCurrentPath=function(){return this.currentPath},e.prototype.handleNotFound=function(t){var e;return e=/<|>/.test(t)?"Invalid route!":"404 Not found! "+n.XSSEncode(t),delete this.userRoute,this.clear(),i.log("The route "+t+" was not found!"),new o({title:e})},d=function(t,e){return"/"+t.slice(0,e).concat(t.slice(e+1)).join("/")},e.prototype.addRoute=function(t,e){var n,i,o,r,s,a;for(this.routes[t]=e,a=this.tree,t=t.split("/"),t.shift(),i=o=0,s=t.length;s>o;i=++o)n=t[i],r=n.length-1,"?"===n.charAt(r)&&(this.addRoute(d(t,i),e),n=n.substr(0,r)),/^:/.test(n)?(a[":"]||(a[":"]={name:n.substr(1)}),a=a[":"]):(a[n]||(a[n]={}),a=a[n]);return a[p]||(a[p]=[]),u.call(a[p],e)<0?a[p].push(e):void 0},e.prototype.addRoutes=function(t){var e,n,i;n=[];for(i in t)l.call(t,i)&&(e=t[i],n.push(this.addRoute(i,e)));return n},e.prototype.handleRoute=function(t,e){var n,i,o,a,l,u,h,d,f,m,g,v,y,w,b,C,_,x,k,D,S,O,T,E;for(null==e&&(e={}),0===t.indexOf("!")&&(t=t.slice(1)),this.visitedRoutes.last!==t&&this.visitedRoutes.push(t),k=(null!=(x=null!=t?t:"function"==typeof this.getDefaultRoute?this.getDefaultRoute():void 0)?x:"/").split("?"),i=k[0],_=2<=k.length?c.call(k,1):[],_=this.utils.parseQuery(_.join("&")),O=e.shouldPushState,D=e.replaceState,T=e.state,E=e.suppressListeners,null==O&&(O=!0),v=r(T),m=this.tree,w={},i=i.split("/"),i.shift(),i=i.filter(Boolean),b="/"+i.join("/"),C=this.utils.stringifyQuery(_),C.length&&(b+="?"+C),g=!1,o=0,l=i.length;l>o;o++)n=i[o],m[n]?m=m[n]:(y=m[":"],null!=y?(w[y.name]=n,m=y):g=!0);if(!E&&O&&!D&&b===this.currentPath)return void this.emit("AlreadyHere",b,{params:w,frags:i});if(g&&this.handleNotFound(i.join("/")),this.currentPath=b,O&&(f=D?"replaceState":"pushState",s[f](v,b,b)),S={params:w,query:_},this.emit("RouteInfoHandled",{params:w,query:_,path:b}),!E&&(d=m[p],null!=d?d.length:void 0))for(a=0,u=d.length;u>a;a++)h=d[a],h.call(this,S,T,b);return this},e.prototype.handleQuery=function(t){var e;return"string"!=typeof t&&(t=this.utils.stringifyQuery(t)),t.length?(e=this.currentPath+"?"+t,this.handleRoute(e)):void 0},e}(r)},{"../components/notifications/notificationview":60,"./kd":99,"./object":102,htmlencode:115}],104:[function(t,e){var n,i,o=[].slice;n=t("inflector"),e.exports={idCounter:0,extend:function(){var t,e,n,i,r,s,a;for(s=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],t=0,n=r.length;n>t;t++){i=r[t];for(e in i)a=i[e],s[e]=a}return s},dict:Object.create.bind(null,null,Object.create(null)),getNearestElementByTagName:function(t,e){for(;null!=t&&!this.elementHasTag(t,e);)t=t.parentNode;return t},elementShow:function(t){return null!=t?t.classList.remove("hidden"):void 0},elementHide:function(t){return null!=t?t.classList.add("hidden"):void 0},elementHasTag:function(t,e){var n;return Boolean((null!=(n=t.tagName)?n.toLowerCase():void 0)===e.toLowerCase())},elementIsVisible:function(t){var e,n,i,o,r,s,a;if(t.offsetWidth<=0||t.offsetHeight<=0)return!1;for(e=document.documentElement.clientHeight,a=t.getClientRects(),r=function(e){var n,i;return n=(e.left+e.right)/2,i=(e.top+e.bottom)/2,document.elementFromPoint(n,i)===t},n=0,o=a.length;o>n;){if(s=a[n],i=s.top>0?s.top<=e:s.bottom>0&&s.bottom<=e,i&&r(s))return!0;n++}return!1},formatPlural:function(t,e,i){return null==i&&(i=!0),""+(i?(t||0)+" ":"")+(1===t?e:n.pluralize(e))},formatIndefiniteArticle:function(t){var e;return"a"===(e=t[0].toLowerCase())||"e"===e||"i"===e||"o"===e||"u"===e?"an "+t:"a "+t},getSelection:function(){return window.getSelection()},getSelectionRange:function(){var t;return t=this.getSelection(),"None"!==t.type?t.getRangeAt(0):void 0},getCursorNode:function(){return this.getSelectionRange().commonAncestorContainer},addRange:function(t){var e;return e=window.getSelection(),e.removeAllRanges(),e.addRange(t)},selectText:function(t,e,n){var i,o;return null==n&&(n=e),document.body.createTextRange?(i=document.body.createTextRange(),i.moveToElementText(t),i.select()):window.getSelection?(o=window.getSelection(),i=document.createRange(),i.selectNodeContents(t),null!=e&&i.setStart(t,e),null!=n&&i.setEnd(t,n),o.removeAllRanges(),o.addRange(i)):void 0},selectEnd:function(t,e){return e||(e=document.createRange()),t||(t=this.getSelection().focusNode),t?(e.setStartAfter(t),e.collapse(!1),this.addRange(e)):void 0},replaceRange:function(t,e,n,i,o){var r,s;return null==i&&(i=n),null==o&&(o=!0),s=document.createTextNode(""),r=new Range,null!=n?(r.setStart(t,n),r.setEnd(t,i)):r.selectNode(t),r.deleteContents(),r.insertNode(e),this.selectEnd(e,r),o?(r.insertNode(s),this.selectEnd(s,r)):void 0},getCallerChain:function(t,e){var n,i;for(n=t.callee.caller,i=[n];e--&&(n=null!=n?n.caller:void 0);)i.push(n);return i},createCounter:i=function(t){return null==t&&(t=0),function(){return t++}},getUniqueId:function(t){return function(){return"kd-"+t()}}(i()),getRandomNumber:function(t,e){var n;return null==t&&(t=1e6),null==e&&(e=0),n=Math.floor(Math.random()*t+1),n>e?n:n+e},uniqueId:function(t){var e;return e=this.idCounter++,null!=t?""+t+e:e},getRandomRGB:function(){var t;return t=this.getRandomNumber,"rgb("+t(255)+","+t(255)+","+t(255)+")"},getRandomHex:function(){var t;for(t=(10066329*Math.random()<<0).toString(16);t.length<6;)t+="0";return"#"+t},curry:function(t,e){return t+(e?" "+e:"")},parseQuery:function(){var t,e,n,i;return e=/([^&=]+)=?([^&]*)/g,i=/\+/g,t=function(t){return decodeURIComponent(t.replace(i," "))},n=function(n){var i,o;for(null==n&&(n=location.search.substring(1)),o={};i=e.exec(n);)o[t(i[1])]=t(i[2]);return o}}(),stringifyQuery:function(){var t,e,n;return e=/\s/g,t=function(t){return encodeURIComponent(t.replace(e,"+"))},n=function(e){return Object.keys(e).map(function(n){return t(n)+"="+t(e[n])}).join("&").trim()}}(),capAndRemovePeriods:function(t){var e,n;return n=function(){var n,i,o,r;for(o=t.split("."),r=[],n=0,i=o.length;i>n;n++)e=o[n],r.push(e.capitalize());return r}(),n.join("")},slugify:function(t){var e;return null==t&&(t=""),e=String(t).toLowerCase().replace(/^\s+|\s+$/g,"").replace(/[_|\s]+/g,"-").replace(/[^a-z0-9-]+/g,"").replace(/[-]+/g,"-").replace(/^-+|-+$/g,"")},stripTags:function(t){return t.replace(/<(?:.|\n)*?>/gm,"")},decimalToAnother:function(t,e){var n,i,o,r,s,a,l,u,c;for(o=[],r=s=0;10>=s;r=++s)o[r+1]=r;for(u="",n=t;n>=e;)i=n%e,n=Math.floor(n/e),u+=o[i+1];for(u+=o[n+1],t=u.length,c="",r=a=0,l=t;l>=0?l>a:a>l;r=l>=0?++a:--a)c+=u.substring(t-r-1,t-r);return u=c},enterFullscreen:function(){var t;return t=function(t){return t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():void 0},function(e){return null==e&&(e=document.documentElement),t(e)}}(),exitFullscreen:function(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0},isFullscreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitIsFullScreen},createExternalLink:function(t){var e;return e=document.createElement("a"),e.href=t.indexOf("http")>-1?t:"http://"+t,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},wait:function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)},killWait:function(t){return t&&clearTimeout(t),null},repeat:function(t,e){return"function"==typeof t&&(e=t,t=500),setInterval(e,t)},killRepeat:function(t){return clearInterval(t)},defer:function(t){return("undefined"!=typeof window&&null!==window?window.postMessage:void 0)&&window.addEventListener?(window.addEventListener("message",function(e){return e.source===window&&"kd-tick"===e.data&&(e.stopPropagation(),t.length>0)?t.shift()():void 0},!0),function(e){return t.push(e),window.postMessage("kd-tick","*")}):function(t){return setTimeout(t,1)}}([]),getCancellableCallback:function(t){var e,n;return e=!1,n=function(){var n;return n=1<=arguments.length?o.call(arguments,0):[],e?void 0:t.apply(null,n)},n.cancel=function(){return e=!0},n},getTimedOutCallback:function(t,e,n){var i,r,s,a;return null==n&&(n=5e3),i=!1,a=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],clearTimeout(s),i?void 0:t.apply(null,e)},r=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],i||e.apply(null,t),i=!0},s=setTimeout(r,n),a},getTimedOutCallbackOne:function(t){var e,n,i,r,s,a,l,u,c;return null==t&&(t={}),c=t.name||"undefined",u=t.timeout||1e4,s=t.onSuccess||function(){},a=t.onTimeout||function(){},r=t.onResult||function(){},l=!1,i=function(t){return function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],clearTimeout(n),t.updateLogTimer(c,n,Date.now()),l?r.apply(null,e):s.apply(null,e)}}(this),e=function(t){return function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],l=!0,t.updateLogTimer(c,n),a.apply(null,e)}}(this),n=setTimeout(e,u),this.logTimer(c,n,Date.now()),i.cancel=function(){return clearTimeout(n)},i},logTimer:function(t,e,n){var i;return log("logTimer name:"+t),(i=this.timers)[t]||(i[t]={}),this.timers[t][e]={start:n,status:"started"}},updateLogTimer:function(t,e,n){var i,o,r,s;return s=this.timers[t][e],r=n?"ended":"failed",o=s.start,i=n-o,s={start:o,end:n,status:r,elapsed:i},this.timers[t][e]=s,log("updateLogTimer name:"+t+", status:"+r+" elapsed:"+i)},timers:{},stopDOMEvent:function(t){return t?(t.preventDefault(),t.stopPropagation(),!1):!1},utf8Encode:function(t){var e,n,i;for(t=t.replace(/\r\n/g,"\n"),i="",n=0;n<t.length;)e=t.charCodeAt(n),128>e?i+=String.fromCharCode(e):e>127&&2048>e?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128)),n++;return i},utf8Decode:function(t){var e,n,i,o,r,s;for(s="",r=0,e=n=i=0;r<t.length;)e=t.charCodeAt(r),128>e?(s+=String.fromCharCode(e),r++):e>191&&224>e?(i=t.charCodeAt(r+1),s+=String.fromCharCode((31&e)<<6|63&i),r+=2):(i=t.charCodeAt(r+1),o=t.charCodeAt(r+2),s+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&o),r+=3);return s},runXpercent:function(t){var e;return e=Math.floor(100*Math.random()),t>=e},shortenUrl:function(t,e){var n;return n=$.ajax("https://www.googleapis.com/urlshortener/v1/url",{type:"POST",contentType:"application/json",data:JSON.stringify({longUrl:t}),timeout:4e3,dataType:"json"}),n.done(function(){return function(n){return e((null!=n?n.id:void 0)||t,n)}}(this)),n.error(function(n){var i,o,r;return o=n.status,r=n.statusText,i=n.responseText,error("URL shorten error, returning self as fallback.",o,r,i),e(t)})},formatBytesToHumanReadable:function(t,e){var n,i,o,r;if(null==e&&(e=2),n="",0>t&&(n="-",t*=-1),i=1024,r=["kB","MB","GB","TB","PB","EB","ZB","YB"],o=-1,i>t)return t+" B";for(;;)if(t/=i,++o,!(t>=i))break;return""+n+t.toFixed(e)+" "+r[o]},splitTrim:function(t,e,n){var i,o;return null==e&&(e=","),null==n&&(n=!0),i=null!=(o=null!=t?t.split(e).map(function(t){return t.trim()}):void 0)?o:[],n&&(i=i.filter(Boolean)),i},arrayToObject:function(t,e){var n,i,o,r;for(n={},i=0,o=t.length;o>i;i++)r=t[i],null!=r[e]&&(n[r[e]]=r);return n},partition:function(t,e){var n,i,o,r;for(r=[[],[]],i=0,o=t.length;o>i;i++)n=t[i],r[+!e(n)].push(n);return r},throttle:function(t,e,n){var i,o,r,s,a,l,u;return"number"==typeof e&&(a=[e,t],t=a[0],e=a[1]),o=null,i=null,l=null,u=null,s=0,null==n&&(n={}),r=function(){return s=n.leading===!1?0:Date.now,u=null,l=e.apply(o,i),u?void 0:o=i=null},function(){var a,c;return a=Date.now,s||n.leading!==!1||(s=a),c=t-(a-s),o=this,i=arguments,0>=c||c>t?(u&&(clearTimeout(u),u=null),s=a,l=e.apply(o,i),u||(o=i=null)):u||n.trailing===!1||(u=setTimeout(r,c)),l}},debounce:function(t,e,n){var i,o,r,s,a,l,u;return"number"==typeof e&&(s=[e,t],t=s[0],e=s[1]),l=null,i=null,o=null,u=null,a=null,r=function(){var s;return s=Date.now-u,t>s&&s>=0?l=setTimeout(r,t-s):(l=null,n||(a=e.apply(o,i),l)?void 0:o=i=null)},function(){var s;return o=this,i=arguments,u=Date.now,s=n&&!l,null==l&&(l=setTimeout(r,t)),s&&(a=e.apply(o,i),o=i=null),a}},relativeOffset:function(t,e){var n,i,o;for(i=0,o=0,n=t;n&&(i+=n.offsetLeft,o+=n.offsetTop,n!==e);)if(n=n.parentNode,null==n)throw new Error("Not a descendant!");return[i,o]},isTouchDevice:function(){var t;try{return document.createEvent("TouchEvent"),!0}catch(e){return t=e,!1}}}},{inflector:116}],105:[function(t,e){var n,i,o,r,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;n=t("jquery"),i=t("./kd"),o=t("./object"),s=t("mutation-summary"),e.exports=r=function(e){function o(t,e){null==t&&(t={}),t.tagName||(t.tagName="div"),t.domId||(t.domId=null),t.cssClass||(t.cssClass=""),t.parent||(t.parent=null),t.partial||(t.partial=null),t.delegate||(t.delegate=null),t.bind||(t.bind=""),t.draggable||(t.draggable=null),t.size||(t.size=null),t.position||(t.position=null),t.attributes||(t.attributes=null),t.prefix||(t.prefix=""),t.suffix||(t.suffix=""),t.tooltip||(t.tooltip=null),null==t.lazyLoadThreshold&&(t.lazyLoadThreshold=!1),t.droppable||(t.droppable=null),t.resizable||(t.resizable=null),o.__super__.constructor.call(this,t,e),null!=e&&"function"==typeof e.on&&e.on("update",this.bound("render")),this.defaultInit()}var r,p,h,d,f;return a(o,e),r=Object.defineProperty,p=function(t){return i.warn(t+" is deprecated from KDView if you need it override in your subclass")},h=/^((dbl)?click|key(up|down|press)|mouse(up|down|over|enter|leave|move)|drag(start|end|enter|leave|over)|blur|change|focus|drop|contextmenu|scroll|paste|error|load|wheel)$/,d=function(){return{dblclick:"dblClick",keyup:"keyUp",keydown:"keyDown",keypress:"keyPress",mouseup:"mouseUp",mousedown:"mouseDown",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mousemove:"mouseMove",wheel:"mouseWheel",mousewheel:"mouseWheel",mouseover:"mouseOver",contextmenu:"contextMenu",dragstart:"dragStart",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",paste:"paste",transitionend:"transitionEnd"}},f=function(t){var e,n,i;n=t.overridden;for(i in n)l.call(n,i)&&(e=n[i],t.overrider[i]||(t.overrider[i]=e));return t.overrider},o.prototype.appendToDomBody=function(){return this.parentIsInDom=!0,this.lazy?void 0:(n("body").append(this.$()),this.utils.defer(function(t){return function(){return t.emit("viewAppended")}}(this)))},o.appendToDOMBody=function(t){return i.warn("KDView.appendToDOMBody is deprecated; use #appendToDomBody instead"),t.appendToDomBody()},o.prototype.defaultInit=function(){var t,e,n,i,o,r,s,a,u,c,p,h;return o=this.getOptions(),this.domId=o.domId,this.parent=o.parent,this.subViews=[],e=o.cssClass,t=o.attributes,c=o.size,u=o.position,r=o.partial,n=o.draggable,s=o.pistachio,a=o.pistachioParams,i=o.lazyLoadThreshold,h=o.tooltip,n=o.draggable,p=o.tagName,this.setDomElement(e),this.setDataId(),this.domId&&this.setDomId(this.domId),t&&this.setAttributes(t),u&&this.setPosition(u),r&&this.updatePartial(r),n&&this.setClass("kddraggable"),this.addEventHandlers(o),i&&this.setLazyLoader(i),h&&this.setTooltip(h),n&&this.setDraggable(n),this.bindEvents(),this.on("childAppended",this.childAppended.bind(this)),this.on("viewAppended",function(t){return function(){var e,n,i,o,r,s,a,u;if(t.setViewReady(),t.viewAppended(),t.childAppended(t),t.parentIsInDom=!0,n=function(t){return t.parentIsInDom||(t.parentIsInDom=!0,t.lazy)?void 0:t.emit("viewAppended")},u=t.getSubViews(),Array.isArray(u)){for(s=[],i=0,r=u.length;r>i;i++)e=u[i],s.push(n(e));return s}if(null!=u&&"object"==typeof u){a=[];for(o in u)l.call(u,o)&&(e=u[o],a.push(n(e)));return a}}}(this))},o.prototype.getDomId=function(){return this.domElement.attr("id")},o.prototype.setDomElement=function(t){var e,i,o,r,s,a,l,u;for(null==t&&(t=""),a=this.getOptions(),e=a.domId,u=a.tagName,e&&(i=document.getElementById(e)),this.lazy=null==i?(i=document.createElement(u),e?i.id=e:void 0,!1):!0,l=("kdview "+t).split(" "),o=0,s=l.length;s>o;o++)r=l[o],r.length&&i.classList.add(r);return this.domElement=n(i),this.lazy?this.utils.defer(function(t){return function(){return t.emit("viewAppended")}}(this)):void 0},o.prototype.setDomId=function(t){return this.domElement.attr("id",t)},o.prototype.setData=function(t){var e,n;return null!=(e=this.data)&&"function"==typeof e.off&&e.off("update",this.bound("render")),o.__super__.setData.call(this,t),null!=(n=this.data)&&"function"==typeof n.on&&n.on("update",this.bound("render")),this.parentIsInDom?this.render():void 0},o.prototype.setDataId=function(){return this.domElement.data("data-id",this.getId())},o.prototype.getAttribute=function(t){return this.getElement().getAttribute(t)},o.prototype.setAttribute=function(t,e){return this.getElement().setAttribute(t,e)},o.prototype.setAttributes=function(t){var e,n,i;n=[];for(e in t)l.call(t,e)&&(i=t[e],n.push(this.setAttribute(e,i)));return n},o.prototype.isInDom=function(){var t;return t=function(t){var e;for(e=t;e.parentNode;)e=e.parentNode;return e},function(){return null!=t(this.$()[0]).body}}(),o.prototype.getDomElement=function(){return this.domElement},o.prototype.getElement=function(){return this.getDomElement()[0]},o.prototype.getTagName=function(){return this.options.tagName||"div"},o.prototype.$=function(t){return t?this.getDomElement().find(t):this.getDomElement()},o.prototype.append=function(t,e){return this.$(e).append(t.$()),this.parentIsInDom&&t.emit("viewAppended"),this},o.prototype.appendTo=function(t,e){return this.$().appendTo(t.$(e)),this.parentIsInDom&&this.emit("viewAppended"),this},o.prototype.appendToSelector=function(t){return n(t).append(this.$()),this.emit("viewAppended")},o.prototype.prepend=function(t,e){return this.$(e).prepend(t.$()),this.parentIsInDom&&t.emit("viewAppended"),this},o.prototype.prependTo=function(t,e){return this.$().prependTo(t.$(e)),this.parentIsInDom&&this.emit("viewAppended"),this},o.prototype.prependToSelector=function(t){return n(t).prepend(this.$()),this.emit("viewAppended")},o.prototype.setPartial=function(t,e){return this.$(e).append(t),this},o.prototype.updatePartial=function(t,e){return this.$(e).html(t)},o.prototype.clear=function(){return this.getElement().innerHTML=""},o.setElementClass=function(t,e,n){var i,o,r,s,a;for(s=n.split(" "),a=[],o=0,r=s.length;r>o;o++)i=s[o],""!==i&&a.push(t.classList[e](i));return a},o.prototype.setCss=function(t,e){return this.$().css(t,e)},o.prototype.setStyle=function(t){var e,n,i;n=[];for(e in t)l.call(t,e)&&(i=t[e],n.push(this.$().css(e,i)));return n},o.prototype.setClass=function(t){return t?(o.setElementClass(this.getElement(),"add",t),this):void 0},o.prototype.unsetClass=function(t){return t?(o.setElementClass(this.getElement(),"remove",t),this):void 0},o.prototype.toggleClass=function(t){return this.hasClass(t)?this.unsetClass(t):this.setClass(t),this},o.prototype.hasClass=function(t){return t?this.getElement().classList.contains(t):!1
},o.prototype.getBounds=function(){return{x:this.getX(),y:this.getY(),w:this.getWidth(),h:this.getHeight(),n:this.constructor.name}},o.prototype.setRandomBG=function(){return this.getDomElement().css("background-color",i.utils.getRandomRGB())},o.prototype.hide=function(){return this.setClass("hidden")},o.prototype.show=function(){return this.unsetClass("hidden")},o.prototype.setPosition=function(){var t;return t=this.getOptions().position,t.position="absolute",this.$().css(t)},o.prototype.getWidth=function(){return this.$().outerWidth(!1)},o.prototype.setWidth=function(t,e){return null==e&&(e="px"),this.getElement().style.width=""+t+e,this.emit("ViewResized",{newWidth:t,unit:e})},o.prototype.getHeight=function(){return this.getDomElement().outerHeight(!1)},o.prototype.setHeight=function(t,e){return null==e&&(e="px"),this.getElement().style.height=""+t+e,this.emit("ViewResized",{newHeight:t,unit:e})},o.prototype.setX=function(t){return this.$().css({left:t})},o.prototype.setY=function(t){return this.$().css({top:t})},o.prototype.getX=function(){return this.getElement().getBoundingClientRect().left},o.prototype.getY=function(){return this.getElement().getBoundingClientRect().top},o.prototype.getRelativeX=function(){return this.$().position().left},o.prototype.getRelativeY=function(){return this.$().position().top},o.prototype.destroyChild=function(t){var e;return null!=this[t]?("function"==typeof(e=this[t]).destroy&&e.destroy(),delete this[t],!0):!1},o.prototype.attach=function(t){return this.getElement().appendChild(t.getElement()),t.setParent(this),this.subViews.push(t)},o.prototype.detach=function(){var t;return null!=(t=this.parent)&&t.getElement().removeChild(this.getElement()),this.orphanize(),this.unsetParent()},o.prototype.orphanize=function(){var t,e;return(null!=(e=this.parent)?e.subViews:void 0)&&(t=this.parent.subViews.indexOf(this))>=0?(this.parent.subViews.splice(t,1),this.unsetParent()):void 0},o.prototype.destroy=function(){return this.getSubViews().length>0&&this.destroySubViews(),this.orphanize(),this.getDomElement().remove(),null!=this.$overlay&&this.removeOverlay(),o.__super__.destroy.apply(this,arguments)},o.prototype.destroySubViews=function(){var t,e,n,i;for(n=this.getSubViews().slice(),t=0,e=n.length;e>t;t++)i=n[t],"function"==typeof i.destroy&&i.destroy()},o.prototype.addSubView=function(t,e,n){if(null==t)throw new Error("no subview was specified");return this.subViews.push(t),t.setParent(this),t.parentIsInDom=this.parentIsInDom,t.lazy||(n?this.prepend(t,e):this.append(t,e)),t.on("ViewResized",function(){return t.parentDidResize()}),null!=this.template&&this.template.addSymbol(t),t},o.prototype.removeSubView=function(t){return t.destroy()},o.prototype.getSubViews=function(){var t;return t=this.subViews,null!=this.items&&(t=t.concat([].slice.call(this.items))),t},o.prototype.setParent=function(t){return null!=this.parent?i.error("View already has a parent",this,this.parent):r?r(this,"parent",{value:t,configurable:!0}):this.parent=t},o.prototype.unsetParent=function(){return delete this.parent},o.prototype.embedChild=function(t,e,n){return this.addSubView(e,"#"+t,!1),n?void 0:this.$("#"+t).replaceWith(e.$())},o.prototype.render=function(t){return null!=this.template?this.template.update(t):void 0},o.prototype.addEventHandlers=function(t){var e,n,i;i=[];for(n in t)l.call(t,n)&&(e=t[n],i.push(h.test(n)&&"function"==typeof e?this.on(n,e):void 0));return i},o.prototype.parentDidResize=function(t,e){var n,i,o,r,s;if(this.getSubViews()){for(o=this.getSubViews(),r=[],n=0,i=o.length;i>n;n++)s=o[n],r.push(s.parentDidResize(t,e));return r}},o.prototype.setLazyLoader=function(t){var e,n;return null==t&&(t=.75),e=this.getOptions().bind,/scroll/.test(e)||(this.getOptions().bind=i.utils.curry("scroll",e)),n=this,this.on("scroll",function(){var e;return t=Math.max(50,t),e=0,function(){var n,i,o,r,s,a;return r=this.getElement(),s=r.scrollHeight,a=r.scrollTop,o=this.getHeight(),0>a?e=o:o>s-a?void 0:(n=a+o,i=n>e?"down":"up","up"===i&&t>a&&this.emit("TopLazyLoadThresholdReached"),"down"===i&&n>s-t&&this.emit("LazyLoadThresholdReached"),e=n)}}())},o.prototype.bindEvents=function(t){var e,n,i,o;return t||(t=this.getDomElement()),e="mousedown mouseup click dblclick",o=this.getOptions().bind,i=function(){var t,r;if(o){for(i=e.trim().split(" "),o=o.trim().split(" "),t=0,r=o.length;r>t;t++)n=o[t],u.call(i,n)<0&&i.push(n);return i.join(" ")}return e}(),t.bind(i,function(t){return function(e){var n;return n=t.handleEvent(e),n||e.stopPropagation(),!0}}(this)),i},o.prototype.bindTransitionEnd=function(){var t,e,n,i,o;t=document.createElement("fakeelement"),i={OTransition:"oTransitionEnd",MozTransition:"transitionend",webkitTransition:"webkitTransitionEnd"},n="transitionend";for(e in i)if(l.call(i,e)&&(o=i[e],e in t.style)){n=o;break}return this.bindEvent(n),"transitionend"!==n?this.on(n,this.emit.bind(this,"transitionend")):void 0},o.prototype.bindEvent=function(t,e){var n;return e||(n=[t,this.$()],e=n[0],t=n[1]),t.bind(e,function(t){return function(e){var n;return n=t.handleEvent(e),n||e.stopPropagation(),!0}}(this))},o.prototype.handleEvent=function(t){var e,n;return e=d()[t.type]||t.type,n=null!=this[e]?this[e](t):!0,n!==!1&&this.emit(t.type,t),n},o.prototype.scroll=function(){return!0},o.prototype.load=function(){return!0},o.prototype.error=function(){return!0},o.prototype.keyUp=function(){return!0},o.prototype.keyDown=function(){return!0},o.prototype.keyPress=function(){return!0},o.prototype.dblClick=function(){return!0},o.prototype.click=function(){return!0},o.prototype.contextMenu=function(){return!0},o.prototype.mouseMove=function(){return!0},o.prototype.mouseEnter=function(){return!0},o.prototype.mouseLeave=function(){return!0},o.prototype.mouseUp=function(){return!0},o.prototype.mouseOver=function(){return!0},o.prototype.mouseWheel=function(){return!0},o.prototype.mouseDown=function(){return this.unsetKeyView(),!0},o.prototype.paste=function(){return!0},o.prototype.dragEnter=function(t){return t.preventDefault(),t.stopPropagation()},o.prototype.dragOver=function(t){return t.preventDefault(),t.stopPropagation()},o.prototype.dragLeave=function(t){return t.preventDefault(),t.stopPropagation()},o.prototype.drop=function(t){return t.preventDefault(),t.stopPropagation()},o.prototype.submit=function(){return!1},o.prototype.setEmptyDragState=function(t){var e;return null==t&&(t=!1),t&&this.dragState&&(e=this.$(),e.css("left",0),e.css("top",0)),this.dragState={containment:null,handle:null,axis:null,direction:{current:{x:null,y:null},global:{x:null,y:null}},position:{relative:{x:0,y:0},initial:{x:0,y:0},global:{x:0,y:0}},meta:{top:0,right:0,bottom:0,left:0}}},o.prototype.setDraggable=function(t){var e;return null==t&&(t={}),t===!0&&(t={}),this.setEmptyDragState(),e=t.handle instanceof o?t.handle:this,this.on("DragFinished",function(t){return function(){return t.beingDragged=!1}}(this)),e.on("mousedown",function(e){return function(r){var s,a,u,c,p,h,d,f,m,g;if("string"!=typeof t.handle||0!==n(r.target).closest(t.handle).length){if(e.dragIsAllowed=!0,e.setEmptyDragState(),p=e.dragState,t.containment){if(p.containment={},p.containment.m={w:e.getWidth(),h:e.getHeight()},g=t.containment.view,s="string"==typeof g?e[g].getBounds():g instanceof o?g.getBounds():e.parent.getBounds(),p.containment.viewBounds=s,f={top:0,right:0,bottom:0,left:0},h=t.containment.padding,"number"==typeof h)for(d in f)l.call(f,d)&&(m=f[d],m=h);else"object"==typeof h&&i.utils.extend(f,h);p.containment.padding=f}return p.handle=t.handle,p.axis=t.axis,u=p.meta,a=e.getElement(),u.top=parseInt(a.style.top,10)||0,u.right=parseInt(a.style.right,10)||0,u.bottom=parseInt(a.style.bottom,10)||0,u.left=parseInt(a.style.left,10)||0,c=e.dragState.position,c.initial.x=r.pageX,c.initial.y=r.pageY,i.getSingleton("windowController").setDragView(e),e.emit("DragStarted",r,e.dragState),r.stopPropagation(),r.preventDefault(),!1}}}(this))},o.prototype.drag=function(t,e){var n,i,o,r,s,a,l,u,c,p,h,d,f,m,g,v,y,w,b,C,_,x,k,D;return C=this.dragState,r=C.directionX,s=C.directionY,n=C.axis,i=C.containment,k=e.x,D=e.y,d=this.dragState.position,f=d.relative,p=d.initial,c=d.global,l=this.dragState.direction,u=l.global,a=l.current,n=this.getOptions().draggable.axis,m=n?Math.abs("x"===n?k:D):Math.max(Math.abs(k),Math.abs(D)),this.dragIsAllowed=this.beingDragged=!(20>m&&!this.beingDragged),k>f.x?a.x="right":k<f.x&&(a.x="left"),D>f.y?a.y="bottom":D<f.y&&(a.y="top"),c.x=p.x+k,c.y=p.y+D,u.x=k>0?"right":"left",u.y=D>0?"bottom":"top",this.dragIsAllowed&&(g=this.$(),h=this.dragState.meta,_=h.right&&!h.left?"right":"left",x=h.bottom&&!h.top?"bottom":"top",y="left"===_?h.left+f.x:h.right-f.x,w="top"===x?h.top+f.y:h.bottom-f.y,i&&(v=i.m,b=i.viewBounds,o=i.padding,y<=o.left&&(y=o.left),w<=o.top&&(w=o.top),y+v.w>=b.w-o.right&&(y=b.w-v.w-o.right),w+v.h>=b.h-o.bottom&&(w=b.h-v.h-o.bottom)),"y"!==n&&g.css(_,y),"x"!==n&&g.css(x,w)),f.x=k,f.y=D,this.emit("DragInAction",k,D)},o.prototype.viewAppended=function(){},o.prototype.childAppended=function(t){var e;return null!=(e=this.parent)?e.emit("childAppended",t):void 0},o.prototype.setViewReady=function(){return this.viewIsReady=!0},o.prototype.isViewReady=function(){return this.viewIsReady||!1},o.prototype.observeMutations=function(){var t,e;if(s)return t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,e=new s({callback:function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.emit.apply(t,["MutationHappened"].concat(c.call(e)))}}(this),rootNode:this.getElement(),queries:[{all:!0}]})},o.prototype.putOverlay=function(e){var n;return null==e&&(e={}),e.delegate=this,n=t("../components/overlay/overlayview"),this.overlay=new n(e)},o.prototype.removeOverlay=function(){var t;return null!=(t=this.overlay)?t.destroy():void 0},o.prototype.unsetTooltip=function(){var t;return null!=(t=this.tooltip)&&t.destroy(),this.tooltip=null},o.prototype.setTooltip=function(e){var n,i;return null==e&&(e={}),i={above:"s",below:"n",left:"e",right:"w"},e.title||(e.title=""),e.cssClass||(e.cssClass=""),e.placement||(e.placement="top"),e.direction||(e.direction="center"),e.offset||(e.offset={top:0,left:0}),e.delayIn||(e.delayIn=0),e.delayOut||(e.delayOut=0),null==e.html&&(e.html=!0),null==e.animate&&(e.animate=!1),e.selector||(e.selector=null),e.gravity||(e.gravity=i[e.placement]),e.fade||(e.fade=e.animate),e.fallback||(e.fallback=e.title),e.view||(e.view=null),null==e.sticky&&(e.sticky=!1),null==e.permanent&&(e.permanent=!1),e.delegate||(e.delegate=this),e.events||(e.events=["mouseenter","mouseleave","mousemove"]),this.unsetTooltip(),n=t("../components/tooltip/tooltip"),this.tooltip=new n(e,{})},o.prototype.getTooltip=function(){return this.tooltip},o.prototype._windowDidResize=function(){},o.prototype.listenWindowResize=function(t){var e;return null==t&&(t=!0),e=i.getSingleton("windowController"),t?e.registerWindowResizeListener(this):e.unregisterWindowResizeListener(this)},o.prototype.setKeyView=function(){var t;return t=i.getSingleton("windowController"),t.setKeyView(this)},o.prototype.unsetKeyView=function(){var t;return t=i.getSingleton("windowController"),t.setKeyView(null)},o.prototype.activateKeyView=function(){return"function"==typeof this.emit?this.emit("KDViewBecameKeyView"):void 0},o}(o)},{"../components/overlay/overlayview":61,"../components/tooltip/tooltip":84,"./kd":99,"./object":102,jquery:111,"mutation-summary":118}],106:[function(t,e){var n,i,o,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("./kd"),o=t("./view"),i=t("./controller"),e.exports=r=function(t){function e(t,n){null==t&&(t={}),t.view||(t.view=new o),e.__super__.constructor.call(this,t,n),this.getOptions().view&&this.setView(this.getOptions().view)}return s(e,t),e.prototype.loadView=function(){},e.prototype.getView=function(){return this.mainView},e.prototype.setView=function(t){var e;return this.mainView=t,this.emit("ControllerHasSetItsView"),e=this.loadView.bind(this,t),t.isViewReady()?e():(t.once("viewAppended",e),t.once("KDObjectWillBeDestroyed",function(t){return function(){return n.utils.defer(t.bound("destroy"))}}(this)))},e}(i)},{"./controller":95,"./kd":99,"./view":105}],107:[function(t,e){var n,i,o,r,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),i=t("./kd"),r=t("./keyboard/listener"),s=t("./keyboard/map"),o=t("./controller"),e.exports=a=function(t){function e(t,n){this.windowResizeListeners={},this.keyEventsToBeListened=["keydown","keyup","keypress"],this.currentCombos={},this.keyView=null,this.dragView=null,this.layers=[],this.unloadListeners={},this.focusListeners=[],this.focused=!0,this.bindEvents(),e.__super__.constructor.call(this,t,n)}var o,a,p;return l(e,t),e.keyViewHistory=[],a=-1===navigator.userAgent.indexOf("Mac OS X")?"ctrl":"command",o=function(t,e,n){return null==n&&(n=!0),window.addEventListener(t,e,n)},e.prototype.addLayer=function(t){return c.call(this.layers,t)<0?(this.layers.push(t),t.on("KDObjectWillBeDestroyed",function(e){return function(){return e.removeLayer(t)}}(this))):void 0},e.prototype.removeLayer=function(t){var e;return c.call(this.layers,t)>=0?(e=this.layers.indexOf(t),this.layers.splice(e,1)):void 0},e.prototype.bindEvents=function(){var t,e,r,s,a;for(a=this.keyEventsToBeListened,e=0,s=a.length;s>e;e++)t=a[e],window.addEventListener(t,this.bound("key"));return window.addEventListener("resize",this.bound("notifyWindowResizeListeners")),document.addEventListener("scroll",function(t){return function(){var e,n;return n=null,e=document.body,i.utils.throttle(function(e){return t.emit("ScrollHappened",e)},50)}}(this)(),!1),o("dragenter",function(t){return function(e){return t.dragInAction?void 0:(t.emit("DragEnterOnWindow",e),t.setDragInAction(!0))}}(this)),o("dragleave",function(t){return function(e){var n,i;return 0<(n=e.clientX)&&n<t.winWidth&&0<(i=e.clientY)&&i<t.winHeight?void 0:(t.emit("DragExitOnWindow",e),t.setDragInAction(!1))}}(this)),o("drop",function(t){return function(e){return t.emit("DragExitOnWindow",e),t.emit("DropOnWindow",e),t.setDragInAction(!1)}}(this)),r=this.layers,o("mousedown",function(t){return function(e){var i;return i=r.last,i&&0===n(e.target).closest(null!=i?i.$():void 0).length?(i.emit("ReceivedClickElsewhere",e),t.removeLayer(i)):void 0}}(this)),o("mouseup",function(t){return function(e){return t.dragView&&t.unsetDragView(e),t.emit("ReceivedMouseUpElsewhere",e)}}(this)),o("mousemove",function(t){return function(e){return t.dragView?t.redirectMouseMoveEvent(e):void 0}}(this)),o("click",function(t){var e,n,o,r,s;if(r=i.utils.getNearestElementByTagName(t.target,"a"),0===(null!=r&&null!=(s=r.target)?s.length:void 0)){if(e=r.getAttribute("href"),n=0===(null!=e?e.indexOf("http"):void 0),o=0===(null!=e?e.indexOf("mailto"):void 0),n)return r.target="_blank";if(!o&&(t.preventDefault(),e&&!/^#/.test(e)))return i.getSingleton("router").handleRoute(e)}},!1),o("beforeunload",this.bound("beforeUnload")),window.onfocus=function(t){return function(e){return t.focusChange(e,!0)}}(this),window.onblur=function(t){return function(e){return t.focusChange(e,!1)}}(this)},e.prototype.addUnloadListener=function(t,e){var n;return(n=this.unloadListeners)[t]||(n[t]=[]),this.unloadListeners[t].push(e)},e.prototype.clearUnloadListeners=function(t){return t?this.unloadListeners[t]=[]:this.unloadListeners={}},e.prototype.isFocused=function(){return this.focused},e.prototype.addFocusListener=function(t){return this.focusListeners.push(t)},e.prototype.focusChange=function(t,e){var n,i,o,r,s;if(t){for(this.focused=e,r=this.focusListeners,s=[],n=0,i=r.length;i>n;n++)o=r[n],s.push(o(e,t));return s}},e.prototype.beforeUnload=function(t){var e,n,i,o,r,s,a;if(t){a=this.unloadListeners;for(n in a)if(u.call(a,n))for(r=a[n],e=0,i=r.length;i>e;e++)if(o=r[e],o()===!1)return s="window"!==n?" on "+n:"","Please make sure that you saved all your work"+s+"."}},e.prototype.setDragInAction=function(t){return this.dragInAction=null!=t?t:!1,document.body.classList[this.dragInAction?"add":"remove"]("dragInAction")},e.prototype.setMainView=function(t){this.mainView=t},e.prototype.getMainView=function(){return this.mainView},e.prototype.revertKeyView=function(t){return t?t===this.keyView&&this.keyView!==this.oldKeyView?this.setKeyView(this.oldKeyView):void 0:void i.warn("view, which shouldn't be the keyview anymore, must be passed as a parameter!")},p=function(t){var e,n,i;i={};for(n in t)u.call(t,n)&&(e=t[n],/\bsuper(\+|\s)/.test(n)&&(n=n.replace(/super/g,a)),i[n]=e);return i},e.prototype.viewHasKeyCombos=function(t){var e,n,i,o,r,s,a,l,c;if(t){for(a=t.getOptions(),i={},l=this.keyEventsToBeListened,r=0,s=l.length;s>r;r++)if(o=l[r],"object"==typeof a[o]){c=a[o];for(n in c)u.call(c,n)&&(e=c[n],i[n]=e)}return Object.keys(i).length>0?i:!1}},e.prototype.registerKeyCombos=function(t){var e;return e=this.viewHasKeyCombos(t),null!=e?(this.comboMap=new s({combos:e}),r.current().addComboMap(this.comboMap)):void 0},e.prototype.unregisterKeyCombos=function(){return r.current().removeComboMap(this.comboMap),this.keyView?this.keyView.unsetClass("mousetrap"):void 0},e.prototype.setKeyView=function(t){return null!=t&&"function"==typeof t.activateKeyView&&t.activateKeyView(),t!==this.keyView?(this.unregisterKeyCombos(),this.oldKeyView=this.keyView,this.keyView=t,this.registerKeyCombos(t),this.constructor.keyViewHistory.push(t),null!=t&&"function"==typeof t.activateKeyView&&t.activateKeyView(),this.emit("WindowChangeKeyView",t)):void 0},e.prototype.setDragView=function(t){return this.setDragInAction(!0),this.dragView=t},e.prototype.unsetDragView=function(t){return this.setDragInAction(!1),this.dragView.emit("DragFinished",t),this.dragView=null},e.prototype.redirectMouseMoveEvent=function(t){var e,n,i,o,r,s,a;return a=this.dragView,r=t.pageX,s=t.pageY,n=a.dragState.position.initial,i=n.x,o=n.y,e={x:r-i,y:s-o},a.drag(t,e)},e.prototype.getKeyView=function(){return this.keyView},e.prototype.key=function(t){var e;return this.emit(t.type,t),null!=(e=this.keyView)?e.handleEvent(t):void 0},e.prototype.registerWindowResizeListener=function(t){return this.windowResizeListeners[t.id]=t,t.on("KDObjectWillBeDestroyed",function(e){return function(){return e.windowResizeListeners[t.id]=null}}(this))},e.prototype.unregisterWindowResizeListener=function(t){return this.windowResizeListeners[t.id]=null},e.prototype.notifyWindowResizeListeners=function(t){var e,n,i,o;t||(t={type:"resize"}),i=this.windowResizeListeners,o=[];for(n in i)u.call(i,n)&&(e=i[n],(null!=e?e._windowDidResize:void 0)&&o.push(e._windowDidResize(t)));return o},e}(o),function(){return i=t("./kd"),i.registerSingleton("windowController",new a)}()},{"./controller":95,"./kd":99,"./keyboard/listener":100,"./keyboard/map":101,jquery:111}],108:[function(t,e){t("kd-polyfills"),e.exports=t("./core/kd"),e.exports.extend({AutoComplete:t("./components/autocomplete/autocomplete"),AutoCompleteController:t("./components/autocomplete/autocompletecontroller"),AutoCompletedItem:t("./components/autocomplete/autocompleteditems"),AutoCompleteFetchingItem:t("./components/autocomplete/autocompletefetchingitem"),AutoCompleteListView:t("./components/autocomplete/autocompletelist"),AutoCompleteListItemView:t("./components/autocomplete/autocompletelistitem"),AutoCompleteNothingFoundItem:t("./components/autocomplete/autocompletenothingfounditem"),AutocompleteUnselecteableItem:t("./components/autocomplete/autocompleteunselecteableitem"),MultipleInputListView:t("./components/autocomplete/multipleinputlistview"),MultipleInputView:t("./components/autocomplete/multipleinputview"),MultipleListItemView:t("./components/autocomplete/multiplelistitemview"),NoAutocompleteInputView:t("./components/autocomplete/noautocompleteinputview"),NoAutocompleteMultipleListView:t("./components/autocomplete/noautocompletemultiplelistview"),SimpleAutocomplete:t("./components/autocomplete/simpleautocomplete"),ButtonBar:t("./components/buttons/buttonbar"),ButtonGroupView:t("./components/buttons/buttongroupview"),JButtonMenu:t("./components/buttons/buttonmenu"),ButtonView:t("./components/buttons/buttonview"),ButtonViewWithMenu:t("./components/buttons/buttonviewwithmenu"),ToggleButton:t("./components/buttons/togglebutton"),ContextMenu:t("./components/contextmenu/contextmenu"),JContextMenuItem:t("./components/contextmenu/contextmenuitem"),JContextMenuTreeView:t("./components/contextmenu/contextmenutreeview"),JContextMenuTreeViewController:t("./components/contextmenu/contextmenutreeviewcontroller"),CounterDigitView:t("./components/counter/counterdigitview"),CounterView:t("./components/counter/counterview"),DiaContainer:t("./components/dia/diacontainer"),DiaJoint:t("./components/dia/diajoint"),DiaObject:t("./components/dia/diaobject"),DiaScene:t("./components/dia/diascene"),DialogView:t("./components/dialog/dialogview"),FormView:t("./components/forms/formview"),FormViewWithFields:t("./components/forms/formviewwithfields"),HeaderView:t("./components/header/headerview"),WebcamView:t("./components/image/webcamview"),CheckBox:t("./components/inputs/checkbox"),ContentEditableView:t("./components/inputs/contenteditableview"),DelimitedInputView:t("./components/inputs/delimitedinputview"),HitEnterInputView:t("./components/inputs/hitenterinputview"),InputCheckboxGroup:t("./components/inputs/inputcheckboxgroup"),InputRadioGroup:t("./components/inputs/inputradiogroup"),InputSwitch:t("./components/inputs/inputswitch"),InputValidator:t("./components/inputs/inputvalidator"),InputView:t("./components/inputs/inputview"),LabelView:t("./components/inputs/labelview"),MultipleChoice:t("./components/inputs/multiplechoice"),OnOffSwitch:t("./components/inputs/onoffswitch"),SelectBox:t("./components/inputs/selectbox"),TokenizedInput:t("./components/inputs/tokenizedinputview"),WmdInput:t("./components/inputs/wmdinput"),ListItemView:t("./components/list/listitemview"),ListView:t("./components/list/listview"),ListViewBox:t("./components/list/listviewbox"),ListViewController:t("./components/list/listviewcontroller"),LoaderView:t("./components/loader/loaderview"),BlockingModalView:t("./components/modals/blockingmodalview"),ModalView:t("./components/modals/modalview"),ModalViewStack:t("./components/modals/modalviewstack"),ModalViewWithForms:t("./components/modals/modalviewwithforms"),NotificationView:t("./components/notifications/notificationview"),OverlayView:t("./components/overlay/overlayview"),SpotlightView:t("./components/overlay/spotlightview"),ProgressBarView:t("./components/progressbar/progressbarview"),CustomScrollView:t("./components/scrollview/customscrollview"),CustomScrollViewWrapper:t("./components/scrollview/customscrollviewinner"),ScrollThumb:t("./components/scrollview/scrollthumb"),ScrollTrack:t("./components/scrollview/scrolltrack"),ScrollView:t("./components/scrollview/scrollview"),SliderBarHandleView:t("./components/sliderbar/sliderbarhandleview"),SliderBarView:t("./components/sliderbar/sliderbarview"),SlidePageView:t("./components/slideshow/slidepageview"),SlideShowView:t("./components/slideshow/slideshowview"),SplitComboView:t("./components/split/splitcomboview"),SplitViewPanel:t("./components/split/splitpanel"),SplitResizer:t("./components/split/splitresizer"),SplitView:t("./components/split/splitview"),TabHandleContainer:t("./components/tabs/tabhandlecontainer"),TabHandleMoveNav:t("./components/tabs/tabhandlemovenav"),TabHandleView:t("./components/tabs/tabhandleview"),TabPaneView:t("./components/tabs/tabpaneview"),TabView:t("./components/tabs/tabview"),TabViewWithForms:t("./components/tabs/tabviewwithforms"),TimeAgoView:t("./components/time/timeagoview"),Tooltip:t("./components/tooltip/tooltip"),JTreeItemView:t("./components/tree/treeitemview"),JTreeView:t("./components/tree/treeview"),JTreeViewController:t("./components/tree/treeviewcontroller"),FileUploadArea:t("./components/upload/fileuploadarea"),FileUploadListItemView:t("./components/upload/fileuploadlistitemview"),FileUploadListView:t("./components/upload/fileuploadlistview"),FileUploadThumbItemView:t("./components/upload/fileuploadthumbitemview"),FileUploadThumbListView:t("./components/upload/fileuploadthumblistview"),FileUploadView:t("./components/upload/fileuploadview"),MultipartUploader:t("./components/upload/multipartuploader"),Controller:t("./core/controller"),CustomHTMLView:t("./core/customhtmlview"),EventEmitter:t("./core/eventemitter"),EventEmitterWildcard:t("./core/eventemitterwildcard"),KeyboardListener:t("./core/keyboard/listener"),KeyboardMap:t("./core/keyboard/map"),Object:t("./core/object"),Router:t("./core/router"),View:t("./core/view"),ViewController:t("./core/viewcontroller"),WindowController:t("./core/windowcontroller")})},{"./components/autocomplete/autocomplete":1,"./components/autocomplete/autocompletecontroller":2,"./components/autocomplete/autocompleteditems":3,"./components/autocomplete/autocompletefetchingitem":4,"./components/autocomplete/autocompletelist":5,"./components/autocomplete/autocompletelistitem":6,"./components/autocomplete/autocompletenothingfounditem":7,"./components/autocomplete/autocompleteunselecteableitem":8,"./components/autocomplete/multipleinputlistview":9,"./components/autocomplete/multipleinputview":10,"./components/autocomplete/multiplelistitemview":11,"./components/autocomplete/noautocompleteinputview":12,"./components/autocomplete/noautocompletemultiplelistview":13,"./components/autocomplete/simpleautocomplete":14,"./components/buttons/buttonbar":15,"./components/buttons/buttongroupview":16,"./components/buttons/buttonmenu":17,"./components/buttons/buttonview":18,"./components/buttons/buttonviewwithmenu":19,"./components/buttons/togglebutton":20,"./components/contextmenu/contextmenu":21,"./components/contextmenu/contextmenuitem":22,"./components/contextmenu/contextmenutreeview":23,"./components/contextmenu/contextmenutreeviewcontroller":24,"./components/counter/counterdigitview":25,"./components/counter/counterview":26,"./components/dia/diacontainer":27,"./components/dia/diajoint":28,"./components/dia/diaobject":29,"./components/dia/diascene":30,"./components/dialog/dialogview":31,"./components/forms/formview":32,"./components/forms/formviewwithfields":33,"./components/header/headerview":34,"./components/image/webcamview":35,"./components/inputs/checkbox":36,"./components/inputs/contenteditableview":37,"./components/inputs/delimitedinputview":38,"./components/inputs/hitenterinputview":39,"./components/inputs/inputcheckboxgroup":40,"./components/inputs/inputradiogroup":41,"./components/inputs/inputswitch":42,"./components/inputs/inputvalidator":43,"./components/inputs/inputview":44,"./components/inputs/labelview":45,"./components/inputs/multiplechoice":46,"./components/inputs/onoffswitch":47,"./components/inputs/selectbox":48,"./components/inputs/tokenizedinputview":49,"./components/inputs/wmdinput":50,"./components/list/listitemview":51,"./components/list/listview":52,"./components/list/listviewbox":53,"./components/list/listviewcontroller":54,"./components/loader/loaderview":55,"./components/modals/blockingmodalview":56,"./components/modals/modalview":57,"./components/modals/modalviewstack":58,"./components/modals/modalviewwithforms":59,"./components/notifications/notificationview":60,"./components/overlay/overlayview":61,"./components/overlay/spotlightview":62,"./components/progressbar/progressbarview":63,"./components/scrollview/customscrollview":64,"./components/scrollview/customscrollviewinner":65,"./components/scrollview/scrollthumb":66,"./components/scrollview/scrolltrack":67,"./components/scrollview/scrollview":68,"./components/sliderbar/sliderbarhandleview":69,"./components/sliderbar/sliderbarview":70,"./components/slideshow/slidepageview":71,"./components/slideshow/slideshowview":72,"./components/split/splitcomboview":73,"./components/split/splitpanel":74,"./components/split/splitresizer":75,"./components/split/splitview":76,"./components/tabs/tabhandlecontainer":77,"./components/tabs/tabhandlemovenav":78,"./components/tabs/tabhandleview":79,"./components/tabs/tabpaneview":80,"./components/tabs/tabview":81,"./components/tabs/tabviewwithforms":82,"./components/time/timeagoview":83,"./components/tooltip/tooltip":84,"./components/tree/treeitemview":85,"./components/tree/treeview":86,"./components/tree/treeviewcontroller":87,"./components/upload/fileuploadarea":88,"./components/upload/fileuploadlistitemview":89,"./components/upload/fileuploadlistview":90,"./components/upload/fileuploadthumbitemview":91,"./components/upload/fileuploadthumblistview":92,"./components/upload/fileuploadview":93,"./components/upload/multipartuploader":94,"./core/controller":95,"./core/customhtmlview":96,"./core/eventemitter":97,"./core/eventemitterwildcard":98,"./core/kd":99,"./core/keyboard/listener":100,"./core/keyboard/map":101,"./core/object":102,"./core/router":103,"./core/view":105,"./core/viewcontroller":106,"./core/windowcontroller":107,"kd-polyfills":113}],109:[function(e,n){!function(e,i,o,r){"use strict";function s(t,e,n){return setTimeout(h(t,n),e)}function a(t,e,n){return Array.isArray(t)?(l(t,n[e],n),!0):!1}function l(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function u(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===r)&&(t[i[o]]=e[i[o]]),o++;return t}function c(t,e){return u(t,e,!0)}function p(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&u(i,n)}function h(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==je?t.apply(e?e[0]||r:r,e):t}function f(t,e){return t===r?e:t}function m(t,e,n){l(w(e),function(e){t.addEventListener(e,n,!1)})}function g(t,e,n){l(w(e),function(e){t.removeEventListener(e,n,!1)})}function v(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function _(t,e,n){for(var i,o=[],r=[],s=0;s<t.length;)i=e?t[s][e]:t[s],b(r,i)<0&&o.push(t[s]),r[s]=i,s++;return n&&(o=e?o.sort(function(t,n){return t[e]>n[e]}):o.sort()),o}function x(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),s=0;s<Fe.length;){if(n=Fe[s],i=n?n+o:e,i in t)return i;s++}return r}function k(){return We++}function D(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function S(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function O(t){var e,n=t.options.inputClass;return new(e=n?n:Xe?j:Ye?B:Ue?K:H)(t,T)}function T(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&en&&i-o===0,s=e&(on|rn)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,E(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function E(t,e){var n,i,o,r,s,a=t.session,l=e.pointers,u=l.length;a.firstInput||(a.firstInput=P(e)),u>1&&!a.firstMultiple?a.firstMultiple=P(e):1===u&&(a.firstMultiple=!1),n=a.firstInput,i=a.firstMultiple,o=i?i.center:n.center,r=e.center=N(l),e.timeStamp=Be(),e.deltaTime=e.timeStamp-n.timeStamp,e.angle=R(o,r),e.distance=z(o,r),I(a,e),e.offsetDirection=A(e.deltaX,e.deltaY),e.scale=i?F(i.pointers,l):1,e.rotation=i?M(i.pointers,l):0,V(a,e),s=t.element,v(e.srcEvent.target,s)&&(s=e.srcEvent.target),e.target=s}function I(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};(e.eventType===en||r.eventType===on)&&(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)
}function V(t,e){var n,i,o,s,a,l,u,c=t.lastInterval||e,p=e.timeStamp-c.timeStamp;e.eventType!=rn&&(p>tn||c.velocity===r)?(a=c.deltaX-e.deltaX,l=c.deltaY-e.deltaY,u=L(p,a,l),i=u.x,o=u.y,n=qe(u.x)>qe(u.y)?u.x:u.y,s=A(a,l),t.lastInterval=e):(n=c.velocity,i=c.velocityX,o=c.velocityY,s=c.direction),e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=s}function P(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:$e(t.pointers[n].clientX),clientY:$e(t.pointers[n].clientY)},n++;return{timeStamp:Be(),pointers:e,center:N(e),deltaX:t.deltaX,deltaY:t.deltaY}}function N(t){var e,n,i,o=t.length;if(1===o)return{x:$e(t[0].clientX),y:$e(t[0].clientY)};for(e=0,n=0,i=0;o>i;)e+=t[i].clientX,n+=t[i].clientY,i++;return{x:$e(e/o),y:$e(n/o)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function A(t,e){return t===e?sn:qe(t)>=qe(e)?t>0?an:ln:e>0?un:cn}function z(t,e,n){n||(n=fn);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function R(t,e,n){n||(n=fn);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function M(t,e){return R(e[1],e[0],mn)-R(t[1],t[0],mn)}function F(t,e){return z(e[0],e[1],mn)/z(t[0],t[1],mn)}function H(){this.evEl=pe,this.evWin=he,this.allow=!0,this.pressed=!1,S.apply(this,arguments)}function j(){this.evEl=me,this.evWin=ge,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function $(){this.evTarget=ye,this.evWin=we,this.started=!1,S.apply(this,arguments)}function q(t,e){var n=C(t.touches),i=C(t.changedTouches);return e&(on|rn)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function B(){this.evTarget=Ce,this.targetIds={},S.apply(this,arguments)}function W(t,e){var n,i,o,r,s,a=C(t.touches),l=this.targetIds;if(e&(en|nn)&&1===a.length)return l[a[0].identifier]=!0,[a,a];if(o=C(t.changedTouches),r=[],s=this.target,i=a.filter(function(t){return v(t.target,s)}),e===en)for(n=0;n<i.length;)l[i[n].identifier]=!0,n++;for(n=0;n<o.length;)l[o[n].identifier]&&r.push(o[n]),e&(on|rn)&&delete l[o[n].identifier],n++;return r.length?[_(i.concat(r),"identifier",!0),r]:void 0}function K(){S.apply(this,arguments);var t=h(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new H(this.manager,t)}function U(t,e){this.manager=t,this.set(e)}function X(t){var e,n;return y(t,Oe)?Oe:(e=y(t,Te),n=y(t,Ee),e&&n?Te+" "+Ee:e||n?e?Te:Ee:y(t,Se)?Se:De)}function Y(t){this.id=k(),this.manager=null,this.options=c(t||{},this.defaults),this.options.enable=f(this.options.enable,!0),this.state=Ie,this.simultaneous={},this.requireFail=[]}function J(t){return t&Ae?"cancel":t&Ne?"end":t&Pe?"move":t&Ve?"start":""}function G(t){return t==cn?"down":t==un?"up":t==an?"left":t==ln?"right":""}function Q(t,e){var n=e.manager;return n?n.get(t):t}function Z(){Y.apply(this,arguments)}function te(){Z.apply(this,arguments),this.pX=null,this.pY=null}function ee(){Z.apply(this,arguments)}function ne(){Y.apply(this,arguments),this._timer=null,this._input=null}function ie(){Z.apply(this,arguments)}function oe(){Z.apply(this,arguments)}function re(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(t,e){return e=e||{},e.recognizers=f(e.recognizers,se.defaults.preset),new ae(t,e)}function ae(t,e){e=e||{},this.options=c(e,se.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=O(this),this.touchAction=new U(this,this.options.touchAction),le(this,!0),l(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function le(t,e){var n=t.element;l(t.options.cssProps,function(t,i){n.style[x(n.style,i)]=e?t:""})}function ue(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var ce,pe,he,de,fe,me,ge,ve,ye,we,be,Ce,_e,xe,ke,De,Se,Oe,Te,Ee,Ie,Ve,Pe,Ne,Le,Ae,ze,Re,Me,Fe=["","webkit","moz","MS","ms","o"],He=i.createElement("div"),je="function",$e=Math.round,qe=Math.abs,Be=Date.now,We=1,Ke=/mobile|tablet|ip(ad|hone|od)|android/i,Ue="ontouchstart"in e,Xe=x(e,"PointerEvent")!==r,Ye=Ue&&Ke.test(navigator.userAgent),Je="touch",Ge="pen",Qe="mouse",Ze="kinect",tn=25,en=1,nn=2,on=4,rn=8,sn=1,an=2,ln=4,un=8,cn=16,pn=an|ln,hn=un|cn,dn=pn|hn,fn=["x","y"],mn=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(D(this.element),this.evWin,this.domHandler)}},ce={mousedown:en,mousemove:nn,mouseup:on},pe="mousedown",he="mousemove mouseup",p(H,S,{handler:function(t){var e=ce[t.type];e&en&&0===t.button&&(this.pressed=!0),e&nn&&1!==t.which&&(e=on),this.pressed&&this.allow&&(e&on&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Qe,srcEvent:t}))}}),de={pointerdown:en,pointermove:nn,pointerup:on,pointercancel:rn,pointerout:rn},fe={2:Je,3:Ge,4:Qe,5:Ze},me="pointerdown",ge="pointermove pointerup pointercancel",e.MSPointerEvent&&(me="MSPointerDown",ge="MSPointerMove MSPointerUp MSPointerCancel"),p(j,S,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=de[i],r=fe[t.pointerType]||t.pointerType,s=r==Je,a=b(e,t.pointerId,"pointerId");o&en&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):o&(on|rn)&&(n=!0),0>a||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}}),ve={touchstart:en,touchmove:nn,touchend:on,touchcancel:rn},ye="touchstart",we="touchstart touchmove touchend touchcancel",p($,S,{handler:function(t){var e,n=ve[t.type];n===en&&(this.started=!0),this.started&&(e=q.call(this,t,n),n&(on|rn)&&e[0].length-e[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:e[0],changedPointers:e[1],pointerType:Je,srcEvent:t}))}}),be={touchstart:en,touchmove:nn,touchend:on,touchcancel:rn},Ce="touchstart touchmove touchend touchcancel",p(B,S,{handler:function(t){var e=be[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Je,srcEvent:t})}}),p(K,S,{handler:function(t,e,n){var i=n.pointerType==Je,o=n.pointerType==Qe;if(i)this.mouse.allow=!1;else if(o&&!this.mouse.allow)return;e&(on|rn)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}}),_e=x(He.style,"touchAction"),xe=_e!==r,ke="compute",De="auto",Se="manipulation",Oe="none",Te="pan-x",Ee="pan-y",U.prototype={set:function(t){t==ke&&(t=this.compute()),xe&&(this.manager.element.style[_e]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),X(t.join(" "))},preventDefaults:function(t){var e,n,i,o,r,s;if(!xe)return e=t.srcEvent,n=t.offsetDirection,this.manager.session.prevented?void e.preventDefault():(i=this.actions,o=y(i,Oe),r=y(i,Ee),s=y(i,Te),o||r&&n&pn||s&&n&hn?this.preventSrc(e):void 0)},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},Ie=1,Ve=2,Pe=4,Ne=8,Le=Ne,Ae=16,ze=32,Y.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?J(i):""),t)}var n=this,i=this.state;Ne>i&&e(!0),e(),i>=Ne&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ze)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ze|Ie)))return!1;t++}return!0},recognize:function(t){var e=u({},t);return d(this.options.enable,[this,e])?(this.state&(Le|Ae|ze)&&(this.state=Ie),this.state=this.process(e),void(this.state&(Ve|Pe|Ne|Ae)&&this.tryEmit(e))):(this.reset(),void(this.state=ze))},process:function(){},getTouchAction:function(){},reset:function(){}},p(Z,Y,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(Ve|Pe),o=this.attrTest(t);return i&&(n&rn||!o)?e|Ae:i||o?n&on?e|Ne:e&Ve?e|Pe:Ve:ze}}),p(te,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:dn},getTouchAction:function(){var t=this.options.direction,e=[];return t&pn&&e.push(Ee),t&hn&&e.push(Te),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&pn?(o=0===r?sn:0>r?an:ln,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?sn:0>s?un:cn,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(this.state&Ve||!(this.state&Ve)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),p(ee,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Oe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ve)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),p(ne,Y,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[De]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(on|rn)&&!o)this.reset();else if(t.eventType&en)this.reset(),this._timer=s(function(){this.state=Le,this.tryEmit()},e.time,this);else if(t.eventType&on)return Le;return ze},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Le&&(t&&t.eventType&on?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Be(),this.manager.emit(this.options.event,this._input)))}}),p(ie,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Oe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ve)}}),p(oe,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:pn|hn,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(pn|hn)?e=t.velocity:n&pn?e=t.velocityX:n&hn&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&qe(e)>this.options.velocity&&t.eventType&on},emit:function(t){var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(re,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Se]},process:function(t){var e,n,i,o=this.options,r=t.pointers.length===o.pointers,a=t.distance<o.threshold,l=t.deltaTime<o.time;if(this.reset(),t.eventType&en&&0===this.count)return this.failTimeout();if(a&&l&&r){if(t.eventType!=on)return this.failTimeout();if(e=this.pTime?t.timeStamp-this.pTime<o.interval:!0,n=!this.pCenter||z(this.pCenter,t.center)<o.posThreshold,this.pTime=t.timeStamp,this.pCenter=t.center,n&&e?this.count+=1:this.count=1,this._input=t,i=this.count%o.taps,0===i)return this.hasRequireFailures()?(this._timer=s(function(){this.state=Le,this.tryEmit()},o.interval,this),Ve):Le}return ze},failTimeout:function(){return this._timer=s(function(){this.state=ze},this.options.interval,this),ze},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.4",se.defaults={domEvents:!1,touchAction:ke,enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[ee,{enable:!1},["rotate"]],[oe,{direction:pn}],[te,{direction:pn},["swipe"]],[re],[re,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Re=1,Me=2,ae.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Me:Re},recognize:function(t){var e,n,i,o,r=this.session;if(!r.stopped)for(this.touchAction.preventDefaults(t),n=this.recognizers,i=r.curRecognizer,(!i||i&&i.state&Le)&&(i=r.curRecognizer=null),o=0;o<n.length;)e=n[o],r.stopped===Me||i&&e!=i&&!e.canRecognizeWith(i)?e.reset():e.recognize(t),!i&&e.state&(Ve|Pe|Ne)&&(i=r.curRecognizer=e),o++},get:function(t){var e,n;if(t instanceof Y)return t;for(e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(b(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return l(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return l(w(t),function(t){e?n[t].splice(b(n[t],e),1):delete n[t]}),this},emit:function(t,e){var n,i;if(this.options.domEvents&&ue(t,e),n=this.handlers[t]&&this.handlers[t].slice(),n&&n.length)for(e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()},i=0;i<n.length;)n[i](e),i++},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(se,{INPUT_START:en,INPUT_MOVE:nn,INPUT_END:on,INPUT_CANCEL:rn,STATE_POSSIBLE:Ie,STATE_BEGAN:Ve,STATE_CHANGED:Pe,STATE_ENDED:Ne,STATE_RECOGNIZED:Le,STATE_CANCELLED:Ae,STATE_FAILED:ze,DIRECTION_NONE:sn,DIRECTION_LEFT:an,DIRECTION_RIGHT:ln,DIRECTION_UP:un,DIRECTION_DOWN:cn,DIRECTION_HORIZONTAL:pn,DIRECTION_VERTICAL:hn,DIRECTION_ALL:dn,Manager:ae,Input:S,TouchAction:U,TouchInput:B,MouseInput:H,PointerEventInput:j,TouchMouseInput:K,SingleTouchInput:$,Recognizer:Y,AttrRecognizer:Z,Tap:re,Pan:te,Swipe:oe,Pinch:ee,Rotate:ie,Press:ne,on:m,off:g,each:l,merge:c,extend:u,inherit:p,bindFn:h,prefixed:x}),typeof t==je&&t.amd?t(function(){return se}):"undefined"!=typeof n&&n.exports?n.exports=se:e[o]=se}(window,document,"Hammer")},{}],110:[function(e,n,i){!function(e){"function"==typeof t&&t.amd?t(["jquery"],e):"object"==typeof i?n.exports=e:e(jQuery)}(function(t){function e(e){var s,l,u,p=e||window.event,h=c.call(arguments,1),d=0,f=0,m=0,g=0,v=0,y=0;return e=t.event.fix(p),e.type="mousewheel","detail"in p&&(m=-1*p.detail),"wheelDelta"in p&&(m=p.wheelDelta),"wheelDeltaY"in p&&(m=p.wheelDeltaY),"wheelDeltaX"in p&&(f=-1*p.wheelDeltaX),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(f=-1*m,m=0),d=0===m?f:m,"deltaY"in p&&(m=-1*p.deltaY,d=m),"deltaX"in p&&(f=p.deltaX,0===m&&(d=-1*f)),0!==m||0!==f?(1===p.deltaMode?(s=t.data(this,"mousewheel-line-height"),d*=s,m*=s,f*=s):2===p.deltaMode&&(l=t.data(this,"mousewheel-page-height"),d*=l,m*=l,f*=l),g=Math.max(Math.abs(m),Math.abs(f)),(!r||r>g)&&(r=g,i(p,g)&&(r/=40)),i(p,g)&&(d/=40,f/=40,m/=40),d=Math[d>=1?"floor":"ceil"](d/r),f=Math[f>=1?"floor":"ceil"](f/r),m=Math[m>=1?"floor":"ceil"](m/r),a.settings.normalizeOffset&&this.getBoundingClientRect&&(u=this.getBoundingClientRect(),v=e.clientX-u.left,y=e.clientY-u.top),e.deltaX=f,e.deltaY=m,e.deltaFactor=r,e.offsetX=v,e.offsetY=y,e.deltaMode=0,h.unshift(e,d,f,m),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,h)):void 0}function n(){r=null}function i(t,e){return a.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,r,s,a,l=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],u="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(t.event.fixHooks)for(s=l.length;s;)t.event.fixHooks[l[--s]]=t.event.mouseHooks;a=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=u.length;n;)this.addEventListener(u[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",a.getLineHeight(this)),t.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=u.length;n;)this.removeEventListener(u[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})},{}],111:[function(e,n){!function(t,e){"object"==typeof n&&"object"==typeof n.exports?n.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(e,n){function i(t){var e=t.length,n=An.type(t);return"function"===n||An.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){if(An.isFunction(e))return An.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return An.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(K.test(e))return An.filter(e,t,n);e=An.filter(e,t)}return An.grep(t,function(t){return Tn.call(e,t)>=0!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=Z[t]={};return An.each(t.match(Q)||[],function(t,n){e[n]=!0}),e}function a(){Nn.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),An.ready()}function l(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=An.expando+l.uid++}function u(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(re,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:oe.test(n)?An.parseJSON(n):n}catch(o){}ie.set(t,e,n)}else n=void 0;return n}function c(){return!0}function p(){return!1}function h(){try{return Nn.activeElement}catch(t){}}function d(t,e){return An.nodeName(t,"table")&&An.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function m(t){var e=Ce.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,i=t.length;i>n;n++)ne.set(t[n],"globalEval",!e||ne.get(e[n],"globalEval"))}function v(t,e){var n,i,o,r,s,a,l,u;if(1===e.nodeType){if(ne.hasData(t)&&(r=ne.access(t),s=ne.set(e,r),u=r.events)){delete s.handle,s.events={};for(o in u)for(n=0,i=u[o].length;i>n;n++)An.event.add(e,o,u[o][n])}ie.hasData(t)&&(a=ie.access(t),l=An.extend({},a),ie.set(e,l))}}function y(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&An.nodeName(t,e)?An.merge([t],n):n}function w(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ue.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function b(t,n){var i,o=An(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(o[0]))?i.display:An.css(o[0],"display");return o.detach(),r}function C(t){var e=Nn,n=De[t];return n||(n=b(t,e),"none"!==n&&n||(ke=(ke||An("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=ke[0].contentDocument,e.write(),e.close(),n=b(t,e),ke.detach()),De[t]=n),n}function _(t,e,n){var i,o,r,s,a=t.style;return n=n||Te(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||An.contains(t.ownerDocument,t)||(s=An.style(t,e)),Oe.test(s)&&Se.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,o=Le.length;o--;)if(e=Le[o]+n,e in t)return e;return i}function D(t,e,n){var i=Ie.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function S(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=An.css(t,n+ae[r],!0,o)),i?("content"===n&&(s-=An.css(t,"padding"+ae[r],!0,o)),"margin"!==n&&(s-=An.css(t,"border"+ae[r]+"Width",!0,o))):(s+=An.css(t,"padding"+ae[r],!0,o),"padding"!==n&&(s+=An.css(t,"border"+ae[r]+"Width",!0,o)));return s}function O(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=Te(t),s="border-box"===An.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=_(t,e,r),(0>o||null==o)&&(o=t.style[e]),Oe.test(o))return o;i=s&&(Pn.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+S(t,e,n||(s?"border":"content"),i,r)+"px"}function T(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=ne.get(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&le(i)&&(r[s]=ne.access(i,"olddisplay",C(i.nodeName)))):(o=le(i),"none"===n&&o||ne.set(i,"olddisplay",o?n:An.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function E(t,e,n,i,o){return new E.prototype.init(t,e,n,i,o)}function I(){return setTimeout(function(){Ae=void 0}),Ae=An.now()}function V(t,e){var n,i=0,o={height:t};for(e=e?1:0;4>i;i+=2-e)n=ae[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function P(t,e,n){for(var i,o=(je[e]||[]).concat(je["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function N(t,e,n){var i,o,r,s,a,l,u,c,p=this,h={},d=t.style,f=t.nodeType&&le(t),m=ne.get(t,"fxshow");n.queue||(a=An._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,An.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=An.css(t,"display"),c="none"===u?ne.get(t,"olddisplay")||C(t.nodeName):u,"inline"===c&&"none"===An.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],Re.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||An.style(t,i)}else u=void 0;if(An.isEmptyObject(h))"inline"===("none"===u?C(t.nodeName):u)&&(d.display=u);else{m?"hidden"in m&&(f=m.hidden):m=ne.access(t,"fxshow",{}),r&&(m.hidden=!f),f?An(t).show():p.done(function(){An(t).hide()}),p.done(function(){var e;ne.remove(t,"fxshow");for(e in h)An.style(t,e,h[e])});for(i in h)s=P(f?m[i]:0,i,p),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function L(t,e){var n,i,o,r,s;for(n in t)if(i=An.camelCase(n),o=e[i],r=t[n],An.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=An.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function A(t,e,n){var i,o,r=0,s=He.length,a=An.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Ae||I(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(r);return a.notifyWith(t,[u,r,n]),1>r&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:An.extend({},e),opts:An.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Ae||I(),duration:n.duration,tweens:[],createTween:function(e,n){var i=An.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(L(c,u.opts.specialEasing);s>r;r++)if(i=He[r].call(u,t,c,u.opts))return i;return An.map(c,P,u),An.isFunction(u.opts.start)&&u.opts.start.call(t,u),An.fx.timer(An.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function z(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(Q)||[];if(An.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function R(t,e,n,i){function o(a){var l;return r[a]=!0,An.each(t[a]||[],function(t,a){var u=a(e,n,i);return"string"!=typeof u||s||r[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var r={},s=t===rn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function M(t,e){var n,i,o=An.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&An.extend(!0,t,i),t}function F(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function H(t,e,n,i){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=u[l+" "+r]||u["* "+r],!s)for(o in u)if(a=o.split(" "),a[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[o]:u[o]!==!0&&(r=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function j(t,e,n,i){var o;if(An.isArray(e))An.each(e,function(e,o){n||cn.test(t)?i(t,o):j(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==An.type(e))i(t,e);else for(o in e)j(t+"["+o+"]",e[o],n,i)}function $(t){return An.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q,B,W,K,U,X,Y,J,G,Q,Z,te,ee,ne,ie,oe,re,se,ae,le,ue,ce,pe,he,de,fe,me,ge,ve,ye,we,be,Ce,_e,xe,ke,De,Se,Oe,Te,Ee,Ie,Ve,Pe,Ne,Le,Ae,ze,Re,Me,Fe,He,je,$e,qe,Be,We,Ke,Ue,Xe,Ye,Je,Ge,Qe,Ze,tn,en,nn,on,rn,sn,an,ln,un,cn,pn,hn,dn,fn,mn,gn,vn,yn,wn,bn,Cn,_n,xn,kn=[],Dn=kn.slice,Sn=kn.concat,On=kn.push,Tn=kn.indexOf,En={},In=En.toString,Vn=En.hasOwnProperty,Pn={},Nn=e.document,Ln="2.1.3",An=function(t,e){return new An.fn.init(t,e)},zn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Rn=/^-ms-/,Mn=/-([\da-z])/gi,Fn=function(t,e){return e.toUpperCase()};return An.fn=An.prototype={jquery:Ln,constructor:An,selector:"",length:0,toArray:function(){return Dn.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Dn.call(this)},pushStack:function(t){var e=An.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return An.each(this,t,e)},map:function(t){return this.pushStack(An.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Dn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:On,sort:kn.sort,splice:kn.splice},An.extend=An.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||An.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(u&&i&&(An.isPlainObject(i)||(o=An.isArray(i)))?(o?(o=!1,r=n&&An.isArray(n)?n:[]):r=n&&An.isPlainObject(n)?n:{},s[e]=An.extend(u,r,i)):void 0!==i&&(s[e]=i));return s},An.extend({expando:"jQuery"+(Ln+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===An.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!An.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==An.type(t)||t.nodeType||An.isWindow(t)?!1:t.constructor&&!Vn.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?En[In.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=An.trim(t),t&&(1===t.indexOf("use strict")?(e=Nn.createElement("script"),e.text=t,Nn.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(Rn,"ms-").replace(Mn,Fn)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,r=0,s=t.length,a=i(t);if(n){if(a)for(;s>r&&(o=e.apply(t[r],n),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],n),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(zn,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?An.merge(n,"string"==typeof t?[t]:t):On.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:Tn.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,s=t.length,a=!n;s>r;r++)i=!e(t[r],r),i!==a&&o.push(t[r]);return o},map:function(t,e,n){var o,r=0,s=t.length,a=i(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,n),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,n),null!=o&&l.push(o);return Sn.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(n=t[e],e=t,t=n),An.isFunction(t)?(i=Dn.call(arguments,2),o=function(){return t.apply(e||this,i.concat(Dn.call(arguments)))},o.guid=t.guid=t.guid||An.guid++,o):void 0},now:Date.now,support:Pn}),An.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){En["[object "+e+"]"]=e.toLowerCase()}),q=function(t){function e(t,e,n,i){var o,r,s,a,l,u,p,d,f,m;if((e?e.ownerDocument||e:H)!==P&&V(e),e=e||P,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!i&&L){if(11!==a&&(o=ye.exec(t)))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&M(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&C.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n
}if(C.qsa&&(!A||!A.test(t))){if(d=p=F,f=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=D(t),(p=e.getAttribute("id"))?d=p.replace(be,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+h(u[l]);f=we.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{p||e.removeAttribute("id")}}}return O(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[F]=!0,t}function o(t){var e=P.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||U)-(~t.sourceIndex||U);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function p(){}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=$++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,u=[j,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[F]||(e[F]={}),(a=l[i])&&a[0]===j&&a[1]===r)return u[2]=a[2];if(l[i]=u,u[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),u&&e.push(a));return s}function v(t,e,n,o,r,s){return o&&!o[F]&&(o=v(o)),r&&!r[F]&&(r=v(r,s)),i(function(i,s,a,l){var u,c,p,h=[],d=[],f=s.length,v=i||m(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:g(v,h,t,a,l),w=n?r||(i?t:f||o)?[]:s:y;if(n&&n(y,w,a,l),o)for(u=g(w,d),o(u,[],a,l),c=u.length;c--;)(p=u[c])&&(w[d[c]]=!(y[d[c]]=p));if(i){if(r||t){if(r){for(u=[],c=w.length;c--;)(p=w[c])&&u.push(y[c]=p);r(null,w=[],u,l)}for(c=w.length;c--;)(p=w[c])&&(u=r?te(i,p):h[c])>-1&&(i[u]=!(s[u]=p))}}else w=g(w===s?w.splice(f,w.length):w),r?r(null,s,w,l):Q.apply(s,w)})}function y(t){for(var e,n,i,o=t.length,r=_.relative[t[0].type],s=r||_.relative[" "],a=r?1:0,l=d(function(t){return t===e},s,!0),u=d(function(t){return te(e,t)>-1},s,!0),c=[function(t,n,i){var o=!r&&(i||n!==T)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,o}];o>a;a++)if(n=_.relative[t[a].type])c=[d(f(c),n)];else{if(n=_.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!_.relative[t[i].type];i++);return v(a>1&&f(c),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&y(t.slice(a,i)),o>i&&y(t=t.slice(i)),o>i&&h(t))}c.push(n)}return f(c)}function w(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,u){var c,p,h,d=0,f="0",m=i&&[],v=[],y=T,w=i||r&&_.find.TAG("*",u),b=j+=null==y?1:Math.random()||.1,C=w.length;for(u&&(T=s!==P&&s);f!==C&&null!=(c=w[f]);f++){if(r&&c){for(p=0;h=t[p++];)if(h(c,s,a)){l.push(c);break}u&&(j=b)}o&&((c=!h&&c)&&d--,i&&m.push(c))}if(d+=f,o&&f!==d){for(p=0;h=n[p++];)h(m,v,s,a);if(i){if(d>0)for(;f--;)m[f]||v[f]||(v[f]=J.call(l));v=g(v)}Q.apply(l,v),u&&!i&&v.length>0&&d+n.length>1&&e.uniqueSort(l)}return u&&(j=b,T=y),m};return o?i(s):s}var b,C,_,x,k,D,S,O,T,E,I,V,P,N,L,A,z,R,M,F="sizzle"+1*new Date,H=t.document,j=0,$=0,q=n(),B=n(),W=n(),K=function(t,e){return t===e&&(I=!0),0},U=1<<31,X={}.hasOwnProperty,Y=[],J=Y.pop,G=Y.push,Q=Y.push,Z=Y.slice,te=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),pe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(se),de=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/[+~]/,be=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){V()};try{Q.apply(Y=Z.call(H.childNodes),H.childNodes),Y[H.childNodes.length].nodeType}catch(ke){Q={apply:Y.length?function(t,e){G.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}C=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},V=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,N=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),L=!k(i),C.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=ve.test(i.getElementsByClassName),C.getById=o(function(t){return N.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),C.getById?(_.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(Ce,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(Ce,_e);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=C.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):C.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},_.find.CLASS=C.getElementsByClassName&&function(t,e){return L?e.getElementsByClassName(t):void 0},z=[],A=[],(C.qsa=ve.test(i.querySelectorAll))&&(o(function(t){N.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||A.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+F+"-]").length||A.push("~="),t.querySelectorAll(":checked").length||A.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||A.push(".#.+[+~]")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&A.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(C.matchesSelector=ve.test(R=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){C.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),z.push("!=",se)}),A=A.length&&new RegExp(A.join("|")),z=z.length&&new RegExp(z.join("|")),e=ve.test(N.compareDocumentPosition),M=e||ve.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return I=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!C.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===H&&M(H,t)?-1:e===i||e.ownerDocument===H&&M(H,e)?1:E?te(E,t)-te(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return I=!0,0;var n,o=0,r=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!r||!a)return t===i?-1:e===i?1:r?-1:a?1:E?te(E,t)-te(E,e):0;if(r===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?s(l[o],u[o]):l[o]===H?-1:u[o]===H?1:0},i):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&V(t),n=n.replace(pe,"='$1']"),!(!C.matchesSelector||!L||z&&z.test(n)||A&&A.test(n)))try{var i=R.call(t,n);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&V(t),M(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&V(t);var n=_.attrHandle[e.toLowerCase()],i=n&&X.call(_.attrHandle,e.toLowerCase())?n(t,e,!L):void 0;return void 0!==i?i:C.attributes||!L?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(I=!C.detectDuplicates,E=!C.sortStable&&t.slice(0),t.sort(K),I){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return E=null,t},x=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=x(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=x(e);return n},_=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(Ce,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&he.test(n)&&(e=D(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,c,p,h,d,f,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(p=e;p=p[m];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(c=g[F]||(g[F]={}),u=c[t]||[],d=u[0]===j&&u[1],h=u[0]===j&&u[2],p=d&&g.childNodes[d];p=++d&&p&&p[m]||(h=d=0)||f.pop();)if(1===p.nodeType&&++h&&p===e){c[t]=[j,d,h];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===j)h=u[1];else for(;(p=++d&&p&&p[m]||(h=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++h||(y&&((p[F]||(p[F]={}))[t]=[j,h]),p!==e)););return h-=o,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var o,r=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[F]?r(n):r.length>1?(o=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=te(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=S(t.replace(le,"$1"));return o[F]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(Ce,_e),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:i(function(t){return de.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ce,_e).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=l(b);return p.prototype=_.filters=_.pseudos,_.setFilters=new p,D=e.tokenize=function(t,n){var i,o,r,s,a,l,u,c=B[t+" "];if(c)return n?0:c.slice(0);for(a=t,l=[],u=_.preFilter;a;){(!i||(o=ue.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ce.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),a=a.slice(i.length));for(s in _.filter)!(o=fe[s].exec(a))||u[s]&&!(o=u[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):B(t,l).slice(0)},S=e.compile=function(t,e){var n,i=[],o=[],r=W[t+" "];if(!r){for(e||(e=D(t)),n=e.length;n--;)r=y(e[n]),r[F]?i.push(r):o.push(r);r=W(t,w(o,i)),r.selector=t}return r},O=e.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,p=!i&&D(t=u.selector||t);if(n=n||[],1===p.length){if(r=p[0]=p[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&C.getById&&9===e.nodeType&&L&&_.relative[r[1].type]){if(e=(_.find.ID(s.matches[0].replace(Ce,_e),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=fe.needsContext.test(t)?0:r.length;o--&&(s=r[o],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(Ce,_e),we.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&h(r),!t)return Q.apply(n,i),n;break}}return(u||S(t,p))(i,e,!L,n,we.test(t)&&c(e.parentNode)||e),n},C.sortStable=F.split("").sort(K).join("")===F,C.detectDuplicates=!!I,V(),C.sortDetached=o(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(e),An.find=q,An.expr=q.selectors,An.expr[":"]=An.expr.pseudos,An.unique=q.uniqueSort,An.text=q.getText,An.isXMLDoc=q.isXML,An.contains=q.contains,B=An.expr.match.needsContext,W=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/^.[^:#\[\.,]*$/,An.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?An.find.matchesSelector(i,t)?[i]:[]:An.find.matches(t,An.grep(e,function(t){return 1===t.nodeType}))},An.fn.extend({find:function(t){var e,n=this.length,i=[],o=this;if("string"!=typeof t)return this.pushStack(An(t).filter(function(){for(e=0;n>e;e++)if(An.contains(o[e],this))return!0}));for(e=0;n>e;e++)An.find(t,o[e],i);return i=this.pushStack(n>1?An.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&B.test(t)?An(t):t||[],!1).length}}),X=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Y=An.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:X.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||U).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof An?e[0]:e,An.merge(this,An.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Nn,!0)),W.test(n[1])&&An.isPlainObject(e))for(n in e)An.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return i=Nn.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Nn,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):An.isFunction(t)?"undefined"!=typeof U.ready?U.ready(t):t(An):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),An.makeArray(t,this))},Y.prototype=An.fn,U=An(Nn),J=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0},An.extend({dir:function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&An(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),An.fn.extend({has:function(t){var e=An(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(An.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=B.test(t)||"string"!=typeof t?An(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&An.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?An.unique(r):r)},index:function(t){return t?"string"==typeof t?Tn.call(An(t),this[0]):Tn.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(An.unique(An.merge(this.get(),An(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),An.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return An.dir(t,"parentNode")},parentsUntil:function(t,e,n){return An.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return An.dir(t,"nextSibling")},prevAll:function(t){return An.dir(t,"previousSibling")},nextUntil:function(t,e,n){return An.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return An.dir(t,"previousSibling",n)},siblings:function(t){return An.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return An.sibling(t.firstChild)},contents:function(t){return t.contentDocument||An.merge([],t.childNodes)}},function(t,e){An.fn[t]=function(n,i){var o=An.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=An.filter(i,o)),this.length>1&&(G[t]||An.unique(o),J.test(t)&&o.reverse()),this.pushStack(o)}}),Q=/\S+/g,Z={},An.Callbacks=function(t){t="string"==typeof t?Z[t]||s(t):An.extend({},t);var e,n,i,o,r,a,l=[],u=!t.once&&[],c=function(s){for(e=t.memory&&s,n=!0,a=o||0,o=0,r=l.length,i=!0;l&&r>a;a++)if(l[a].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):e?l=[]:p.disable())},p={add:function(){if(l){var n=l.length;!function s(e){An.each(e,function(e,n){var i=An.type(n);"function"===i?t.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),i?r=l.length:e&&(o=n,c(e))}return this},remove:function(){return l&&An.each(arguments,function(t,e){for(var n;(n=An.inArray(e,l,n))>-1;)l.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(t){return t?An.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=e=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,e||p.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||n&&!u||(e=e||[],e=[t,e.slice?e.slice():e],i?u.push(e):c(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},An.extend({Deferred:function(t){var e=[["resolve","done",An.Callbacks("once memory"),"resolved"],["reject","fail",An.Callbacks("once memory"),"rejected"],["notify","progress",An.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return An.Deferred(function(n){An.each(e,function(e,r){var s=An.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&An.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?An.extend(t,i):i}},o={};return i.pipe=i.then,An.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=Dn.call(arguments),s=r.length,a=1!==s||t&&An.isFunction(t.promise)?s:0,l=1===a?t:An.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?Dn.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&An.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(l.reject).progress(u(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}}),An.fn.ready=function(t){return An.ready.promise().done(t),this},An.extend({isReady:!1,readyWait:1,holdReady:function(t){t?An.readyWait++:An.ready(!0)},ready:function(t){(t===!0?--An.readyWait:An.isReady)||(An.isReady=!0,t!==!0&&--An.readyWait>0||(te.resolveWith(Nn,[An]),An.fn.triggerHandler&&(An(Nn).triggerHandler("ready"),An(Nn).off("ready"))))}}),An.ready.promise=function(t){return te||(te=An.Deferred(),"complete"===Nn.readyState?setTimeout(An.ready):(Nn.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),te.promise(t)},An.ready.promise(),ee=An.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,u=null==n;if("object"===An.type(n)){o=!0;for(a in n)An.access(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,An.isFunction(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(An(t),n)})),e))for(;l>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:u?e.call(t):l?e(t[0],n):r},An.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},l.uid=1,l.accepts=An.acceptData,l.prototype={key:function(t){if(!l.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=l.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,An.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=n;else if(An.isEmptyObject(r))An.extend(this.cache[o],e);else for(i in e)r[i]=e[i];return r},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,An.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,o,r=this.key(t),s=this.cache[r];if(void 0===e)this.cache[r]={};else{An.isArray(e)?i=e.concat(e.map(An.camelCase)):(o=An.camelCase(e),e in s?i=[e,o]:(i=o,i=i in s?[i]:i.match(Q)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(t){return!An.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},ne=new l,ie=new l,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,re=/([A-Z])/g,An.extend({hasData:function(t){return ie.hasData(t)||ne.hasData(t)},data:function(t,e,n){return ie.access(t,e,n)},removeData:function(t,e){ie.remove(t,e)},_data:function(t,e,n){return ne.access(t,e,n)},_removeData:function(t,e){ne.remove(t,e)}}),An.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=ie.get(r),1===r.nodeType&&!ne.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=An.camelCase(i.slice(5)),u(r,i,o[i])));ne.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ie.set(this,t)}):ee(this,function(e){var n,i=An.camelCase(t);if(r&&void 0===e){if(n=ie.get(r,t),void 0!==n)return n;if(n=ie.get(r,i),void 0!==n)return n;if(n=u(r,i,void 0),void 0!==n)return n}else this.each(function(){var n=ie.get(this,i);ie.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&ie.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ie.remove(this,t)})}}),An.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ne.get(t,e),n&&(!i||An.isArray(n)?i=ne.access(t,e,An.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=An.queue(t,e),i=n.length,o=n.shift(),r=An._queueHooks(t,e),s=function(){An.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ne.get(t,n)||ne.access(t,n,{empty:An.Callbacks("once memory").add(function(){ne.remove(t,[e+"queue",n])})})}}),An.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?An.queue(this[0],t):void 0===e?this:this.each(function(){var n=An.queue(this,t,e);An._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&An.dequeue(this,t)})},dequeue:function(t){return this.each(function(){An.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=An.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ne.get(r[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}}),se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=["Top","Right","Bottom","Left"],le=function(t,e){return t=e||t,"none"===An.css(t,"display")||!An.contains(t.ownerDocument,t)},ue=/^(?:checkbox|radio)$/i,function(){var t=Nn.createDocumentFragment(),e=t.appendChild(Nn.createElement("div")),n=Nn.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),Pn.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Pn.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}(),ce="undefined",Pn.focusinBubbles="onfocusin"in e,pe=/^key/,he=/^(?:mouse|pointer|contextmenu)|click/,de=/^(?:focusinfocus|focusoutblur)$/,fe=/^([^.]*)(?:\.(.+)|)$/,An.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,u,c,p,h,d,f,m,g=ne.get(t);if(g)for(n.handler&&(r=n,n=r.handler,o=r.selector),n.guid||(n.guid=An.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return typeof An!==ce&&An.event.triggered!==e.type?An.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Q)||[""],u=e.length;u--;)a=fe.exec(e[u])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d&&(p=An.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=An.event.special[d]||{},c=An.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&An.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=l[d])||(h=l[d]=[],h.delegateCount=0,p.setup&&p.setup.call(t,i,f,s)!==!1||t.addEventListener&&t.addEventListener(d,s,!1)),p.add&&(p.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),An.event.global[d]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,u,c,p,h,d,f,m,g=ne.hasData(t)&&ne.get(t);if(g&&(l=g.events)){for(e=(e||"").match(Q)||[""],u=e.length;u--;)if(a=fe.exec(e[u])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d){for(p=An.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,h=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)c=h[r],!o&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(r,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(t,c));s&&!h.length&&(p.teardown&&p.teardown.call(t,f,g.handle)!==!1||An.removeEvent(t,d,g.handle),delete l[d])}else for(d in l)An.event.remove(t,d+e[u],n,i,!0);An.isEmptyObject(l)&&(delete g.handle,ne.remove(t,"events"))}},trigger:function(t,n,i,o){var r,s,a,l,u,c,p,h=[i||Nn],d=Vn.call(t,"type")?t.type:t,f=Vn.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||Nn,3!==i.nodeType&&8!==i.nodeType&&!de.test(d+An.event.triggered)&&(d.indexOf(".")>=0&&(f=d.split("."),d=f.shift(),f.sort()),u=d.indexOf(":")<0&&"on"+d,t=t[An.expando]?t:new An.Event(d,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:An.makeArray(n,[t]),p=An.event.special[d]||{},o||!p.trigger||p.trigger.apply(i,n)!==!1)){if(!o&&!p.noBubble&&!An.isWindow(i)){for(l=p.delegateType||d,de.test(l+d)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||Nn)&&h.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=h[r++])&&!t.isPropagationStopped();)t.type=r>1?l:p.bindType||d,c=(ne.get(s,"events")||{})[t.type]&&ne.get(s,"handle"),c&&c.apply(s,n),c=u&&s[u],c&&c.apply&&An.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());
return t.type=d,o||t.isDefaultPrevented()||p._default&&p._default.apply(h.pop(),n)!==!1||!An.acceptData(i)||u&&An.isFunction(i[d])&&!An.isWindow(i)&&(a=i[u],a&&(i[u]=null),An.event.triggered=d,i[d](),An.event.triggered=void 0,a&&(i[u]=a)),t.result}},dispatch:function(t){t=An.event.fix(t);var e,n,i,o,r,s=[],a=Dn.call(arguments),l=(ne.get(this,"events")||{})[t.type]||[],u=An.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=An.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,i=((An.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],n=0;a>n;n++)r=e[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?An(o,this).index(l)>=0:An.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Nn,i=n.documentElement,o=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[An.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=he.test(o)?this.mouseHooks:pe.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new An.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=Nn),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&An.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return An.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=An.extend(new An.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?An.event.trigger(o,null,e):An.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},An.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},An.Event=function(t,e){return this instanceof An.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:p):this.type=t,e&&An.extend(this,e),this.timeStamp=t&&t.timeStamp||An.now(),void(this[An.expando]=!0)):new An.Event(t,e)},An.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},An.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){An.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!An.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),Pn.focusinBubbles||An.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){An.event.simulate(e,t.target,An.event.fix(t),!0)};An.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=ne.access(i,e);o||i.addEventListener(t,n,!0),ne.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=ne.access(i,e)-1;o?ne.access(i,e,o):(i.removeEventListener(t,n,!0),ne.remove(i,e))}}}),An.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===o&&(r=i,i=function(t){return An().off(t),r.apply(this,arguments)},i.guid=r.guid||(r.guid=An.guid++)),this.each(function(){An.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,An(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){An.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){An.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?An.event.trigger(t,e,n,!0):void 0}}),me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ge=/<([\w:]+)/,ve=/<|&#?\w+;/,ye=/<(?:script|style|link)/i,we=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/^$|\/(?:java|ecma)script/i,Ce=/^true\/(.*)/,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]},xe.optgroup=xe.option,xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,An.extend({clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=An.contains(t.ownerDocument,t);if(!(Pn.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||An.isXMLDoc(t)))for(s=y(a),r=y(t),i=0,o=r.length;o>i;i++)w(r[i],s[i]);if(e)if(n)for(r=r||y(t),s=s||y(a),i=0,o=r.length;o>i;i++)v(r[i],s[i]);else v(t,a);return s=y(a,"script"),s.length>0&&g(s,!l&&y(t,"script")),a},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,u,c=e.createDocumentFragment(),p=[],h=0,d=t.length;d>h;h++)if(o=t[h],o||0===o)if("object"===An.type(o))An.merge(p,o.nodeType?[o]:o);else if(ve.test(o)){for(r=r||c.appendChild(e.createElement("div")),s=(ge.exec(o)||["",""])[1].toLowerCase(),a=xe[s]||xe._default,r.innerHTML=a[1]+o.replace(me,"<$1></$2>")+a[2],u=a[0];u--;)r=r.lastChild;An.merge(p,r.childNodes),r=c.firstChild,r.textContent=""}else p.push(e.createTextNode(o));for(c.textContent="",h=0;o=p[h++];)if((!i||-1===An.inArray(o,i))&&(l=An.contains(o.ownerDocument,o),r=y(c.appendChild(o),"script"),l&&g(r),n))for(u=0;o=r[u++];)be.test(o.type||"")&&n.push(o);return c},cleanData:function(t){for(var e,n,i,o,r=An.event.special,s=0;void 0!==(n=t[s]);s++){if(An.acceptData(n)&&(o=n[ne.expando],o&&(e=ne.cache[o]))){if(e.events)for(i in e.events)r[i]?An.event.remove(n,i):An.removeEvent(n,i,e.handle);ne.cache[o]&&delete ne.cache[o]}delete ie.cache[n[ie.expando]]}}}),An.fn.extend({text:function(t){return ee(this,function(t){return void 0===t?An.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?An.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||An.cleanData(y(n)),n.parentNode&&(e&&An.contains(n.ownerDocument,n)&&g(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(An.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return An.clone(this,t,e)})},html:function(t){return ee(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ye.test(t)&&!xe[(ge.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(me,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(An.cleanData(y(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,An.cleanData(y(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Sn.apply([],t);var n,i,o,r,s,a,l=0,u=this.length,c=this,p=u-1,h=t[0],d=An.isFunction(h);if(d||u>1&&"string"==typeof h&&!Pn.checkClone&&we.test(h))return this.each(function(n){var i=c.eq(n);d&&(t[0]=h.call(this,n,i.html())),i.domManip(t,e)});if(u&&(n=An.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(o=An.map(y(n,"script"),f),r=o.length;u>l;l++)s=n,l!==p&&(s=An.clone(s,!0,!0),r&&An.merge(o,y(s,"script"))),e.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,An.map(o,m),l=0;r>l;l++)s=o[l],be.test(s.type||"")&&!ne.access(s,"globalEval")&&An.contains(a,s)&&(s.src?An._evalUrl&&An._evalUrl(s.src):An.globalEval(s.textContent.replace(_e,"")))}return this}}),An.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){An.fn[t]=function(t){for(var n,i=[],o=An(t),r=o.length-1,s=0;r>=s;s++)n=s===r?this:this.clone(!0),An(o[s])[e](n),On.apply(i,n.get());return this.pushStack(i)}}),De={},Se=/^margin/,Oe=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),Te=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",o.appendChild(r);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,o.removeChild(r)}var n,i,o=Nn.documentElement,r=Nn.createElement("div"),s=Nn.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Pn.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(s),e.getComputedStyle&&An.extend(Pn,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(Nn.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",o.appendChild(r),t=!parseFloat(e.getComputedStyle(n,null).marginRight),o.removeChild(r),s.removeChild(n),t}}))}(),An.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o},Ee=/^(none|table(?!-c[ea]).+)/,Ie=new RegExp("^("+se+")(.*)$","i"),Ve=new RegExp("^([+-])=("+se+")","i"),Pe={position:"absolute",visibility:"hidden",display:"block"},Ne={letterSpacing:"0",fontWeight:"400"},Le=["Webkit","O","Moz","ms"],An.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=_(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=An.camelCase(e),l=t.style;return e=An.cssProps[a]||(An.cssProps[a]=k(l,a)),s=An.cssHooks[e]||An.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e]:(r=typeof n,"string"===r&&(o=Ve.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(An.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||An.cssNumber[a]||(n+="px"),Pn.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l[e]=n)),void 0)}},css:function(t,e,n,i){var o,r,s,a=An.camelCase(e);return e=An.cssProps[a]||(An.cssProps[a]=k(t.style,a)),s=An.cssHooks[e]||An.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=_(t,e,i)),"normal"===o&&e in Ne&&(o=Ne[e]),""===n||n?(r=parseFloat(o),n===!0||An.isNumeric(r)?r||0:o):o}}),An.each(["height","width"],function(t,e){An.cssHooks[e]={get:function(t,n,i){return n?Ee.test(An.css(t,"display"))&&0===t.offsetWidth?An.swap(t,Pe,function(){return O(t,e,i)}):O(t,e,i):void 0},set:function(t,n,i){var o=i&&Te(t);return D(t,n,i?S(t,e,i,"border-box"===An.css(t,"boxSizing",!1,o),o):0)}}}),An.cssHooks.marginRight=x(Pn.reliableMarginRight,function(t,e){return e?An.swap(t,{display:"inline-block"},_,[t,"marginRight"]):void 0}),An.each({margin:"",padding:"",border:"Width"},function(t,e){An.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+ae[i]+e]=r[i]||r[i-2]||r[0];return o}},Se.test(t)||(An.cssHooks[t+e].set=D)}),An.fn.extend({css:function(t,e){return ee(this,function(t,e,n){var i,o,r={},s=0;if(An.isArray(e)){for(i=Te(t),o=e.length;o>s;s++)r[e[s]]=An.css(t,e[s],!1,i);return r}return void 0!==n?An.style(t,e,n):An.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){le(this)?An(this).show():An(this).hide()})}}),An.Tween=E,E.prototype={constructor:E,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(An.cssNumber[n]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,n=E.propHooks[this.prop];return this.pos=e=this.options.duration?An.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=An.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){An.fx.step[t.prop]?An.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[An.cssProps[t.prop]]||An.cssHooks[t.prop])?An.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},An.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},An.fx=E.prototype.init,An.fx.step={},Re=/^(?:toggle|show|hide)$/,Me=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Fe=/queueHooks$/,He=[N],je={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=Me.exec(e),r=o&&o[3]||(An.cssNumber[t]?"":"px"),s=(An.cssNumber[t]||"px"!==r&&+i)&&Me.exec(An.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,An.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]},An.Animation=An.extend(A,{tweener:function(t,e){An.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],je[n]=je[n]||[],je[n].unshift(e)},prefilter:function(t,e){e?He.unshift(t):He.push(t)}}),An.speed=function(t,e,n){var i=t&&"object"==typeof t?An.extend({},t):{complete:n||!n&&e||An.isFunction(t)&&t,duration:t,easing:n&&e||e&&!An.isFunction(e)&&e};return i.duration=An.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in An.fx.speeds?An.fx.speeds[i.duration]:An.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){An.isFunction(i.old)&&i.old.call(this),i.queue&&An.dequeue(this,i.queue)},i},An.fn.extend({fadeTo:function(t,e,n,i){return this.filter(le).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=An.isEmptyObject(t),r=An.speed(e,n,i),s=function(){var e=A(this,An.extend({},t),r);(o||ne.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=An.timers,s=ne.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&Fe.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&An.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ne.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=An.timers,s=i?i.length:0;for(n.finish=!0,An.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),An.each(["toggle","show","hide"],function(t,e){var n=An.fn[e];An.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(V(e,!0),t,i,o)}}),An.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){An.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),An.timers=[],An.fx.tick=function(){var t,e=0,n=An.timers;for(Ae=An.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||An.fx.stop(),Ae=void 0},An.fx.timer=function(t){An.timers.push(t),t()?An.fx.start():An.timers.pop()},An.fx.interval=13,An.fx.start=function(){ze||(ze=setInterval(An.fx.tick,An.fx.interval))},An.fx.stop=function(){clearInterval(ze),ze=null},An.fx.speeds={slow:600,fast:200,_default:400},An.fn.delay=function(t,e){return t=An.fx?An.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=Nn.createElement("input"),e=Nn.createElement("select"),n=e.appendChild(Nn.createElement("option"));t.type="checkbox",Pn.checkOn=""!==t.value,Pn.optSelected=n.selected,e.disabled=!0,Pn.optDisabled=!n.disabled,t=Nn.createElement("input"),t.value="t",t.type="radio",Pn.radioValue="t"===t.value}(),Be=An.expr.attrHandle,An.fn.extend({attr:function(t,e){return ee(this,An.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){An.removeAttr(this,t)})}}),An.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===ce?An.prop(t,e,n):(1===r&&An.isXMLDoc(t)||(e=e.toLowerCase(),i=An.attrHooks[e]||(An.expr.match.bool.test(e)?qe:$e)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=An.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void An.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(Q);if(r&&1===t.nodeType)for(;n=r[o++];)i=An.propFix[n]||n,An.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Pn.radioValue&&"radio"===e&&An.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),qe={set:function(t,e,n){return e===!1?An.removeAttr(t,n):t.setAttribute(n,n),n}},An.each(An.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Be[e]||An.find.attr;Be[e]=function(t,e,i){var o,r;return i||(r=Be[e],Be[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Be[e]=r),o}}),We=/^(?:input|select|textarea|button)$/i,An.fn.extend({prop:function(t,e){return ee(this,An.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[An.propFix[t]||t]})}}),An.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!An.isXMLDoc(t),r&&(e=An.propFix[e]||e,o=An.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||We.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Pn.optSelected||(An.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),An.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){An.propFix[this.toLowerCase()]=this}),Ke=/[\t\r\n\f]/g,An.fn.extend({addClass:function(t){var e,n,i,o,r,s,a="string"==typeof t&&t,l=0,u=this.length;if(An.isFunction(t))return this.each(function(e){An(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(Q)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ke," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=An.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(An.isFunction(t))return this.each(function(e){An(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(Q)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ke," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=t?An.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(An.isFunction(t)?function(n){An(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=An(this),r=t.match(Q)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===ce||"boolean"===n)&&(this.className&&ne.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ne.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ke," ").indexOf(e)>=0)return!0;return!1}}),Ue=/\r/g,An.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=An.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,An(this).val()):t,null==o?o="":"number"==typeof o?o+="":An.isArray(o)&&(o=An.map(o,function(t){return null==t?"":t+""})),e=An.valHooks[this.type]||An.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=An.valHooks[o.type]||An.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Ue,""):null==n?"":n)}}}),An.extend({valHooks:{option:{get:function(t){var e=An.find.attr(t,"value");return null!=e?e:An.trim(An.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(Pn.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&An.nodeName(n.parentNode,"optgroup"))){if(e=An(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=An.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=An.inArray(i.value,r)>=0)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),An.each(["radio","checkbox"],function(){An.valHooks[this]={set:function(t,e){return An.isArray(e)?t.checked=An.inArray(An(t).val(),e)>=0:void 0}},Pn.checkOn||(An.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),An.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){An.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),An.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),Xe=An.now(),Ye=/\?/,An.parseJSON=function(t){return JSON.parse(t+"")},An.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(i){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&An.error("Invalid XML: "+t),e},Je=/#.*$/,Ge=/([?&])_=[^&]*/,Qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ze=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tn=/^(?:GET|HEAD)$/,en=/^\/\//,nn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,on={},rn={},sn="*/".concat("*"),an=e.location.href,ln=nn.exec(an.toLowerCase())||[],An.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:Ze.test(ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":An.parseJSON,"text xml":An.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?M(M(t,An.ajaxSettings),e):M(An.ajaxSettings,t)},ajaxPrefilter:z(on),ajaxTransport:z(rn),ajax:function(t,e){function n(t,e,n,s){var l,c,v,y,b,_=e;2!==w&&(w=2,a&&clearTimeout(a),i=void 0,r=s||"",C.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(y=F(p,C,n)),y=H(p,y,C,l),l?(p.ifModified&&(b=C.getResponseHeader("Last-Modified"),b&&(An.lastModified[o]=b),b=C.getResponseHeader("etag"),b&&(An.etag[o]=b)),204===t||"HEAD"===p.type?_="nocontent":304===t?_="notmodified":(_=y.state,c=y.data,v=y.error,l=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),C.status=t,C.statusText=(e||_)+"",l?f.resolveWith(h,[c,_,C]):f.rejectWith(h,[C,_,v]),C.statusCode(g),g=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[C,p,l?c:v]),m.fireWith(h,[C,_]),u&&(d.trigger("ajaxComplete",[C,p]),--An.active||An.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,u,c,p=An.ajaxSetup({},e),h=p.context||p,d=p.context&&(h.nodeType||h.jquery)?An(h):An.event,f=An.Deferred(),m=An.Callbacks("once memory"),g=p.statusCode||{},v={},y={},w=0,b="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!s)for(s={};e=Qe.exec(r);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?r:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return w||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)g[e]=[g[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||b;return i&&i.abort(e),n(0,e),this}};if(f.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,p.url=((t||p.url||an)+"").replace(Je,"").replace(en,ln[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=An.trim(p.dataType||"*").toLowerCase().match(Q)||[""],null==p.crossDomain&&(l=nn.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===ln[1]&&l[2]===ln[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ln[3]||("http:"===ln[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=An.param(p.data,p.traditional)),R(on,p,e,C),2===w)return C;u=An.event&&p.global,u&&0===An.active++&&An.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!tn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(Ye.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Ge.test(o)?o.replace(Ge,"$1_="+Xe++):o+(Ye.test(o)?"&":"?")+"_="+Xe++)),p.ifModified&&(An.lastModified[o]&&C.setRequestHeader("If-Modified-Since",An.lastModified[o]),An.etag[o]&&C.setRequestHeader("If-None-Match",An.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+sn+"; q=0.01":""):p.accepts["*"]);for(c in p.headers)C.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(p.beforeSend.call(h,C,p)===!1||2===w))return C.abort();b="abort";for(c in{success:1,error:1,complete:1})C[c](p[c]);if(i=R(rn,p,e,C)){C.readyState=1,u&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(a=setTimeout(function(){C.abort("timeout")},p.timeout));try{w=1,i.send(v,n)}catch(_){if(!(2>w))throw _;n(-1,_)}}else n(-1,"No Transport");return C},getJSON:function(t,e,n){return An.get(t,e,n,"json")},getScript:function(t,e){return An.get(t,void 0,e,"script")}}),An.each(["get","post"],function(t,e){An[e]=function(t,n,i,o){return An.isFunction(n)&&(o=o||i,i=n,n=void 0),An.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),An._evalUrl=function(t){return An.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},An.fn.extend({wrapAll:function(t){var e;return An.isFunction(t)?this.each(function(e){An(this).wrapAll(t.call(this,e))}):(this[0]&&(e=An(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(An.isFunction(t)?function(e){An(this).wrapInner(t.call(this,e))}:function(){var e=An(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=An.isFunction(t);return this.each(function(n){An(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){An.nodeName(this,"body")||An(this).replaceWith(this.childNodes)}).end()}}),An.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},An.expr.filters.visible=function(t){return!An.expr.filters.hidden(t)},un=/%20/g,cn=/\[\]$/,pn=/\r?\n/g,hn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i,An.param=function(t,e){var n,i=[],o=function(t,e){e=An.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=An.ajaxSettings&&An.ajaxSettings.traditional),An.isArray(t)||t.jquery&&!An.isPlainObject(t))An.each(t,function(){o(this.name,this.value)});else for(n in t)j(n,t[n],e,o);return i.join("&").replace(un,"+")},An.fn.extend({serialize:function(){return An.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){var t=An.prop(this,"elements");return t?An.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!An(this).is(":disabled")&&dn.test(this.nodeName)&&!hn.test(t)&&(this.checked||!ue.test(t))}).map(function(t,e){var n=An(this).val();return null==n?null:An.isArray(n)?An.map(n,function(t){return{name:e.name,value:t.replace(pn,"\r\n")}}):{name:e.name,value:n.replace(pn,"\r\n")}}).get()}}),An.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}},fn=0,mn={},gn={0:200,1223:204},vn=An.ajaxSettings.xhr(),e.attachEvent&&e.attachEvent("onunload",function(){for(var t in mn)mn[t]()}),Pn.cors=!!vn&&"withCredentials"in vn,Pn.ajax=vn=!!vn,An.ajaxTransport(function(t){var e;return Pn.cors||vn&&!t.crossDomain?{send:function(n,i){var o,r=t.xhr(),s=++fn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)r.setRequestHeader(o,n[o]);e=function(t){return function(){e&&(delete mn[s],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?i(r.status,r.statusText):i(gn[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=mn[s]=e("abort");try{r.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),An.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return An.globalEval(t),t}}}),An.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),An.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=An("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),Nn.head.appendChild(e[0])},abort:function(){n&&n()}}}}),yn=[],wn=/(=)\?(?=&|$)|\?\?/,An.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=yn.pop()||An.expando+"_"+Xe++;return this[t]=!0,t}}),An.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,a=t.jsonp!==!1&&(wn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&wn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=An.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(wn,"$1"+o):t.jsonp!==!1&&(t.url+=(Ye.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||An.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,yn.push(o)),s&&An.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),An.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Nn;var i=W.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=An.buildFragment([t],e,o),o&&o.length&&An(o).remove(),An.merge([],i.childNodes))},bn=An.fn.load,An.fn.load=function(t,e,n){if("string"!=typeof t&&bn)return bn.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return a>=0&&(i=An.trim(t.slice(a)),t=t.slice(0,a)),An.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&An.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?An("<div>").append(An.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,r||[t.responseText,e,t])}),this},An.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){An.fn[e]=function(t){return this.on(e,t)}}),An.expr.filters.animated=function(t){return An.grep(An.timers,function(e){return t===e.elem}).length},Cn=e.document.documentElement,An.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,u,c=An.css(t,"position"),p=An(t),h={};"static"===c&&(t.style.position="relative"),a=p.offset(),r=An.css(t,"top"),l=An.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,u?(i=p.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),An.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+o),"using"in e?e.using.call(t,h):p.css(h)}},An.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){An.offset.setOffset(this,t,e)});var e,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;if(r)return e=r.documentElement,An.contains(e,i)?(typeof i.getBoundingClientRect!==ce&&(o=i.getBoundingClientRect()),n=$(r),{top:o.top+n.pageYOffset-e.clientTop,left:o.left+n.pageXOffset-e.clientLeft}):o},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===An.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),An.nodeName(t[0],"html")||(i=t.offset()),i.top+=An.css(t[0],"borderTopWidth",!0),i.left+=An.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-An.css(n,"marginTop",!0),left:e.left-i.left-An.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Cn;t&&!An.nodeName(t,"html")&&"static"===An.css(t,"position");)t=t.offsetParent;return t||Cn})}}),An.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;An.fn[t]=function(o){return ee(this,function(t,o,r){var s=$(t);return void 0===r?s?s[n]:t[o]:void(s?s.scrollTo(i?e.pageXOffset:r,i?r:e.pageYOffset):t[o]=r)},t,o,arguments.length,null)}}),An.each(["top","left"],function(t,e){An.cssHooks[e]=x(Pn.pixelPosition,function(t,n){return n?(n=_(t,e),Oe.test(n)?An(t).position()[e]+"px":n):void 0})}),An.each({Height:"height",Width:"width"},function(t,e){An.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){An.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return ee(this,function(e,n,i){var o;return An.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?An.css(e,n,s):An.style(e,n,i,s)},e,r?i:void 0,r,null)}})}),An.fn.size=function(){return this.length},An.fn.andSelf=An.fn.addBack,"function"==typeof t&&t.amd&&t("jquery",[],function(){return An}),_n=e.jQuery,xn=e.$,An.noConflict=function(t){return e.$===An&&(e.$=xn),t&&e.jQuery===An&&(e.jQuery=_n),An},typeof n===ce&&(e.jQuery=e.$=An),An})},{}],112:[function(t,e){var n={};n.dom=n.dom||{},function(t){var e,i,o,r,s,a,l,u,c,p,h,d,f,m,g,v,y,w,b,C,_,x,k,D,S,O,T,E,I,V,P,N,L,A,z,R,M,F,H,j,$,q,B,W,K,U,X,Y,J,G,Q,Z,te,ee,ne,ie,oe,re,se=t.document,ae=function(t,e){var n=t[e];return"object"==typeof n&&null!==n},le=function(t,e){var n=t[e],i=typeof n;return"function"==i||"object"==i&&null!==n||"unknown"==i},ue=function(){for(var t=arguments.length;t--;)if(!n.dom[arguments[t]])return!1;return!0},ce=ae(se,"documentElement")&&se.documentElement,pe=!!Function.prototype.call,he=(!(!ce||!ae(ce,"style")),function(t){var e,n,i=[];for(e=0,n=t.length;n>e;e++)i[e]=t[e];return i});ce&&le(ce,"removeEventListener")&&(e=function(t,e,n){t.removeEventListener(e,n,!1)}),ce&&le(ce,"addEventListener")&&(i=function(t){var e=t.target;return 1!=e.nodeType&&(e=e.parentNode),e}),ce&&le(ce,"addEventListener")&&(o=function(t,e,n){var i=function(e){n.call(t,e)};return t.addEventListener(e,i,!1),i}),se&&le(se,"querySelectorAll")&&he&&(r=function(t,e){return he((e||document).querySelectorAll(t))}),se&&le(se,"querySelector")&&(s=function(t,e){return(e||document).querySelector(t)}),a=function(t,e){for(var n=!1,i=0,o=e.length;o>i;i++)if(e[i]===t){n=!0;break}return n},pe&&Function.prototype.bind&&(l=function(t){return t.bind.apply(t,Array.prototype.slice.call(arguments,1))}),e&&(u=function(t,n,i){return e(t,n,i)}),o&&i&&pe&&(c=function(t,e,n,r){var s=function(e){var o=r(t,i(e));o&&n.call(o,e,o,t)};return o(t,e,s)}),p=function(t){var e=(t.tagName||t.nodeName).toLowerCase();return e.indexOf("html:")>-1?e.substring(5):e},ce&&ae(ce,"parentNode")&&(h=function(t){var e=t.parentNode,n=null;return e&&(e.tagName||1==e.nodeType)&&(n=e),n}),a&&r&&(d=function(t,e){return a(t,r(e))}),ce&&"undefined"!=typeof ce.parentNode&&(f=function(t,e){for(var n=e.parentNode;n&&n!=t;)n=n.parentNode;return n==t}),o&&l&&i&&pe&&(m=function(t,e,n,r,s){var a=l(function(e){var o=r(t,i(e));o&&n.call(s,e,o)},s);return o(t,e,a)}),ce&&ae(ce,"classList")&&le(ce.classList,"contains")&&(g=function(t,e){return t.classList.contains(e)}),window&&le(window,"addEventListener")&&(v=function(t,e){var n=function(t){e.call(window,t)};return window.addEventListener(t,n,!1),n}),"number"==typeof window.pageXOffset&&"number"==typeof window.pageYOffset&&(y=function(){return[window.pageXOffset,window.pageYOffset]}),ce&&le(ce,"getBoundingClientRect")&&(w=function(t){var e=t.getBoundingClientRect();return[e.left,e.top]}),le(document,"getElementById")&&(b=function(t,e){return(e||document).getElementById(t)}),u&&(C=function(t,e,n){return u(t,e,n)}),le(t,"scrollTo")&&(_=function(t,e){window.scrollTo(t,e)}),x=function(t,e){t.value=e},"number"==typeof t.innerWidth&&(k=function(t){return t||(t=window),[t.innerWidth,t.innerHeight]}),ce&&le(ce,"addEventListener")&&(D=function(t){var e=t.relatedTarget;return 1!=e.nodeType&&(e=e.parentNode),e}),window&&le(window,"removeEventListener")&&(S=function(t,e){return window.removeEventListener(t,e)}),e&&(O=function(t,n,i){return e(t,n,i)}),c&&p&&(T=function(t,e,n,i){var o=function(t,e){var i,o;if(p(e)===n)i=e;else for(o=h(e);null!==o&&o!==t;){if(p(o)===n){i=o;break}o=h(o)}return i};return c(t,e,i,o)}),a&&c&&r&&f&&(E=function(t,e,n,i){function o(t){var e,i,o=r(n),s=0;if(a(t,o))return t;for(e=o.length;e>s;s++)if(i=o[s],f(i,t))return i}return c(t,e,i,o)}),m&&r&&f&&(I=function(t,e,n,i,o){var r=function(t,e){var i,o;if(d(e,n))return e;for(i=jessie.query(n),o=0;o<i.length;o++)if(f(i[o],e))return i[o]};return m(t,e,i,r,o)}),m&&g&&h&&(V=function(t,e,n,i,o){var r=function(t,e){var i=e;for(t===i&&(i=null);i&&i!==t&&!g(i,n);)i=h(i),t===i&&(i=null);return i};return m(t,e,i,r,o)}),ce&&le(ce,"addEventListener")&&(P=function(t){t.stopPropagation()}),ce&&le(ce,"addEventListener")&&(N=function(t){t.preventDefault()}),se&&le(se,"addEventListener")&&o&&(L=function(t,e){return o(document,t,e)}),v&&l&&(A=function(t,e,n){var i=l(e,n);return v(t,i)}),l&&o&&(z=function(t,e,n,i){var r=l(n,i);return i=null,o(t,e,r)}),ce&&"string"==typeof ce.textContent?R=function(t,e){t.textContent=e}:ce&&"string"==typeof ce.innerText&&(R=function(t,e){t.innerText=e}),ce&&ae(ce,"style")&&(M=function(){var t="number"==typeof ce.style.top?0:"px";return function(e,n,i){null!==n&&n>=0&&(e.style.height=n+t),null!==i&&i>=0&&(e.style.width=i+t)}}()),ce&&ae(ce,"style")&&(F=function(){var t="number"==typeof ce.style.top?0:"px";return function(e,n,i){null!==n&&(e.style.left=n+t),null!==i&&(e.style.top=i+t)}}()),ce&&"string"==typeof ce.innerHTML&&(H=function(t,e){t.innerHTML=e}),ce&&ae(ce,"classList")&&le(ce.classList,"remove")&&(j=function(t,e){return t.classList.remove(e)}),ce&&le(ce,"removeChild")&&($=function(t,e){return t.removeChild(e)}),ce&&le(ce,"insertAdjacentHTML")&&(q=function(t,e){t.insertAdjacentHTML("afterBegin",e)}),ce&&"string"==typeof ce.textContent?B=function(t){return t.textContent}:ce&&"string"==typeof ce.innerText&&(B=function(t){return t.innerText}),ae(se,"defaultView")&&le(se.defaultView,"getComputedStyle")&&(W=function(t,e){return document.defaultView.getComputedStyle(t,null)[e]}),w&&y&&(K=function(t){var e=w(t),n=y(),i=e[0]+n[0],o=e[1]+n[1];return[i,o]}),ce&&"number"==typeof ce.offsetWidth&&(U=function(t){return[t.offsetHeight,t.offsetWidth]}),ce&&"number"==typeof ce.clientWidth&&(X=function(t){return[t.clientHeight,t.clientWidth]}),ce&&"string"==typeof ce.innerHTML&&(Y=function(t){return t.innerHTML}),se&&le(se,"getElementsByTagName")&&he&&(J=function(t,e){return he((t||document).getElementsByTagName(e))}),se&&le(se,"getElementsByClassName")&&he&&(G=function(t,e){return he((t||document).getElementsByClassName(e))}),h&&p&&(Q=function(t,e){for(t=h(t);t&&e&&p(t)!=e;)t=h(t);return t}),ce&&"string"==typeof ce.className&&h&&g&&(Z=function(t,e){for(t=h(t);t&&!g(t,e);)t=h(t);return t}),ce&&ae(ce,"style")&&(te=function(t,e){if("string"!=typeof e.style[t]){var n=["Moz","O","Khtml","Webkit","Ms"],i=n.length;for(t=t.charAt(0).toUpperCase()+t.substring(1);i--;)if("undefined"!=typeof e.style[n[i]+t])return n[i]+t;return null}return t}),se&&le(se,"createElement")&&(ee=function(t,e){return(e||document).createElement(t)}),H&&ee&&(ne=function(t,e){var n;return elTemp=ee("div",e),elTemp&&(H(t),n=elTemp.childNodes,elTemp=null),n}),ce&&le(ce,"insertAdjacentHTML")&&(ie=function(t,e){t.insertAdjacentHTML("beforeEnd",e)}),ce&&le(ce,"appendChild")&&(oe=function(t,e){return t.appendChild(e)}),ce&&ae(ce,"classList")&&le(ce.classList,"add")&&(re=function(t,e){return t.classList.add(e)}),n.dom.isHostMethod=le,n.dom.isHostObjectProperty=ae,n.dom.areFeatures=ue,n.dom.toArray=he,n.dom.detachListener=e,n.dom.getEventTarget=i,n.dom.attachListener=o,n.dom.query=r,n.dom.queryOne=s,n.dom.isNodeInNodeList=a,n.dom.bind=l,n.dom.undelegateListener=u,n.dom.delegateListener=c,n.dom.getElementTagName=p,n.dom.getElementParentElement=h,n.dom.isInQuery=d,n.dom.isDescendant=f,n.dom.delegateBoundListener=m,n.dom.hasClass=g,n.dom.attachWindowListener=v,n.dom.getViewportScrollPosition=y,n.dom.getPositionRelativeToViewport=w,n.dom.getElement=b,n.dom.undelegateQueryListener=C,n.dom.setViewportScrollPosition=_,n.dom.setInputValue=x,n.dom.getViewportSize=k,n.dom.getEventTargetRelated=D,n.dom.detachWindowListener=S,n.dom.detachBoundListener=O,n.dom.delegateTagNameListener=T,n.dom.delegateQueryListener=E,n.dom.delegateBoundQueryListener=I,n.dom.delegateBoundClassNameListener=V,n.dom.cancelPropagation=P,n.dom.cancelDefault=N,n.dom.attachDocumentListener=L,n.dom.attachBoundWindowListener=A,n.dom.attachBoundListener=z,n.dom.setText=R,n.dom.setSize=M,n.dom.setPosition=F,n.dom.setHtml=H,n.dom.removeClass=j,n.dom.removeChild=$,n.dom.prependHtml=q,n.dom.getText=B,n.dom.getStyleComputed=W,n.dom.getPositionRelativeToDocument=K,n.dom.getOuterSize=U,n.dom.getInnerSize=X,n.dom.getHtml=Y,n.dom.getDescendantsByTagName=J,n.dom.getDescendantsByClassName=G,n.dom.getAncestorByTagName=Q,n.dom.getAncestorByClassName=Z,n.dom.findProprietaryStyle=te,n.dom.createElement=ee,n.dom.htmlToNodes=ne,n.dom.appendHtml=ie,n.dom.appendChild=oe,n.dom.addClass=re,se=ce=null}(window),e.exports=n.dom},{}],113:[function(){try{document.write=document.writeln=function(){throw new Error("document.[write|writeln] is nisht-nisht")}}catch(t){}!function(t){var e,n,i,o,r,s,a,l;if((n=Function.prototype).bind||(n.bind=function(t){var e;return 1<arguments.length?(e=[].slice.call(arguments,1),function(n){return function(){return n.apply(t,arguments.length?e.concat([].slice.call(arguments)):e)}}(this)):function(e){return function(){return arguments.length?e.apply(t,arguments):e.call(t)}}(this)}),t.URL||(t.URL=null!=(i=t.webkitURL)?i:null),t.BlobBuilder||(t.BlobBuilder=null!=(o=null!=(r=t.WebKitBlobBuilder)?r:t.MozBlobBuilder)?o:null),t.requestFileSystem||(t.requestFileSystem=null!=(s=t.webkitRequestFileSystem)?s:null),t.requestAnimationFrame||(t.requestAnimationFrame=null!=(a=null!=(l=t.webkitRequestAnimationFrame)?l:t.mozRequestAnimationFrame)?a:null),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},function(t,e){var n;return n=e.defineProperty,"last"in t||n(t,"last",{get:function(){return this[this.length-1]}}),"first"in t||n(t,"first",{get:function(){return this[0]}})}(Array.prototype,Object),!t.event)try{Object.defineProperty(t,"event",{get:function(){return console.warn('Global "event" property is accessed. Did you forget a parameter in a DOM event handler?')}})}catch(u){e=u,console.log("we fail silently!",e)}}(this)},{}],114:[function(){!function(t){"use strict";var e,n=function(t,e){"undefined"==typeof e&&(e={}),this.init(t,e)},i=n.prototype,o=["canvas","vml"],r=["oval","spiral","square","rect","roundRect"],s=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,a=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1])?!0:!1,l=!!document.createElement("canvas").getContext,u=40,c=!0,p=function(t,e,n){var i,o=document.createElement(t);for(i in n)o[i]=n[i];return"undefined"!=typeof e&&e.appendChild(o),o},h=function(t,e){for(var n in e)t.style[n]=e[n];return t},d=function(t,e){for(var n in e)t.setAttribute(n,e[n]);return t},f=function(t,e,n,i){t.save(),t.translate(e,n),t.rotate(i),t.translate(-e,-n),t.beginPath()};i.init=function(t,i){"boolean"==typeof i.safeVML&&(c=i.safeVML);try{this.mum=void 0!==t?t:document.body}catch(r){this.mum=document.body}if(i.id="undefined"!=typeof i.id?i.id:"canvasLoader",this.cont=p("span",this.mum,{id:i.id}),this.cont.setAttribute("class","canvas-loader"),l)e=o[0],this.can=p("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=h(p("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(e=o[1],"undefined"==typeof n.vmlSheet){document.getElementsByTagName("head")[0].appendChild(p("style")),n.vmlSheet=document.styleSheets[document.styleSheets.length-1];var s,a=["group","oval","roundrect","fill"];for(s in a)n.vmlSheet.addRule(a[s],"behavior:url(#default#VML); position:absolute;")}this.vml=p("group",this.cont)}this.setColor(this.color),this.draw(),h(this.cont,{display:"none"})},i.cont={},i.can={},i.con={},i.cCan={},i.cCon={},i.timer={},i.activeId=0,i.diameter=40,i.setDiameter=function(t){this.diameter=Math.round(Math.abs(t)),this.redraw()},i.getDiameter=function(){return this.diameter},i.cRGB={},i.color="#000000",i.setColor=function(t){this.color=s.test(t)?t:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},i.getColor=function(){return this.color},i.shape=r[0],i.setShape=function(t){var e;for(e in r)if(t===r[e]){this.shape=t,this.redraw();break}},i.getShape=function(){return this.shape},i.density=40,i.setDensity=function(t){this.density=c&&e===o[1]?Math.round(Math.abs(t))<=u?Math.round(Math.abs(t)):u:Math.round(Math.abs(t)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},i.getDensity=function(){return this.density},i.range=1.3,i.setRange=function(t){this.range=Math.abs(t),this.redraw()},i.getRange=function(){return this.range},i.speed=2,i.setSpeed=function(t){this.speed=Math.round(Math.abs(t))},i.getSpeed=function(){return this.speed},i.fps=24,i.setFPS=function(t){this.fps=Math.round(Math.abs(t)),this.reset()},i.getFPS=function(){return this.fps},i.getRGB=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},i.draw=function(){var t,n,i,s,l,u,c,m,g,v,y,w,b,C=0,_=this.density,x=Math.round(_*this.range),k=0,D=1e3,S=0,O=this.cCon,T=this.diameter,E=.47;if(e===o[0])for(O.clearRect(0,0,D,D),d(this.can,{width:T,height:T}),d(this.cCan,{width:T,height:T});_>C;){switch(g=x>=C?1-(1-k)/x*C:g=k,u=270-360/_*C,c=u/180*Math.PI,O.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+g.toString()+")",this.shape){case r[0]:case r[1]:t=.07*T,s=T*E+Math.cos(c)*(T*E-t)-T*E,l=T*E+Math.sin(c)*(T*E-t)-T*E,O.beginPath(),this.shape===r[1]?O.arc(.5*T+s,.5*T+l,t*g,0,2*Math.PI,!1):O.arc(.5*T+s,.5*T+l,t,0,2*Math.PI,!1);break;case r[2]:t=.12*T,s=Math.cos(c)*(T*E-t)+.5*T,l=Math.sin(c)*(T*E-t)+.5*T,f(O,s,l,c),O.fillRect(s,l-.5*t,t,t);break;case r[3]:case r[4]:n=.3*T,i=.27*n,s=Math.cos(c)*(i+.13*(T-i))+.5*T,l=Math.sin(c)*(i+.13*(T-i))+.5*T,f(O,s,l,c),this.shape===r[3]?O.fillRect(s,l-.5*i,n,i):(m=.55*i,O.moveTo(s+m,l-.5*i),O.lineTo(s+n-m,l-.5*i),O.quadraticCurveTo(s+n,l-.5*i,s+n,l-.5*i+m),O.lineTo(s+n,l-.5*i+i-m),O.quadraticCurveTo(s+n,l-.5*i+i,s+n-m,l-.5*i+i),O.lineTo(s+m,l-.5*i+i),O.quadraticCurveTo(s,l-.5*i+i,s,l-.5*i+i-m),O.lineTo(s,l-.5*i+m),O.quadraticCurveTo(s,l-.5*i,s+m,l-.5*i))}O.closePath(),O.fill(),O.restore(),++C}else{switch(h(this.cont,{width:T,height:T}),h(this.vml,{width:T,height:T}),this.shape){case r[0]:case r[1]:w="oval",t=.14*D;break;case r[2]:w="roundrect",t=.12*D;break;case r[3]:case r[4]:w="roundrect",t=.3*D}for(n=i=t,s=.5*D-i,l=.5*-i;_>C;){switch(g=x>=C?1-(1-k)/x*C:g=k,u=270-360/_*C,this.shape){case r[1]:n=i=t*g,s=.5*D-.5*t-t*g*.5,l=.5*(t-t*g);break;case r[0]:case r[2]:a&&(l=0,this.shape===r[2]&&(s=.5*D-.5*i));break;case r[3]:case r[4]:n=.95*t,i=.28*n,a?(s=0,l=.5*D-.5*i):(s=.5*D-n,l=.5*-i),S=this.shape===r[4]?.6:0}y=d(h(p("group",this.vml),{width:D,height:D,rotation:u}),{coordsize:D+","+D,coordorigin:.5*-D+","+.5*-D}),v=h(p(w,y,{stroked:!1,arcSize:S}),{width:n,height:i,top:l,left:s}),b=p("fill",v,{color:this.color,opacity:g}),++C}}this.tick(!0)},i.clean=function(){if(e===o[0])this.con.clearRect(0,0,1e3,1e3);else{var t=this.vml;if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)}},i.redraw=function(){this.clean(),this.draw()},i.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},i.tick=function(t){var n=this.con,i=this.diameter;t||(this.activeId+=360/this.density*this.speed),e===o[0]?(n.clearRect(0,0,i,i),f(n,.5*i,.5*i,this.activeId/180*Math.PI),n.drawImage(this.cCan,0,0,i,i),n.restore()):(this.activeId>=360&&(this.activeId-=360),h(this.vml,{rotation:this.activeId}))},i.show=function(){if("number"!=typeof this.timer){var t=this;this.timer=self.setInterval(function(){t.tick()},Math.round(1e3/this.fps)),h(this.cont,{display:"block"})}},i.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,h(this.cont,{display:"none"}))},i.kill=function(){var t,n=this.cont;"number"==typeof this.timer&&this.hide(),e===o[0]?(n.removeChild(this.can),n.removeChild(this.cCan)):n.removeChild(this.vml);for(t in this)delete this[t]},t.CanvasLoader=n}(window)},{}],115:[function(t,e){e.exports={EncodeType:"entity",isEmpty:function(t){return t?null===t||0==t.length||/^\s+$/.test(t):!0},arr1:["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&OElig;","&oelig;","&Scaron;","&scaron;","&Yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&Alpha;","&Beta;","&Gamma;","&Delta;","&Epsilon;","&Zeta;","&Eta;","&Theta;","&Iota;","&Kappa;","&Lambda;","&Mu;","&Nu;","&Xi;","&Omicron;","&Pi;","&Rho;","&Sigma;","&Tau;","&Upsilon;","&Phi;","&Chi;","&Psi;","&Omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&Prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"],arr2:["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"],HTML2Numerical:function(t){return this.swapArrayVals(t,this.arr1,this.arr2)},NumericalToHTML:function(t){return this.swapArrayVals(t,this.arr2,this.arr1)},numEncode:function(t){var e,n,i;if(this.isEmpty(t))return"";for(e="",n=0;n<t.length;n++)i=t.charAt(n),(" ">i||i>"~")&&(i="&#"+i.charCodeAt()+";"),e+=i;return e},htmlDecode:function(t){var e,n,i,o=t;if(this.isEmpty(o))return"";if(o=this.HTML2Numerical(o),arr=o.match(/&#[0-9]{1,5};/g),null!=arr)for(i=0;i<arr.length;i++)n=arr[i],e=n.substring(2,n.length-1),o=e>=-32768&&65535>=e?o.replace(n,String.fromCharCode(e)):o.replace(n,"");return o},htmlEncode:function(t,e){return this.isEmpty(t)?"":(e=e||!1,e&&(t="numerical"==this.EncodeType?t.replace(/&/g,"&#38;"):t.replace(/&/g,"&amp;")),t=this.XSSEncode(t,!1),"numerical"!=this.EncodeType&&e||(t=this.HTML2Numerical(t)),t=this.numEncode(t),e||(t=t.replace(/&#/g,"##AMPHASH##"),t="numerical"==this.EncodeType?t.replace(/&/g,"&#38;"):t.replace(/&/g,"&amp;"),t=t.replace(/##AMPHASH##/g,"&#")),t=t.replace(/&#\d*([^\d;]|$)/g,"$1"),e||(t=this.correctEncoding(t)),"entity"==this.EncodeType&&(t=this.NumericalToHTML(t)),t)},XSSEncode:function(t,e){return this.isEmpty(t)?"":(e=e||!0,e?(t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")):(t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&#34;"),t=t.replace(/</g,"&#60;"),t=t.replace(/>/g,"&#62;")),t)},hasEncoded:function(t){return/&#[0-9]{1,5};/g.test(t)?!0:/&[A-Z]{2,6};/gi.test(t)?!0:!1},stripUnicode:function(t){return t.replace(/[^\x20-\x7E]/g,"")},correctEncoding:function(t){return t.replace(/(&amp;)(amp;)+/,"$1")},swapArrayVals:function(t,e,n){var i,o,r;if(this.isEmpty(t))return"";if(e&&n&&e.length==n.length)for(o=0,r=e.length;r>o;o++)i=new RegExp(e[o],"g"),t=t.replace(i,n[o]);return t},inArray:function(t,e){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}}},{}],116:[function(t,e){var n;e.exports=n=function(){function t(e){return this instanceof t?void(this.value=e):new t(e)}var e,n=Array.prototype.slice,i={uncountable_words:["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],plural_rules:[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status|by)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],singular_rules:[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]],non_titlecased_words:["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],id_suffix:new RegExp("(_ids|_id)$","g"),underbar:new RegExp("_","g"),space_or_underbar:new RegExp("[ _]","g"),uppercase:new RegExp("([A-Z])","g"),underbar_prefix:new RegExp("^_"),apply_rules:function(t,e,n,i){var o,r;if(i)t=i;else if(o=n.indexOf(t.toLowerCase())>-1,!o)for(r=0;r<e.length;r++)if(t.match(e[r][0])){t=t.replace(e[r][0],e[r][1]);break}return t}};return i.pluralize=function(t,e){return this.apply_rules(t,this.plural_rules,this.uncountable_words,e)},i.singularize=function(t,e){return this.apply_rules(t,this.singular_rules,this.uncountable_words,e)},i.camelize=function(t,e,n){var i,o,r,s,a;for(n||(t=t.toLowerCase()),i=t.split("/"),o=0;o<i.length;o++){for(r=i[o].split("_"),s=e&&o+1===i.length?1:0,a=s;a<r.length;a++)r[a]=r[a].charAt(0).toUpperCase()+r[a].substring(1);i[o]=r.join("")}return t=i.join("::")},i.underscore=function(t){var e,n=t.split("::");
for(e=0;e<n.length;e++)n[e]=n[e].replace(this.uppercase,"_$1"),n[e]=n[e].replace(this.underbar_prefix,"");return t=n.join("/").toLowerCase()},i.humanize=function(t,e){return t=t.toLowerCase(),t=t.replace(this.id_suffix,""),t=t.replace(this.underbar," "),e||(t=this.capitalize(t)),t},i.capitalize=function(t,e){return e||(t=t.toLowerCase()),t=t.substring(0,1).toUpperCase()+t.substring(1)},i.decapitalize=function(t){return t=t.substring(0,1).toLowerCase()+t.substring(1)},i.dasherize=function(t){return t=t.replace(this.space_or_underbar,"-")},i.titleize=function(t){var e,n,i,o;for(t=t.toLowerCase(),t=t.replace(this.underbar," "),e=t.split(" "),n=0;n<e.length;n++){for(i=e[n].split("-"),o=0;o<i.length;o++)this.non_titlecased_words.indexOf(i[o].toLowerCase())<0&&(i[o]=this.capitalize(i[o]));e[n]=i.join("-")}return t=e.join(" "),t=t.substring(0,1).toUpperCase()+t.substring(1)},i.demodulize=function(t){var e=t.split("::");return t=e[e.length-1]},i.tableize=function(t){return t=this.pluralize(this.underscore(t))},i.classify=function(t){return t=this.singularize(this.camelize(t))},i.foreign_key=function(t,e){return t=this.underscore(this.demodulize(t))+(e?"":"_")+"id"},i.ordinalize=function(t){var e,n,i,o,r,s=t.split(" ");for(e=0;e<s.length;e++)n=parseInt(s[e]),0/0===n&&(i=s[e].substring(s[e].length-2),o=s[e].substring(s[e].length-1),r="th","11"!=i&&"12"!=i&&"13"!=i&&("1"===o?r="st":"2"===o?r="nd":"3"===o&&(r="rd")),s[e]+=r);return t=s.join(" ")},e=i,Object.keys(e).forEach(function(i){return t[i]=e[i],t.prototype[i]=function(){return this.value=t[i].apply(t,[this.value].concat(n.call(arguments))),this}}),t.prototype.tap=function(t){return t(this.value),this},t.prototype.inspect=function(){return this+""},t.prototype.toString=function(){return this.value},t.prototype.valueOf=function(){return this.value},t}()},{}],117:[function(t,e){var n,i=[].slice;e.exports=n=function(){function t(e,n){return t.setAt({},e,n||{})}var e;return e=/^(string|number|boolean)$/,["forEach","indexOf","join","pop","reverse","shift","sort","splice","unshift","push"].forEach(function(e){return t[e+"At"]=function(){var n,o,r,s;if(n=arguments[0],o=arguments[1],r=3<=arguments.length?i.call(arguments,2):[],s=t.getAt(n,o),"function"==typeof(null!=s?s[e]:void 0))return s[e].apply(s,r);throw new Error("Does not implement method "+e+" at "+o)}}),t.getAt=function(t,e){var n;e="function"==typeof e.split?e.split("."):e.slice();try{return e.reduce(function(t,e){return t[e]},t)}catch(i){n=i}},t.setAt=function(t,n,i){var o,r,s,a,l,u;for(n="function"==typeof n.split?n.split("."):n.slice(),s=n.pop(),l=[],u=t,r=0,a=n.length;a>r;r++){if(o=n[r],e.test(typeof u[o]))throw new Error(l.concat(o).join(".")+" is\nprimitive, and cannot be extended.");u=u[o]||(u[o]={}),l.push(o)}return u[s]=i,t},t.assureAt=function(e,n,i){var o;return(o=t.getAt(e,n))?o:(t.setAt(e,n,i),i)},t.deleteAt=function(t,n){var i,o,r,s,a;for(n="function"==typeof n.split?n.split("."):n.slice(),a=[],r=n.pop(),o=0,s=n.length;s>o;o++){if(i=n[o],e.test(typeof t[i]))throw new Error(a.concat(i).join(".")+" is\nprimitive; cannot drill any deeper.");if(!(t=t[i]))return!1;a.push(i)}return delete t[r]},t}()},{}],118:[function(t,e){function n(t){return'"'+t.replace(/"/,'\\"')+'"'}function i(t){if("string"!=typeof t)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(t=t.trim(),!t)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!t.match(y))throw Error("Invalid request option. invalid attribute name: "+t);return t}function o(t){var e,n,o,r,s,a;if(!t.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(e={},n={},o=t.split(/\s+/),r=0;r<o.length;r++)if(s=o[r]){if(s=i(s),a=s.toLowerCase(),e[a])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");n[s]=!0,e[a]=!0}return Object.keys(n)}function r(t){var e={};return t.forEach(function(t){t.qualifiers.forEach(function(t){e[t.attrName]=!0})}),Object.keys(e)}var s,a,l,u,c,p,h,d,f,m,g,v,y,w,b=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n};if(s="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver,void 0===s)throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");a=function(){function t(){this.nodes=[],this.values=[]}return t.prototype.isIndex=function(t){return+t===t>>>0},t.prototype.nodeId=function(e){var n=e[t.ID_PROP];return n||(n=e[t.ID_PROP]=t.nextId_++),n},t.prototype.set=function(t,e){var n=this.nodeId(t);this.nodes[n]=t,this.values[n]=e},t.prototype.get=function(t){var e=this.nodeId(t);return this.values[e]},t.prototype.has=function(t){return this.nodeId(t)in this.nodes},t.prototype["delete"]=function(t){var e=this.nodeId(t);delete this.nodes[e],this.values[e]=void 0},t.prototype.keys=function(){var t,e=[];for(t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},t.ID_PROP="__mutation_summary_node_map_id__",t.nextId_=1,t}(),function(t){t[t.STAYED_OUT=0]="STAYED_OUT",t[t.ENTERED=1]="ENTERED",t[t.STAYED_IN=2]="STAYED_IN",t[t.REPARENTED=3]="REPARENTED",t[t.REORDERED=4]="REORDERED",t[t.EXITED=5]="EXITED"}(l||(l={})),u=function(){function t(t,e,n,i,o,r,s,a){"undefined"==typeof e&&(e=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof o&&(o=null),"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=null),"undefined"==typeof a&&(a=null),this.node=t,this.childList=e,this.attributes=n,this.characterData=i,this.oldParentNode=o,this.added=r,this.attributeOldValues=s,this.characterDataOldValue=a,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return t.prototype.getAttributeOldValue=function(t){return this.attributeOldValues?(this.isCaseInsensitive&&(t=t.toLowerCase()),this.attributeOldValues[t]):void 0},t.prototype.getAttributeNamesMutated=function(){var t,e=[];if(!this.attributeOldValues)return e;for(t in this.attributeOldValues)e.push(t);return e},t.prototype.attributeMutated=function(t,e){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},t in this.attributeOldValues||(this.attributeOldValues[t]=e)},t.prototype.characterDataMutated=function(t){this.characterData||(this.characterData=!0,this.characterDataOldValue=t)},t.prototype.removedFromParent=function(t){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=t},t.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},t.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},t}(),c=function(){function t(){this.added=new a,this.removed=new a,this.maybeMoved=new a,this.oldPrevious=new a,this.moved=void 0}return t}(),p=function(t){function e(e,n){var i,o,r,s,a;for(t.call(this),this.rootNode=e,this.reachableCache=void 0,this.wasReachableCache=void 0,this.anyParentsChanged=!1,this.anyAttributesChanged=!1,this.anyCharacterDataChanged=!1,i=0;i<n.length;i++)switch(o=n[i],o.type){case"childList":for(this.anyParentsChanged=!0,r=0;r<o.removedNodes.length;r++)s=o.removedNodes[r],this.getChange(s).removedFromParent(o.target);for(r=0;r<o.addedNodes.length;r++)s=o.addedNodes[r],this.getChange(s).insertedIntoParent();break;case"attributes":this.anyAttributesChanged=!0,a=this.getChange(o.target),a.attributeMutated(o.attributeName,o.oldValue);break;case"characterData":this.anyCharacterDataChanged=!0,a=this.getChange(o.target),a.characterDataMutated(o.oldValue)}}return b(e,t),e.prototype.getChange=function(t){var e=this.get(t);return e||(e=new u(t),this.set(t,e)),e},e.prototype.getOldParent=function(t){var e=this.get(t);return e?e.getOldParent():t.parentNode},e.prototype.getIsReachable=function(t){if(t===this.rootNode)return!0;if(!t)return!1;this.reachableCache=this.reachableCache||new a;var e=this.reachableCache.get(t);return void 0===e&&(e=this.getIsReachable(t.parentNode),this.reachableCache.set(t,e)),e},e.prototype.getWasReachable=function(t){if(t===this.rootNode)return!0;if(!t)return!1;this.wasReachableCache=this.wasReachableCache||new a;var e=this.wasReachableCache.get(t);return void 0===e&&(e=this.getWasReachable(this.getOldParent(t)),this.wasReachableCache.set(t,e)),e},e.prototype.reachabilityChange=function(t){return this.getIsReachable(t)?this.getWasReachable(t)?2:1:this.getWasReachable(t)?5:0},e}(a),h=function(){function t(t,e,n,i,o){this.rootNode=t,this.mutations=e,this.selectors=n,this.calcReordered=i,this.calcOldPreviousSibling=o,this.treeChanges=new p(t,e),this.entered=[],this.exited=[],this.stayedIn=new a,this.visited=new a,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return t.prototype.processMutations=function(){var t,e;if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(t=this.treeChanges.keys(),e=0;e<t.length;e++)this.visitNode(t[e],void 0)},t.prototype.visitNode=function(t,e){var n,i,o,r;if(!this.visited.has(t)&&(this.visited.set(t,!0),n=this.treeChanges.get(t),i=e,(n&&n.childList||void 0==i)&&(i=this.treeChanges.reachabilityChange(t)),0!==i&&(this.matchabilityChange(t),1===i?this.entered.push(t):5===i?(this.exited.push(t),this.ensureHasOldPreviousSiblingIfNeeded(t)):2===i&&(o=2,n&&n.childList&&(n.oldParentNode!==t.parentNode?(o=3,this.ensureHasOldPreviousSiblingIfNeeded(t)):this.calcReordered&&this.wasReordered(t)&&(o=4)),this.stayedIn.set(t,o)),2!==i)))for(r=t.firstChild;r;r=r.nextSibling)this.visitNode(r,i)},t.prototype.ensureHasOldPreviousSiblingIfNeeded=function(t){var e,n,i;this.calcOldPreviousSibling&&(this.processChildlistChanges(),e=t.parentNode,n=this.treeChanges.get(t),n&&n.oldParentNode&&(e=n.oldParentNode),i=this.childListChangeMap.get(e),i||(i=new c,this.childListChangeMap.set(e,i)),i.oldPrevious.has(t)||i.oldPrevious.set(t,t.previousSibling))},t.prototype.getChanged=function(t,e,n){var i,o,r,s,a;for(this.selectors=e,this.characterDataOnly=n,i=0;i<this.entered.length;i++)o=this.entered[i],r=this.matchabilityChange(o),(1===r||2===r)&&t.added.push(o);for(s=this.stayedIn.keys(),i=0;i<s.length;i++)o=s[i],r=this.matchabilityChange(o),1===r?t.added.push(o):5===r?t.removed.push(o):2===r&&(t.reparented||t.reordered)&&(a=this.stayedIn.get(o),t.reparented&&3===a?t.reparented.push(o):t.reordered&&4===a&&t.reordered.push(o));for(i=0;i<this.exited.length;i++)o=this.exited[i],r=this.matchabilityChange(o),(5===r||2===r)&&t.removed.push(o)},t.prototype.getOldParentNode=function(t){var e,n=this.treeChanges.get(t);if(n&&n.childList)return n.oldParentNode?n.oldParentNode:null;if(e=this.treeChanges.reachabilityChange(t),0===e||1===e)throw Error("getOldParentNode requested on invalid node.");return t.parentNode},t.prototype.getOldPreviousSibling=function(t){var e,n=t.parentNode,i=this.treeChanges.get(t);if(i&&i.oldParentNode&&(n=i.oldParentNode),e=this.childListChangeMap.get(n),!e)throw Error("getOldPreviousSibling requested on invalid node.");return e.oldPrevious.get(t)},t.prototype.getOldAttribute=function(t,e){var n,i=this.treeChanges.get(t);if(!i||!i.attributes)throw Error("getOldAttribute requested on invalid node.");if(n=i.getAttributeOldValue(e),void 0===n)throw Error("getOldAttribute requested for unchanged attribute name.");return n},t.prototype.attributeChangedNodes=function(t){var e,n,i,o,r,s,a,l,u,c,p,h;if(!this.treeChanges.anyAttributesChanged)return{};if(t)for(e={},n={},i=0;i<t.length;i++)o=t[i],e[o]=!0,n[o.toLowerCase()]=o;for(r={},s=this.treeChanges.keys(),i=0;i<s.length;i++)if(a=s[i],l=this.treeChanges.get(a),l.attributes&&2===this.treeChanges.reachabilityChange(a)&&2===this.matchabilityChange(a))for(u=a,c=l.getAttributeNamesMutated(),p=0;p<c.length;p++)o=c[p],(!e||e[o]||l.isCaseInsensitive&&n[o])&&(h=l.getAttributeOldValue(o),h!==u.getAttribute(o)&&(n&&l.isCaseInsensitive&&(o=n[o]),r[o]=r[o]||[],r[o].push(u)));return r},t.prototype.getOldCharacterData=function(t){var e=this.treeChanges.get(t);if(!e||!e.characterData)throw Error("getOldCharacterData requested on invalid node.");return e.characterDataOldValue},t.prototype.getCharacterDataChanged=function(){var t,e,n,i,o;if(!this.treeChanges.anyCharacterDataChanged)return[];for(t=this.treeChanges.keys(),e=[],n=0;n<t.length;n++)i=t[n],2===this.treeChanges.reachabilityChange(i)&&(o=this.treeChanges.get(i),o.characterData&&i.textContent!=o.characterDataOldValue&&e.push(i));return e},t.prototype.computeMatchabilityChange=function(t,e){var n,i;return this.matchCache||(this.matchCache=[]),this.matchCache[t.uid]||(this.matchCache[t.uid]=new a),n=this.matchCache[t.uid],i=n.get(e),void 0===i&&(i=t.matchabilityChange(e,this.treeChanges.get(e)),n.set(e,i)),i},t.prototype.matchabilityChange=function(t){var e,n,i,o,r=this;if(this.characterDataOnly)switch(t.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return 2;default:return 0}if(!this.selectors)return 2;if(t.nodeType!==Node.ELEMENT_NODE)return 0;for(e=t,n=this.selectors.map(function(t){return r.computeMatchabilityChange(t,e)}),i=0,o=0;2!==i&&o<n.length;){switch(n[o]){case 2:i=2;break;case 1:i=5===i?2:1;break;case 5:i=1===i?2:5}o++}return i},t.prototype.getChildlistChange=function(t){var e=this.childListChangeMap.get(t);return e||(e=new c,this.childListChangeMap.set(t,e)),e},t.prototype.processChildlistChanges=function(){function t(t,e){!t||i.oldPrevious.has(t)||i.added.has(t)||i.maybeMoved.has(t)||e&&(i.added.has(e)||i.maybeMoved.has(e))||i.oldPrevious.set(t,e)}var e,n,i,o,r,s;if(!this.childListChangeMap)for(this.childListChangeMap=new a,e=0;e<this.mutations.length;e++)if(n=this.mutations[e],"childList"==n.type&&(2===this.treeChanges.reachabilityChange(n.target)||this.calcOldPreviousSibling)){for(i=this.getChildlistChange(n.target),o=n.previousSibling,r=0;r<n.removedNodes.length;r++)s=n.removedNodes[r],t(s,o),i.added.has(s)?i.added["delete"](s):(i.removed.set(s,!0),i.maybeMoved["delete"](s)),o=s;for(t(n.nextSibling,o),r=0;r<n.addedNodes.length;r++)s=n.addedNodes[r],i.removed.has(s)?(i.removed["delete"](s),i.maybeMoved.set(s,!0)):i.added.set(s,!0)}},t.prototype.wasReordered=function(t){function e(t){if(!t)return!1;if(!s.maybeMoved.has(t))return!1;var e=s.moved.get(t);return void 0!==e?e:(l.has(t)?e=!0:(l.set(t,!0),e=i(t)!==n(t)),l.has(t)?(l["delete"](t),s.moved.set(t,e)):e=s.moved.get(t),e)}function n(t){var i=u.get(t);if(void 0!==i)return i;for(i=s.oldPrevious.get(t);i&&(s.removed.has(i)||e(i));)i=n(i);return void 0===i&&(i=t.previousSibling),u.set(t,i),i}function i(t){if(c.has(t))return c.get(t);for(var n=t.previousSibling;n&&(s.added.has(n)||e(n));)n=n.previousSibling;return c.set(t,n),n}var o,r,s,l,u,c;return this.treeChanges.anyParentsChanged?(this.processChildlistChanges(),o=t.parentNode,r=this.treeChanges.get(t),r&&r.oldParentNode&&(o=r.oldParentNode),(s=this.childListChangeMap.get(o))?s.moved?s.moved.get(t):(s.moved=new a,l=new a,u=new a,c=new a,s.maybeMoved.keys().forEach(e),s.moved.get(t)):!1):!1},t}(),d=function(){function t(t,e){var n,i,o,r=this;this.projection=t,this.added=[],this.removed=[],this.reparented=e.all||e.element?[]:void 0,this.reordered=e.all?[]:void 0,t.getChanged(this,e.elementFilter,e.characterData),(e.all||e.attribute||e.attributeList)&&(n=e.attribute?[e.attribute]:e.attributeList,i=t.attributeChangedNodes(n),e.attribute?this.valueChanged=i[e.attribute]||[]:(this.attributeChanged=i,e.attributeList&&e.attributeList.forEach(function(t){r.attributeChanged.hasOwnProperty(t)||(r.attributeChanged[t]=[])}))),(e.all||e.characterData)&&(o=t.getCharacterDataChanged(),e.characterData?this.valueChanged=o:this.characterDataChanged=o),this.reordered&&(this.getOldPreviousSibling=t.getOldPreviousSibling.bind(t))}return t.prototype.getOldParentNode=function(t){return this.projection.getOldParentNode(t)},t.prototype.getOldAttribute=function(t,e){return this.projection.getOldAttribute(t,e)},t.prototype.getOldCharacterData=function(t){return this.projection.getOldCharacterData(t)},t.prototype.getOldPreviousSibling=function(t){return this.projection.getOldPreviousSibling(t)},t}(),f=/[a-zA-Z_]+/,m=/[a-zA-Z0-9_\-]+/,g=function(){function t(){}return t.prototype.matches=function(t){var e,n;if(null===t)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==t;for(e=t.split(" "),n=0;n<e.length;n++)if(this.attrValue===e[n])return!0;return!1},t.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+n(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+n(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},t}(),v=function(){function t(){this.uid=t.nextUid++,this.qualifiers=[]}return Object.defineProperty(t.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),t.prototype.isMatching=function(e){return e[t.matchesSelector](this.selectorString)},t.prototype.wasMatching=function(t,e,n){var i,o,r,s,a,l;if(!e||!e.attributes)return n;if(i=e.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName,"*"!==i&&i!==t.tagName)return!1;for(o=[],r=!1,s=0;s<this.qualifiers.length;s++)a=this.qualifiers[s],l=e.getAttributeOldValue(a.attrName),o.push(l),r=r||void 0!==l;if(!r)return n;for(s=0;s<this.qualifiers.length;s++)if(a=this.qualifiers[s],l=o[s],void 0===l&&(l=t.getAttribute(a.attrName)),!a.matches(l))return!1;return!0},t.prototype.matchabilityChange=function(t,e){var n=this.isMatching(t);return n?this.wasMatching(t,e,n)?2:1:this.wasMatching(t,e,n)?5:0},t.parseSelectors=function(e){function n(){o&&(r&&(o.qualifiers.push(r),r=void 0),l.push(o)),o=new t}function i(){r&&o.qualifiers.push(r),r=new g}for(var o,r,s,a,l=[],u=/\s/,c="Invalid or unsupported selector syntax.",p=1,h=2,d=3,v=4,y=5,w=6,b=7,C=8,_=9,x=10,k=11,D=12,S=13,O=14,T=p,E=0;E<e.length;)switch(a=e[E++],T){case p:if(a.match(f)){n(),o.tagName=a,T=h;break}if("*"==a){n(),o.tagName="*",T=d;break}if("."==a){n(),i(),o.tagName="*",r.attrName="class",r.contains=!0,T=v;break}if("#"==a){n(),i(),o.tagName="*",r.attrName="id",T=v;break}if("["==a){n(),i(),o.tagName="*",r.attrName="",T=w;break}if(a.match(u))break;throw Error(c);case h:if(a.match(m)){o.tagName+=a;break}if("."==a){i(),r.attrName="class",r.contains=!0,T=v;break}if("#"==a){i(),r.attrName="id",T=v;break}if("["==a){i(),r.attrName="",T=w;break}if(a.match(u)){T=O;break}if(","==a){T=p;break}throw Error(c);case d:if("."==a){i(),r.attrName="class",r.contains=!0,T=v;break}if("#"==a){i(),r.attrName="id",T=v;break}if("["==a){i(),r.attrName="",T=w;break}if(a.match(u)){T=O;break}if(","==a){T=p;break}throw Error(c);case v:if(a.match(f)){r.attrValue=a,T=y;break}throw Error(c);case y:if(a.match(m)){r.attrValue+=a;break}if("."==a){i(),r.attrName="class",r.contains=!0,T=v;break}if("#"==a){i(),r.attrName="id",T=v;break}if("["==a){i(),T=w;break}if(a.match(u)){T=O;break}if(","==a){T=p;break}throw Error(c);case w:if(a.match(f)){r.attrName=a,T=b;break}if(a.match(u))break;throw Error(c);case b:if(a.match(m)){r.attrName+=a;break}if(a.match(u)){T=C;break}if("~"==a){r.contains=!0,T=_;break}if("="==a){r.attrValue="",T=k;break}if("]"==a){T=d;break}throw Error(c);case C:if("~"==a){r.contains=!0,T=_;break}if("="==a){r.attrValue="",T=k;break}if("]"==a){T=d;break}if(a.match(u))break;throw Error(c);case _:if("="==a){r.attrValue="",T=k;break}throw Error(c);case x:if("]"==a){T=d;break}if(a.match(u))break;throw Error(c);case k:if(a.match(u))break;if('"'==a||"'"==a){s=a,T=S;break}r.attrValue+=a,T=D;break;case D:if(a.match(u)){T=x;break}if("]"==a){T=d;break}if("'"==a||'"'==a)throw Error(c);r.attrValue+=a;break;case S:if(a==s){T=x;break}r.attrValue+=a;break;case O:if(a.match(u))break;if(","==a){T=p;break}throw Error(c)}switch(T){case p:case h:case d:case y:case O:n();break;default:throw Error(c)}if(!l.length)throw Error(c);return l},t.nextUid=1,t.matchesSelector=function(){var t=document.createElement("div");return"function"==typeof t.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof t.mozMatchesSelector?"mozMatchesSelector":"function"==typeof t.msMatchesSelector?"msMatchesSelector":"matchesSelector"}(),t}(),y=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,w=function(){function t(e){var n=this;this.connected=!1,this.options=t.validateOptions(e),this.observerOptions=t.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(t){return t.elementFilter?t.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(t){return t.all}),this.queryValidators=[],t.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(e){return t.createQueryValidator(n.root,e)})),this.observer=new s(function(t){n.observerCallback(t)}),this.reconnect()}return t.createObserverOptions=function(t){function e(t){if(!i.attributes||n){if(i.attributes=!0,i.attributeOldValue=!0,!t)return void(n=void 0);n=n||{},t.forEach(function(t){n[t]=!0,n[t.toLowerCase()]=!0})}}var n,i={childList:!0,subtree:!0};return t.forEach(function(t){if(t.characterData)return i.characterData=!0,void(i.characterDataOldValue=!0);if(t.all)return e(),i.characterData=!0,void(i.characterDataOldValue=!0);if(t.attribute)return void e([t.attribute.trim()]);var n=r(t.elementFilter).concat(t.attributeList||[]);n.length&&e(n)}),n&&(i.attributeFilter=Object.keys(n)),i},t.validateOptions=function(e){var n,r,s,a,l,u;for(n in e)if(!(n in t.optionKeys))throw Error("Invalid option: "+n);if("function"!=typeof e.callback)throw Error("Invalid options: callback is required and must be a function");if(!e.queries||!e.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(r={callback:e.callback,rootNode:e.rootNode||document,observeOwnChanges:!!e.observeOwnChanges,oldPreviousSibling:!!e.oldPreviousSibling,queries:[]},s=0;s<e.queries.length;s++)if(a=e.queries[s],a.all){if(Object.keys(a).length>1)throw Error("Invalid request option. all has no options.");r.queries.push({all:!0})}else if("attribute"in a){if(l={attribute:i(a.attribute)},l.elementFilter=v.parseSelectors("*["+l.attribute+"]"),Object.keys(a).length>1)throw Error("Invalid request option. attribute has no options.");r.queries.push(l)}else if("element"in a){if(u=Object.keys(a).length,l={element:a.element,elementFilter:v.parseSelectors(a.element)},a.hasOwnProperty("elementAttributes")&&(l.attributeList=o(a.elementAttributes),u--),u>1)throw Error("Invalid request option. element only allows elementAttributes option.");r.queries.push(l)}else{if(!a.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(a).length>1)throw Error("Invalid request option. characterData has no options.");r.queries.push({characterData:!0})}return r},t.prototype.createSummaries=function(t){var e,n,i;if(!t||!t.length)return[];for(e=new h(this.root,t,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),n=[],i=0;i<this.options.queries.length;i++)n.push(new d(e,this.options.queries[i]));return n},t.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(t){t&&t.recordPreviousState()})},t.prototype.runQueryValidators=function(t){this.queryValidators.forEach(function(e,n){e&&e.validate(t[n])})},t.prototype.changesToReport=function(t){return t.some(function(t){var e,n,i=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];return i.some(function(e){return t[e]&&t[e].length})?!0:t.attributeChanged&&(e=Object.keys(t.attributeChanged),n=e.some(function(e){return!!t.attributeChanged[e].length}))?!0:!1})},t.prototype.observerCallback=function(t){this.options.observeOwnChanges||this.observer.disconnect();var e=this.createSummaries(t);this.runQueryValidators(e),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(e)&&this.callback(e),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},t.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},t.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var t=this.createSummaries(this.observer.takeRecords());return this.changesToReport(t)?t:void 0},t.prototype.disconnect=function(){var t=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,t},t.NodeMap=a,t.parseElementFilter=v.parseSelectors,t.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},t}(),e.exports=w},{}],119:[function(t,e){function n(t,e,n){var a=!0,l=!0;if(!o(t))throw new TypeError;return n===!1?a=!1:r(n)&&(a="leading"in n?n.leading:a,l="trailing"in n?n.trailing:l),s.leading=a,s.maxWait=e,s.trailing=l,i(t,e,s)}var i=t("lodash.debounce"),o=t("lodash.isfunction"),r=t("lodash.isobject"),s={leading:!1,maxWait:0,trailing:!1};e.exports=n},{"lodash.debounce":120,"lodash.isfunction":123,"lodash.isobject":124}],120:[function(t,e){function n(t,e,n){var a,l,u,c,p,h,d,f,m,g,v=0,y=!1,w=!0;if(!i(t))throw new TypeError;return e=s(0,e)||0,n===!0?(f=!0,w=!1):o(n)&&(f=n.leading,y="maxWait"in n&&(s(e,n.maxWait)||0),w="trailing"in n?n.trailing:w),m=function(){var n,i=e-(r()-c);0>=i?(l&&clearTimeout(l),n=d,l=h=d=void 0,n&&(v=r(),u=t.apply(p,a),h||l||(a=p=null))):h=setTimeout(m,i)},g=function(){h&&clearTimeout(h),l=h=d=void 0,(w||y!==e)&&(v=r(),u=t.apply(p,a),h||l||(a=p=null))},function(){var n,i,o;return a=arguments,c=r(),p=this,d=w&&(h||!f),y===!1?n=f&&!h:(l||f||(v=c),i=y-(c-v),o=0>=i,o?(l&&(l=clearTimeout(l)),v=c,u=t.apply(p,a)):l||(l=setTimeout(g,i))),o&&h?h=clearTimeout(h):h||e===y||(h=setTimeout(m,e)),n&&(o=!0,u=t.apply(p,a)),!o||h||l||(a=p=null),u}}var i=t("lodash.isfunction"),o=t("lodash.isobject"),r=t("lodash.now"),s=Math.max;e.exports=n},{"lodash.isfunction":123,"lodash.isobject":124,"lodash.now":121}],121:[function(t,e){var n=t("lodash._isnative"),i=n(i=Date.now)&&i||function(){return(new Date).getTime()};e.exports=i},{"lodash._isnative":122}],122:[function(t,e){function n(t){return"function"==typeof t&&r.test(t)}var i=Object.prototype,o=i.toString,r=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=n},{}],123:[function(t,e){function n(t){return"function"==typeof t}e.exports=n},{}],124:[function(t,e){function n(t){return!(!t||!i[typeof t])}var i=t("lodash._objecttypes");e.exports=n},{"lodash._objecttypes":125}],125:[function(t,e){var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=n},{}],126:[function(){!function(e,n){function i(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function o(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return O[t.which]?O[t.which]:T[t.which]?T[t.which]:String.fromCharCode(t.which).toLowerCase()}function r(t,e){return t.sort().join(",")===e.sort().join(",")}function s(t){t=t||{};var e,n=!1;for(e in N)t[e]?n=!0:N[e]=0;n||(z=!1)}function a(t,e,n,i,o,s){var a,l,u,c,p=[],h=n.type;if(!V[t])return[];for("keyup"==h&&f(t)&&(e=[t]),a=0;a<V[t].length;++a)l=V[t][a],(i||!l.seq||N[l.seq]==l.level)&&h==l.action&&("keypress"==h&&!n.metaKey&&!n.ctrlKey||r(e,l.modifiers))&&(u=!i&&l.combo==o,c=i&&l.seq==i&&l.level==s,(u||c)&&V[t].splice(a,1),p.push(l));return p}function l(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function c(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function p(t,e,n,i){S.stopCallback(e,e.target||e.srcElement,n,i)||t(e,n)===!1&&(u(e),c(e))}function h(t,e,n){var i,o,r=a(t,e,n),l={},u=0,c=!1;for(i=0;i<r.length;++i)r[i].seq&&(u=Math.max(u,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=u)continue;c=!0,l[r[i].seq]=1,p(r[i].callback,n,r[i].combo,r[i].seq)}else c||p(r[i].callback,n,r[i].combo);o="keypress"==n.type&&A,n.type!=z||f(t)||o||s(l),A=c&&"keydown"==n.type}function d(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=o(t);if(e)return"keyup"==t.type&&L===e?void(L=!1):void S.handleKey(e,l(t),t)}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(){clearTimeout(k),k=setTimeout(s,1e3)}function g(){if(!x){x={};for(var t in O)t>95&&112>t||O.hasOwnProperty(t)&&(x[O[t]]=t)}return x}function v(t,e,n){return n||(n=g()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t,e,n,i){function r(e){return function(){z=e,++N[t],m()}}function a(e){p(n,e,t),"keyup"!==i&&(L=o(e)),setTimeout(s,10)}var l,u,c;for(N[t]=0,l=0;l<e.length;++l)u=l+1===e.length,c=u?a:r(i||b(e[l+1]).action),C(e[l],c,i,t,l)}function w(t){return"+"===t?["+"]:t.split("+")}function b(t,e){var n,i,o,r=[];for(n=w(t),o=0;o<n.length;++o)i=n[o],I[i]&&(i=I[i]),e&&"keypress"!=e&&E[i]&&(i=E[i],r.push("shift")),f(i)&&r.push(i);return e=v(i,r,e),{key:i,modifiers:r,action:e}}function C(t,e,n,i,o){P[t+":"+n]=e,t=t.replace(/\s+/g," ");var r,s=t.split(" ");return s.length>1?void y(t,s,e,n):(r=b(t,n),V[r.key]=V[r.key]||[],a(r.key,r.modifiers,{type:r.action},i,t,o),void V[r.key][i?"unshift":"push"]({callback:e,modifiers:r.modifiers,action:r.action,seq:i,level:o,combo:t}))}function _(t,e,n){for(var i=0;i<t.length;++i)C(t[i],e,n)}var x,k,D,S,O={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},I={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},V={},P={},N={},L=!1,A=!1,z=!1;for(D=1;20>D;++D)O[111+D]="f"+D;for(D=0;9>=D;++D)O[D+96]=D;i(n,"keypress",d),i(n,"keydown",d),i(n,"keyup",d),S={bind:function(t,e,n){return t=t instanceof Array?t:[t],_(t,e,n),this},unbind:function(t,e){return S.bind(t,function(){},e)},trigger:function(t,e){return P[t+":"+e]&&P[t+":"+e]({},t),this},reset:function(){return V={},P={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:h},e.Mousetrap=S,"function"==typeof t&&t.amd&&t(S)}(window,document)},{}],127:[function(){Mousetrap=function(t){var e={},n=t.stopCallback;return t.stopCallback=function(t,i,o,r){return e[o]||e[r]?!1:n(t,i,o)},t.bindGlobal=function(n,i,o){if(t.bind(n,i,o),n instanceof Array)for(var r=0;r<n.length;r++)e[n[r]]=!0;else e[n]=!0},t}(Mousetrap)},{}],128:[function(){!function(t){function e(t,e,r){if("keydown"==r.type){for(1===t.length&&p&&o(),i=0;i<e.length;++i)n(e[i]);n(t)}else"keyup"==r.type&&c.length>0&&o()}function n(t){var e;for(e=0;e<c.length;++e)if(c[e]===t)return;c.push(t),1===t.length&&(p=!0)}function o(){l.push(c),c=[],p=!1,a()}function r(t){var e;for(e=0;e<t.length;++e)t[e].sort(function(t,e){return t.length>1&&1===e.length?-1:1===t.length&&e.length>1?1:t>e?1:-1
}),t[e]=t[e].join("+")}function s(){u&&(r(l),u(l)),l=[],u=null,c=[],t.handleKey=d}function a(){clearTimeout(h),h=setTimeout(s,1e3)}var l=[],u=null,c=[],p=!1,h=null,d=t.handleKey;t.record=function(n){t.handleKey=e,u=n}}(Mousetrap)},{}],129:[function(t,e){function n(t){if(t){var e=t.trim();return e=e.replace(/\.\d\d\d+/,""),e=e.replace(/-/,"/").replace(/-/,"/"),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)}}function i(t){return s.inWords(o(t))}function o(t){return(new Date).getTime()-t.getTime()}var r,s;e.exports=function(t){return t instanceof Date?i(t):"string"==typeof t?i(n(t)):"number"==typeof t?i(new Date(t)):void 0},r={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},s=r.strings,e.exports.settings=r,s.inWords=function(t){function e(e,n){var i="function"==typeof e?e(n,t):e,o=s.numbers&&s.numbers[n]||n;return i.replace(/%d/i,o)}var n,i,o,a,l,u,c=s.prefixAgo,p=s.suffixAgo;return r.allowFuture&&0>t&&(c=s.prefixFromNow,p=s.suffixFromNow),n=Math.abs(t)/1e3,i=n/60,o=i/60,a=o/24,l=a/365,u=45>n&&e(s.seconds,Math.round(n))||90>n&&e(s.minute,1)||45>i&&e(s.minutes,Math.round(i))||90>i&&e(s.hour,1)||24>o&&e(s.hours,Math.round(o))||48>o&&e(s.day,1)||30>a&&e(s.days,Math.floor(a))||60>a&&e(s.month,1)||365>a&&e(s.months,Math.floor(a/30))||2>l&&e(s.year,1)||e(s.years,Math.floor(l)),[c,u,p].join(" ").toString().trim()},s.parse=n},{}]},{},[108])(108)});
//# sourceMappingURL=kd.min.map